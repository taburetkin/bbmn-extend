{"version":3,"file":"index.js","sources":["mn/object.js","utils/is-known-ctor/ctors.js","utils/is-known-ctor/index.js","utils/better-result/index.js","utils/get-option/index.js","mixins/common/get-option/index.js","mn/trigger-method-on.js","utils/camel-case/index.js","components/process-engine/engine.js","components/process-engine/init.js","mixins/common/startable/index.js","mixins/model/smart-get/get-nested-result.js","mixins/model/smart-get/get-property-schema.js","mixins/model/smart-get/get-display-config.js","bb/is-model.js","utils/get-by-path/get-property.js","utils/get-by-path/get-by-path-array.js","utils/get-by-path/index.js","mixins/model/smart-get/index.js","mixins/view/css-class-modifiers/index.js","mixins/view/nested-views/build-region.js","mixins/view/nested-views/normalize-region.js","bb/is-view.js","bb/is-view-class.js","mixins/view/nested-views/index.js","mixins/controls/control/trigger-control-event.js","mixins/controls/control/get-trigger-value.js","mixins/controls/control/index.js","mixins/controls/input/get-input-type.js","mixins/controls/input/set-attributes.js","mixins/controls/input/events/_get-option.js","mixins/controls/input/events/_is-char.js","mixins/controls/input/events/keydown.js","mixins/controls/input/events/keyup.js","mixins/controls/input/events/paste.js","mixins/controls/input/events/blur.js","mixins/controls/input/events/focus.js","mixins/controls/input/events/input.js","mixins/controls/input/events/index.js","mixins/controls/input/handle-event.js","mixins/controls/input/set-events.js","utils/convert-string/to-number.js","utils/to-bool/options.js","utils/to-bool/index.js","utils/convert-string/index.js","mixins/controls/input/index.js","utils/compare-ab/get-model.js","utils/compare-ab/get-view.js","utils/compare-ab/index.js","utils/comparator/index.js","utils/extend/index.js","utils/flat/traverse.js","utils/flat/index.js","utils/mix/options.js","utils/mix/create-mixin-from-object.js","utils/mix/normalize-arguments.js","utils/mix/with.js","utils/mix/index.js","utils/set-by-path/set-property.js","utils/set-by-path/ensure-arguments.js","utils/set-by-path/set-by-path-array.js","utils/set-by-path/normalize-options.js","utils/set-by-path/trigger-model-change-events.js","utils/set-by-path/index.js","utils/unflat/index.js"],"sourcesContent":["import Mn from 'backbone.marionette';\r\nconst MnObject = Mn.Object || Mn.MnObject;\r\nexport default MnObject;\r\n","import Model from '../../bb/model';\r\nimport Collection from '../../bb/collection';\r\nimport View from '../../bb/view';\r\nimport Router from '../../bb/router';\r\nimport MnObject from '../../mn/object';\r\nexport default [\r\n\tModel,\r\n\tCollection,\r\n\tView,\r\n\tRouter,\r\n\tMnObject\r\n];","import knownCtors from './ctors';\r\n\r\nfunction isKnownCtor(arg) {\r\n\tlet isFn = _.isFunction(arg);\r\n\tlet result = _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\r\n\treturn isFn && result;\r\n}\r\n\r\nexport default isKnownCtor;\r\n","import isKnownCtor from '../is-known-ctor';\r\nexport default function betterResult(obj, key, opts = {})\r\n{\r\n\tlet { context, args, checkAlso, force } = opts;\r\n\tlet defaultValue = opts.default;\r\n\r\n\tif(!_.isString(key) || key === '') return;\r\n\t\r\n\tlet value = (obj || {})[key];\r\n\r\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value)))\r\n\t\treturn value;\r\n\t\t\r\n\tlet result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\r\n\r\n\tif (result == null && _.isObject(checkAlso)) {\r\n\t\tlet alsoOptions = _.omit(opts, 'checkAlso');\r\n\t\tresult = betterResult(checkAlso, key, alsoOptions);\r\n\t}\r\n\r\n\tif (result == null && defaultValue != null )\r\n\t\tresult = defaultValue;\r\n\r\n\treturn result;\r\n}\r\n","import result from '../better-result';\r\n\r\nexport default function getOption(context, key, opts) {\r\n\t// if (_.isFunction(context.getOption)) {\r\n\t// \treturn context.getOption(key, opts);\r\n\t// } else {\r\n\t// \topts.context = context;\r\n\t// \tlet fallback = _.isFunction(context.getProperty)\r\n\t// \t\t? context.getProperty\r\n\t// \t\t: key => context[key];\r\n\t// \treturn getProperty(context.options, key, opts, fallback);\r\n\t// }\r\n\r\n\tlet options = _.extend({}, opts, {\r\n\t\tcontext,\r\n\t});\r\n\tlet { deep } = options;\r\n\r\n\tlet value = result(context.options, key, options);\r\n\tif (value == null && deep !== false) {\r\n\t\tvalue = result(context, key, options);\r\n\t}\r\n\treturn value;\r\n\r\n\r\n}\r\n","import result from '../../../utils/better-result';\r\nimport getOption from '../../../utils/get-option';\r\n\r\nconst Mixin = (Base) => Base.extend({\r\n\r\n\t//property first approach\r\n\tgetProperty(key, opts){\r\n\t\t\r\n\t\tlet defaultGetArguments = result(this, '_getPropertyArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts, {\r\n\t\t\tcontext: this,\r\n\t\t});\r\n\t\tlet { deep } = options;\r\n\r\n\t\tlet value = result(this, key, options);\r\n\t\tif (value == null && deep !== false) {\r\n\t\t\tvalue = result(this.options, key, options);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//options first approach\r\n\tgetOption(key, opts){\r\n\t\tlet defaultGetArguments = result(this, '_getOptionArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts);\r\n\r\n\t\treturn getOption(this, key, options);\r\n\t},\r\n}, {\r\n\tGetOptionMixin:true\r\n});\r\n\r\nMixin.defaults = {\r\n\tdeep: true,\r\n\tforce: true\r\n};\r\n\r\nexport default Mixin;\r\n","import Mn from 'backbone.marionette';\r\nexport default Mn.triggerMethodOn;","// camelCase('asd:qwe:zxc') -> asdQweZxc\r\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\r\nexport default function camelCase(text, first) {\r\n\tif (!_.isString(text)) return text;\r\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\r\n\treturn text.replace(splitter, (match, prefix, text) => text.toUpperCase());\r\n}","import triggerMethodOn from '../../mn/trigger-method-on';\r\nimport camelCase from '../../utils/camel-case';\r\n\r\nfunction executingProcessFlagKey(name){\r\n\treturn camelCase(`_process:${name}:executing`);\r\n}\r\n\r\nconst ProcessEngine = {\r\n\r\n\tprocess(processContext){\r\n\t\tlet executingKey = executingProcessFlagKey(processContext.name);\r\n\t\tlet previous = processContext.context[executingKey];\r\n\t\tlet concurent = processContext.concurent;\t\t\r\n\t\tif (previous) {\r\n\t\t\tif (concurent === false) {\r\n\t\t\t\treturn Promise.reject(new Error('concurent process not allowed'));\r\n\t\t\t} else if (concurent == 'first') {\r\n\t\t\t\treturn previous.promise;\r\n\t\t\t} else if (concurent == 'last') {\r\n\t\t\t\tprevious.reject();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprocessContext.promise = new Promise((resolve, reject) => {\r\n\r\n\t\t\tprocessContext.resolve = resolve;\r\n\t\t\tprocessContext.reject = reject;\r\n\r\n\t\t\tthis.triggerBegin(processContext);\r\n\r\n\r\n\t\t\tlet endWithErros = (...errors) => {\r\n\t\t\t\tthis.triggerErrors(processContext, errors);\r\n\t\t\t\tthis.triggerEnd(processContext, true);\r\n\t\t\t\treturn errors;\r\n\t\t\t};\r\n\r\n\t\t\t\r\n\t\t\treturn this.canNotRun(processContext).then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.triggerBefore(processContext);\r\n\r\n\t\t\t\t\tlet waitFor = this.getPromises(processContext);\r\n\t\t\t\t\tif(waitFor != null && !_.isArray(waitFor))\r\n\t\t\t\t\t\twaitFor = [waitFor];\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn Promise.all(waitFor).then(\r\n\t\t\t\t\t\t() => this.triggerEnd(processContext),\r\n\t\t\t\t\t\tendWithErros\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tendWithErros\r\n\t\t\t);\r\n\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\r\n\t\treturn processContext.promise;\r\n\t},\r\n\r\n\t_triggerOnContext (processContext, eventName, args) {\r\n\t\tlet event = processContext.name + (eventName ? ':' + eventName : '');\r\n\t\t\r\n\t\t//subject of process: view, model or whatever that initiate the process.\r\n\t\tlet context = processContext.context; \r\n\t\t\r\n\t\t// passing process arguments or suplied ones\r\n\t\t!args && (args = processContext.args);\r\n\r\n\t\ttriggerMethodOn(context, event, ...args);\r\n\t},\r\n\r\n\t_invokeOnContext(processContext, methodName)\r\n\t{\r\n\t\tlet method = camelCase(methodName);\r\n\t\tlet context = processContext.context;\r\n\t\tlet args = processContext.args;\r\n\r\n\t\tif (!_.isFunction(context[method])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn context[method].apply(context, args);\r\n\t},\r\n\ttriggerBegin(processContext){\r\n\t\tlet key = executingProcessFlagKey(processContext.name);\r\n\t\tprocessContext.context[key] = processContext;\t\t\r\n\t\tthis._triggerOnContext(processContext, 'begin');\r\n\t},\r\n\ttriggerBefore(processContext){\r\n\t\tthis._triggerOnContext(processContext, 'before');\r\n\t},\r\n\ttriggerEnd(processContext, fail){\r\n\t\tif(!fail)\r\n\t\t\tthis._triggerOnContext(processContext, '');\r\n\t\tthis._triggerOnContext(processContext, 'end');\r\n\t\tif (fail)\r\n\t\t\tprocessContext.reject();\r\n\t\telse\r\n\t\t\tprocessContext.resolve();\r\n\t\tprocessContext.ended = true;\r\n\t\tlet key = executingProcessFlagKey(processContext.name);\r\n\t\tdelete processContext.context[key];\r\n\t},\t\r\n\ttriggerErrors(processContext, errors){\r\n\t\tlet args = [errors, processContext.args];\r\n\t\tthis._triggerOnContext(processContext, 'error', args);\r\n\t},\r\n\t// return: promise\r\n\t// invokes on context method `canNot{ProcessName}` and expect it returns:\r\n\t// undefined, Promise, Array of promises, Error Object\r\n\t// undefined will resolve and Error will reject\r\n\tcanNotRun(processContext) {\t\t\r\n\t\tlet canNotRunPromise = this._invokeOnContext(processContext, 'can:not:' + processContext.name);\r\n\t\tif (canNotRunPromise == null) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t} else if (canNotRunPromise instanceof Error) {\r\n\t\t\treturn Promise.reject(canNotRunPromise);\r\n\t\t}\r\n\r\n\t\tif(!_.isArray(canNotRunPromise))\r\n\t\t\tcanNotRunPromise = [canNotRunPromise];\r\n\r\n\t\treturn Promise.all(canNotRunPromise);\r\n\r\n\t},\r\n\r\n\tgetPromises(processContext)\r\n\t{\r\n\t\tlet promises = this._invokeOnContext(processContext, 'get:' + processContext.name + ':promises');\r\n\t\tif (promises == null) return [];\r\n\t\tif (!_.isArray(promises))\r\n\t\t\tpromises =[promises];\r\n\r\n\t\treturn promises;\r\n\t},\r\n\r\n\r\n};\r\n\r\nexport default ProcessEngine;\r\n","import engine from './engine';\r\nexport default function initializeProcess(context, name, opts = {}){\r\n\r\n\tcontext[name] = function(...args){\r\n\t\tlet processContext = _.extend({\r\n\t\t\tname,\r\n\t\t\tcontext,\r\n\t\t\targs,\r\n\t\t}, opts);\r\n\t\treturn engine.process(processContext);\r\n\t};\r\n\r\n}","import initProcess from '../../../components/process-engine/init';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tinitProcess(this, 'start');\r\n\t\tinitProcess(this, 'stop');\r\n\t}\r\n});","export default function getNestedResult(value, context, schema) {\r\n\treturn value != null \r\n\t\t&& _.isFunction(schema.nested) \r\n\t\t&& schema.nested(value, context);\r\n}","export default function getPropertySchema(model, key)\r\n{\r\n\tif (_.isFunction(model.getPropertySchema)) {\r\n\t\treturn model.getPropertySchema(key);\r\n\t} else {\r\n\t\treturn {};\r\n\t}\r\n}","export default function getDisplayConfig(key, model, schema){\r\n\tif (key == null) return {};\r\n\treturn (_.isFunction(model.getPropertyDisplayConfig) && model.getPropertyDisplayConfig(key))\r\n\t\t|| schema.display || {}\r\n}","import Model from './model';\r\nexport default function isModel(arg){\r\n\treturn arg instanceof Model;\r\n}","import isModel from '../../bb/is-model';\r\nfunction getProperty(context, name)\r\n{\r\n\tif(context == null || !_.isObject(context) || name == null || name == '') return;\r\n\tif (isModel(context))\r\n\t\treturn context.get(name, { gettingByPath: true  });\r\n\telse\r\n\t\treturn context[name];\r\n}\r\nexport default getProperty;\t\r\n","\r\nimport getProperty from './get-property';\r\n\r\nfunction getByPathArray(context, propertyName, pathArray) {\r\n\t\r\n\tif (context == null || !_.isObject(context) || propertyName == null || propertyName == '')\r\n\t\treturn;\r\n\r\n\tvar prop = getProperty(context, propertyName);\r\n\r\n\tif (!pathArray.length || (pathArray.length && prop == null))\r\n\t\treturn prop;\r\n\r\n\tvar nextName = pathArray.shift();\r\n\r\n\treturn getByPathArray(prop, nextName, pathArray);\r\n\r\n}\r\n\r\nexport default getByPathArray;\r\n","import getByPathArray from './get-by-path-array';\r\n\r\nexport default function getByPath(obj, path) {\r\n\r\n\tif (obj == null || !_.isObject(obj) || path == null || path == '') return;\r\n\r\n\tvar pathArray = _.isString(path) ? path.split('.')\r\n\t\t: _.isArray(path) ? [].slice.call(path)\r\n\t\t\t: [path];\r\n\r\n\tvar prop = pathArray.shift();\r\n\r\n\treturn getByPathArray(obj, prop, pathArray);\r\n\r\n}\r\n","import Model from '../../../bb/model';\r\nimport getNestedResult from './get-nested-result';\r\nimport getPropertySchema from './get-property-schema';\r\nimport getDisplayConfig from './get-display-config';\r\nimport getByPath from '../../../utils/get-by-path';\r\nexport default Base => {\r\n\tconst originalGet = Model.prototype.get;\r\n\tconst Mixed = Base.extend({\r\n\t\tgetByPath(key){\r\n\t\t\tif(key.indexOf('.') > -1)\r\n\t\t\t\treturn getByPath(this, key);\r\n\t\t\telse\r\n\t\t\t\treturn originalGet.call(this, key);\r\n\t\t},\r\n\t\tget(key, opts = {}){\r\n\t\t\tif(key == null || key == '') return;\t\r\n\t\t\t\r\n\t\t\tlet value = 'value' in opts \r\n\t\t\t\t? opts.value\r\n\t\t\t\t: this.getByPath.call(this, key);\r\n\r\n\t\t\tif (!_.size(opts)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet result = opts.nested && getNestedResult(value, this, prop);\r\n\t\t\tif (result != null) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(opts.transform) && !opts.raw) {\r\n\t\t\t\tvalue = opts.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(prop.transform) && !opts.raw){\r\n\t\t\t\tvalue = prop.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(opts.display === true){\r\n\r\n\t\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\r\n\t\t\t\tif(opts.alternative){\r\n\t\t\t\t\tvalue = _.isFunction(display.alternative) && display.alternative.call(this, value, _.extend({},opts,prop), this);\r\n\t\t\t\t}\r\n\t\t\t\telse if(_.isFunction(display.transform)) {\r\n\t\t\t\t\tvalue = display.transform.call(this, value, opts, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(display.ifEmpty && (value == null || value === ''))\r\n\t\t\t\t\treturn display.ifEmpty;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tdisplay(key, opts = {}){\r\n\t\t\t_.extend(opts, { display:true });\r\n\t\t\treturn this.get(key, opts);\r\n\t\t},\r\n\t});\r\n\r\n\treturn Mixed;\r\n};\r\n","\r\nconst defaultCssConfig = {\r\n\tbeforeRender: true,\r\n\tmodelChange: true,\r\n\trefresh: true,\r\n};\r\n\r\nexport default (Base) => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._setupCssClassModifiers();\t\t\r\n\t},\r\n\r\n\trefreshCssClass(){\r\n\t\tlet className = this._getCssClassString();\r\n\t\tif(className == ''){\r\n\t\t\tthis.$el.removeAttr('class');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$el.attr({\r\n\t\t\t\tclass: className\r\n\t\t\t});\r\n\t\t}\r\n\t},\t\r\n\r\n\t_getCssClassModifiers(){\r\n\t\tlet optsModifiers = this.getOption('cssClassModifiers',{deep:false, args:[this.model, this]});\r\n\t\tlet propsModifiers = this.getProperty('cssClassModifiers',{deep:false, args:[this.model, this]});\r\n\t\tlet modifiers = [this.getOption('className')].concat(optsModifiers || [], propsModifiers || []);\r\n\t\treturn modifiers;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassModifiers(){\r\n\t\treturn this._getCssClassModifiers();\r\n\t},\r\n\t_getCssClassString()\r\n\t{\r\n\t\tlet modifiers = this.getCssClassModifiers();\r\n\t\tlet classes = _(modifiers).map((cls) => {\r\n\t\t\treturn _.isString(cls) \r\n\t\t\t\t? cls \r\n\t\t\t\t: _.isFunction(cls) \r\n\t\t\t\t\t? cls.call(this, this.model, this) \r\n\t\t\t\t\t: null;\r\n\t\t});\r\n\t\tlet ready = _(classes).filter((f) => f != null && f != '');\r\n\t\tlet className = _.uniq(ready).join(' ');\r\n\t\treturn (className || '').trim();\r\n\t},\r\n\r\n\t_setupCssClassModifiers(){\r\n\r\n\t\tif(this._cssClassModifiersInitialized) return;\r\n\r\n\t\tlet cfg = this.getCssClassConfig();\r\n\t\tif(!cfg) return;\r\n\r\n\t\tlet events = this.getCssClassEvents(cfg);\r\n\t\t_(events).each((eventName) => this.on(eventName, this.refreshCssClass));\r\n\r\n\t\tif (cfg.modelChange && this.model) {\r\n\t\t\tthis.listenTo(this.model, 'change', this.refreshCssClass);\r\n\t\t}\r\n\r\n\t\tthis._cssClassModifiersInitialized = true;\r\n\t},\r\n\t\r\n\t_getCssClassConfig(){\r\n\t\tlet cfg = _.extend({}, defaultCssConfig, this.getOption('cssClassConfig'));\r\n\t\tif(!cfg || _.size(cfg) == 0) return;\r\n\t\treturn cfg;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassConfig(){\r\n\t\treturn this._getCssClassConfig();\r\n\t},\r\n\r\n\t_getCssClassEvents(cfg){\r\n\t\tlet events = [].concat(cfg.events || []);\r\n\t\tif(cfg.refresh) events.push('refresh');\r\n\t\tif(cfg.beforeRender) events.push('before:render');\r\n\t\tevents = _(events).uniq();\r\n\t\treturn events;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassEvents(cfg){\r\n\t\treturn this._getCssClassEvents(cfg);\r\n\t}\r\n});\r\n","\r\nconst defaultSelector = (name, prefix = '') => prefix + 'region-' + name;\r\n\r\nfunction defaultUpdateDom(name, $el)\r\n{\r\n\tlet selector = defaultSelector(name);\r\n\tlet element = $('<div>').addClass(selector);\r\n\t$el.append(element);\r\n\r\n\treturn '.' + selector;\r\n}\r\n\r\nexport default function buildRegionFunc(view, hash, context){\r\n\r\n\tlet { $el } = view;\t\r\n\tlet { autoCreateRegion } = context;\r\n\tlet { updateDom, name, el } = hash;\r\n\tlet regionEl;\r\n\t\r\n\tlet region = view.getRegion(name);\r\n\r\n\r\n\tif (el == null && autoCreateRegion !== false) {\r\n\r\n\t\tlet testEl = region && region.getOption('el',{ deep:false});\r\n\r\n\t\tif (!region || !testEl || !$el.find(testEl).length) {\r\n\r\n\t\t\tregionEl = defaultUpdateDom(name, $el);\r\n\r\n\t\t} \r\n\r\n\t} else if(_.isFunction(updateDom)) {\r\n\t\tupdateDom.call(view, $el, view);\r\n\r\n\t} \r\n\t\r\n\t\r\n\tif (!region) {\r\n\t\tlet definition = _.pick(hash, 'replaceElement', 'regionClass');\r\n\t\tdefinition.el = hash.el || regionEl;\r\n\t\tregion = view.addRegion(name, definition);\r\n\t}\r\n\r\n\r\n\treturn region;\r\n}\r\n","import buildRegion from './build-region';\r\n\r\nexport default function normalizeNestedViewContextRegion(context) {\r\n\r\n\tlet { region } = context;\r\n\tlet regionName = (_.isString(region) && region) || context.regionName || context.name;\r\n\r\n\tif (_.isString(region) || region == null) {\r\n\t\tregion = {};\r\n\t} else if (_.isFunction(region)) {\r\n\t\tregion = region.call(this, context, this);\r\n\t}\r\n\r\n\tif (_.isObject(region)) {\r\n\r\n\t\tif(!region.name)\r\n\t\t\tregion.name = regionName;\r\n\t\tlet replaceElement = this.getOption('replaceNestedElement');\r\n\t\tcontext.region = _.extend({ replaceElement }, region);\r\n\t\tcontext.show = _.partial(buildRegion, this, context.region, context);\r\n\t}\r\n\treturn context;\r\n}\r\n","import View from './view';\r\nexport default function isView(arg){\r\n\treturn arg instanceof View;\r\n}","import View from './view';\r\nimport isView from './is-view';\r\nexport default function isViewClass(arg) {\r\n\treturn _.isFunction(arg) && (arg == View || isView(arg.prototype));\r\n}\r\n","import result from '../../../utils/better-result';\r\nimport normalizeRegion from './normalize-region';\r\nimport isViewClass from '../../../bb/is-view-class';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tthis._nestedViews = {};\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.initializeNestedViews();\r\n\t},\r\n\ttemplate: false,\r\n\r\n\tshowAllNestedViewsOnRender: false,\r\n\tshowNestedViewOnAdd: false,\r\n\treplaceNestedElement: true,\r\n\r\n\tinitializeNestedViews(){\r\n\t\tif (this._nestedViewsInitialized) return;\r\n\r\n\t\tif(this.getOption('showAllNestedViewsOnRender')) {\r\n\t\t\tthis.on('render', () => this.showAllNestedViews());\r\n\t\t}\r\n\r\n\t\tlet nesteds = this.getOption('nestedViews', { args:[this.model, this]});\r\n\t\t_(nesteds).each((context, index) => {\r\n\r\n\t\t\tlet name = _.isString(index) ? index : (context.name || _.uniqueId('nested'));\r\n\t\t\tthis.addNestedView(name, context);\r\n\r\n\t\t});\r\n\r\n\t\tthis._nestedViewsInitialized = true;\r\n\t},\r\n\t_normalizeNestedContext(name, context){\r\n\r\n\t\tif (isViewClass(context)) {\r\n\t\t\tlet View = context;\r\n\t\t\tcontext = {\r\n\t\t\t\tname, View\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t//unwrap to plain object\r\n\t\tif (_.isFunction(context)) {\r\n\t\t\tcontext = context.call(this, this.model, this);\r\n\t\t}\r\n\r\n\t\t//fix name if its not provided\r\n\t\tif (context.name == null) {\r\n\t\t\tcontext.name = name || _.uniqueId('nested');\r\n\t\t}\r\n\r\n\t\t//convert region to valid function\r\n\t\tcontext = normalizeRegion.call(this, context);\t\t\r\n\r\n\r\n\t\treturn context;\r\n\t},\r\n\t_createNestedContext(context){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\tcontexts[context.name] = context;\r\n\t},\r\n\r\n\taddNestedView(name, context){\r\n\r\n\t\tif (!_.isString(name) || name === '') {\r\n\t\t\tthrow new Error('addNestedView: first argument should be a string');\r\n\t\t}\r\n\r\n\t\tcontext = this._normalizeNestedContext(name, context);\r\n\t\tthis._createNestedContext(context);\r\n\t\tif(this.getOption('showNestedViewOnAdd') && this.isRendered()){\r\n\t\t\tthis.showNestedView(context);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tshowNestedView(name){\r\n\t\tlet region = this.getNestedViewRegion(name);\r\n\t\tlet view = region && this.buildNestedView(name);\r\n\t\tif (view) {\r\n\t\t\tregion.show(view);\r\n\t\t}\r\n\t},\r\n\tshowAllNestedViews(){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\t_(contexts).each(context => this.showNestedView(context));\r\n\t},\r\n\tgetNestedViewContext(name){\r\n\t\tlet contexts = this._nestedViews;\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn contexts;\r\n\t\telse\r\n\t\t\treturn contexts[name];\r\n\t},\r\n\r\n\r\n\tbuildNestedView(name){\r\n\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\r\n\t\tif(!context) return;\r\n\r\n\t\tif(_.isFunction(context.template))\r\n\t\t\treturn context.template;\r\n\t\telse {\r\n\t\t\tlet View = context.View;\r\n\t\t\tlet options = this.buildNestedViewOptions(result(context, 'options', { context: this, args: [this, this.model], default:{} }));\r\n\t\t\t\r\n\t\t\treturn new View(options);\r\n\t\t}\r\n\t},\r\n\tbuildNestedViewOptions(opts){\r\n\t\treturn opts;\r\n\t},\r\n\tgetNestedViewRegion(name){\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\t\treturn context && _.result(context, 'show');\r\n\t}\r\n\t\r\n});\r\n","export default function triggerControlEvent(control, event, ...args){\r\n\r\n\t//let control = _control.getParentControl() || _control;\r\n\r\n\tlet name = control.getControlName();\r\n\tlet eventName = name + ':' + event;\r\n\tlet method = _.isFunction(control.triggerMethod) ? control.triggerMethod\r\n\t\t: _.isFunction(control.trigger) ? control.trigger\r\n\t\t\t: function(){};\r\n\tmethod.call(control, eventName, ...args);\r\n\t\r\n\r\n\tcontrol.proxyControlEventToParent(eventName, ...args);\r\n\r\n}\r\n","export default function getTriggerValue(control, args = []){\r\n\r\n\tlet value = args.length ? args[0] : control.getControlValue();\r\n\r\n\tif(_.isFunction(control.convertValue))\r\n\t\tvalue = control.convertValue(value);\r\n\t\t\r\n\treturn value;\r\n}\r\n","import triggerControlEvent from './trigger-control-event';\r\nimport getTriggerValue from './get-trigger-value';\r\nimport getOption from '../../../utils/get-option';\r\nimport camelCase from '../../../utils/camel-case';\r\n\r\nexport default Base => Base.extend({\t\r\n\r\n\tgetControlValue(){\r\n\t\treturn this.value;\r\n\t},\r\n\tsetControlValue(value){\r\n\t\tthis.value = value;\r\n\t},\r\n\r\n\tgetControlName(){\r\n\t\treturn getOption(this, 'controlName', { args:[this]}) || 'control';\r\n\t},\r\n\r\n\tgetParentControl(){\r\n\t\treturn getOption(this, 'proxyTo', { args:[this]});\r\n\t},\r\n\ttriggerChildControlEvent(eventName, ...args){\r\n\t\tlet events = getOption(this, 'childControlEvents', { args:[this]}) || {};\r\n\t\tif (_.isFunction(events[eventName])) {\r\n\t\t\tevents[eventName].apply(this, args);\r\n\t\t}\r\n\t},\r\n\r\n\ttryValidateControl(value){\r\n\t\tlet validate = getOption(this, 'validateControl', { force: false });\r\n\t\tif(_.isFunction(validate))\r\n\t\t\treturn validate.call(this, value, this);\r\n\t},\r\n\r\n\ttriggerControlChange(){\r\n\t\tthis._triggerControlEvent('change', arguments);\r\n\t},\r\n\ttriggerControlDone(){\r\n\t\tthis._triggerControlEvent('done', arguments);\r\n\t},\r\n\t_isValueAsPrevious(value, type){\r\n\t\tlet previousTriggerName = this.getPreviousTriggerValueKey(type);\r\n\t\tif (previousTriggerName in this) {\r\n\t\t\treturn JSON.stringify(this[previousTriggerName]) === JSON.stringify(value);\r\n\t\t}\r\n\t},\r\n\tisValueAsPrevious(value, type)\r\n\t{\r\n\t\treturn this._isValueAsPrevious(value, type);\r\n\t},\r\n\tsetPreviousTriggerValue(value, type){\r\n\t\tlet key = this.getPreviousTriggerValueKey(type);\r\n\t\tthis[key] = value;\r\n\t},\r\n\tgetPreviousTriggerValueKey(type){\r\n\t\treturn camelCase('_previous:' + type);\r\n\t},\r\n\t_triggerControlEvent(eventName, args) {\r\n\r\n\t\tlet triggerValue = getTriggerValue(this, args);\r\n\t\tif (this.isValueAsPrevious(triggerValue, eventName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet errors = this.tryValidateControl(triggerValue);\r\n\t\tif (!errors) {\r\n\t\t\tthis.setPreviousTriggerValue(triggerValue, eventName);\t\t\t\r\n\t\t\ttriggerControlEvent(this, eventName, triggerValue);\r\n\t\t} else {\r\n\t\t\tthis.triggerControlInvalid(errors);\r\n\t\t}\r\n\t},\r\n\ttriggerControlInvalid(errors){\r\n\t\ttriggerControlEvent(this, 'invalid', errors);\r\n\t},\r\n\tproxyControlEventToParent(eventName, ...args){\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (parent && _.isFunction(parent.triggerChildControlEvent)) {\r\n\t\t\tparent.triggerChildControlEvent(eventName, ...args);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\r\n}, {\r\n\tControlMixin: true\r\n});\r\n","import getOption from '../../../utils/get-option';\r\nconst _getOption = (context, key, checkAlso) => getOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function getInputType(inputView, opts = {}){\r\n\t\r\n\tlet valueType = _getOption(inputView, 'valueType', opts);\r\n\tif (valueType == null) {\r\n\t\tlet value = inputView.getControlValue();\r\n\t\tif ( value == null) {\r\n\t\t\tvalueType = 'string';\r\n\t\t} else {\r\n\t\t\tif(_.isNumber(value))\r\n\t\t\t\tvalueType = 'number';\r\n\t\t\telse if(_.isDate(value))\r\n\t\t\t\tvalueType = 'datetime';\r\n\t\t\telse\r\n\t\t\t\tvalueType = 'string';\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tif (valueType == 'number') {\r\n\t\tinputView._valueIsNumber = true;\r\n\t}\r\n\r\n\tlet type = _getOption(inputView, 'inputType', opts);\r\n\r\n\tif (!type) {\r\n\t\tif (inputView._valueIsNumber) {\r\n\t\t\ttype = _getOption(inputView, 'inputNumberType', opts) || 'number';\r\n\t\t} else if (valueType == 'string') {\r\n\t\t\ttype = 'text';\r\n\t\t} else if (valueType == 'datetime') {\r\n\t\t\ttype = 'datetime';\r\n\t\t} else {\r\n\t\t\ttype = 'text';\r\n\t\t}\r\n\t}\r\n\tinputView.inputType = type;\r\n\tinputView.valueType = valueType;\r\n\treturn type;\r\n}\r\n","import getInputType from './get-input-type';\r\n\r\nimport getOption from '../../../utils/get-option';\r\n\r\nexport default function setInputAttributes(inputView, opts = {}) {\r\n\r\n\tlet attributes = getOption(inputView, 'attributes', { checkAlso: opts, args:[inputView] });\r\n\r\n\tlet restrictionKeys = {\r\n\t\t'maxLength':'maxlength', \r\n\t\t'minValue':'min', \r\n\t\t'maxValue':'max', \r\n\t\t'valuePattern':'pattern',\r\n\t\t'required':'required',\r\n\t\t'value':'value'\r\n\t};\r\n\tlet restrictions = {};\r\n\t_(restrictionKeys).each((key2, key) => {\r\n\t\tlet value = getOption(inputView, key, { checkAlso: opts, args:[inputView] });\r\n\t\tif (value != null)\r\n\t\t\trestrictions[key2] = value;\r\n\t});\r\n\r\n\tinputView.attributes = _.extend({\r\n\t\tvalue: inputView.value,\r\n\t\ttype: getInputType(inputView, opts),\r\n\t}, restrictions, attributes);\r\n\r\n}\r\n","import getOption from '../../../../utils/get-option';\r\nexport default (context, key, ifNull) => getOption(key, { args:[context], default: ifNull });\r\n\r\n","export default function isChar(event){\r\n\treturn event.key && event.key.length == 1 && !event.ctrlKey;\r\n}","import getOption from './_get-option';\r\nimport isChar from './_is-char';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\tlet prevent = false;\r\n\tlet stop = false;\r\n\r\n\tif (isChar(event)) {\r\n\t\tif (!context.isEnteredCharValid(event.key)) {\r\n\t\t\tprevent = true;\r\n\t\t}\r\n\t}\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tprevent = true;\r\n\t\tstop = true;\r\n\t}\r\n\r\n\tstop && event.stopPropagation();\r\n\tprevent && event.preventDefault();\r\n}\r\n","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tcontext.triggerControlDone();\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\t}\r\n}","export default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\tlet text = event.originalEvent.clipboardData.getData('text/plain');\r\n\tif (!text) return;\r\n\tif (!context.isValueValid(text)) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t}\r\n}\r\n","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context } = eventContext;\r\n\tif (getOption(context, 'doneOnBlur', true)) {\r\n\t\tcontext.triggerControlDone();\r\n\t}\r\n}","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context, input } = eventContext;\r\n\tif (getOption(context, 'selectOnFocus', true)) {\r\n\t\tinput.select();\r\n\t}\r\n}\r\n","export default function(eventContext) {\r\n\r\n\tlet { context, input, event } = eventContext;\r\n\r\n\tlet newvalue = context.setControlValue(event.target.value);\r\n\tif (event.target.value != (newvalue || '').toString()) {\r\n\t\tinput.value = newvalue;\r\n\t}\r\n\t//context.triggerControlChange();\r\n}\r\n","import keydown from './keydown';\r\nimport keyup from './keyup';\r\nimport paste from './paste';\r\nimport blur from './blur';\r\nimport focus from './focus';\r\nimport input from './input';\r\n//import jsChange from './js-change';\r\nexport default {\r\n\tkeydown, \r\n\t//keypress,\r\n\tkeyup,\r\n\tpaste,\r\n\tblur,\r\n\tfocus,\r\n\tinput,\r\n\t//'js:change': jsChange\r\n};","import camelCase from '../../../utils/camel-case';\r\nimport events from './events';\r\nexport default function handleInputEvent(control, eventName, event) {\r\n\tlet options = _.extend({\r\n\t\tcontext: control,\r\n\t\tinput: control.el,\r\n\t\trestrictions: control.restrictions,\r\n\t\teventName,\r\n\t\tevent\r\n\t});\r\n\r\n\r\n\tlet method = camelCase(`on:dom:${eventName}`);\r\n\r\n\tif (_.isFunction(events[eventName])) {\r\n\t\tevents[eventName].call(control, options);\r\n\t} \r\n\t\r\n\tif (_.isFunction(control[method])) {\r\n\t\tcontrol[method](event, options);\r\n\t} \r\n}","import handleEvent from './handle-event';\r\nimport eventHandlers from './events';\r\nimport getOption from '../../../utils/get-option';\r\n\r\nconst _getOption = (context, key, checkAlso) => \r\n\tgetOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function setInputEvents(inputView, opts = {}) {\r\n\r\n\tlet passedEvents = _getOption(inputView, 'events', opts);\t\r\n\r\n\tlet eventsArray = _(eventHandlers).keys();\t\r\n\tlet events = _.reduce(eventsArray, (Memo, eventName) => {\r\n\t\tMemo[eventName] = function(event){ \r\n\t\t\thandleEvent(this, eventName, event); \r\n\t\t};\r\n\t\treturn Memo;\r\n\t}, {});\r\n\tinputView.events = _.extend(events, passedEvents);\r\n}\r\n","export default function toNumber(text){\r\n\tif(_.isNumber(text)) return text;\r\n\tif(!_.isString(text)) return;\r\n\t\r\n\tlet value = parseFloat(text, 10);\r\n\tif(isNaN(value))\r\n\t\tvalue = undefined;\r\n\t\t\r\n\treturn value;\r\n}\r\n","export default {\r\n\tnullable: true, \r\n\tstrict: false,\r\n\treturnNullAs: undefined, \r\n\treturnEmptyAs: undefined, \r\n\treturnNullAndEmptyAs: undefined,\r\n\treturnAnyAs: undefined, \r\n\treturnOtherAs: undefined\r\n};\r\n","import defaultOptions from './options';\r\n\r\nconst trueValues = ['true','1','-1','yes'];\r\nconst falseValues = ['false','0','no'];\r\n\r\nconst alternative = function(...args) {\r\n\tlet returnValue;\r\n\t_(args).some(arg => {\r\n\t\tif(_.isBoolean(arg)) {\r\n\t\t\treturnValue = arg;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn returnValue;\r\n};\r\n\r\nconst valueOrAlternative = function(nullable, nullValue, value, ...alts){\r\n\tlet alt = alternative(...alts);\r\n\tif (alt != null)\r\n\t\treturn alt;\r\n\telse if (nullable)\r\n\t\treturn nullValue;\r\n\telse\r\n\t\treturn value;\r\n}\r\n\r\nconst convertToBoolean = function (arg, opts = {})\r\n{\r\n\r\n\tlet other;\r\n\tlet options = _.extend({}, defaultOptions, opts);\r\n\tlet { \r\n\t\tnullable, strict,\r\n\t\treturnNullAs, returnEmptyAs, returnNullAndEmptyAs,\r\n\t\treturnAnyAs, returnOtherAs\r\n\t} = options;\r\n\r\n\r\n\r\n\tif (arg == null) {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnNullAs, returnNullAndEmptyAs);\r\n\t}\r\n\telse if (arg === '') {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnEmptyAs, returnNullAndEmptyAs);\r\n\t} else if (_.isBoolean(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\t//  else if (_.isObject(arg)) {\r\n\t// }\r\n\t\r\n\tother = strict \r\n\t\t? (nullable ? undefined : false) \r\n\t\t: true;\r\n\t\t\r\n\r\n\tlet text = arg.toString().toLowerCase();\r\n\tlet isTrue = convertToBoolean.trueValues.indexOf(text) > -1;\r\n\tlet isFalse = convertToBoolean.falseValues.indexOf(text) > -1;\r\n\r\n\r\n\tif (_.isBoolean(returnAnyAs)) {\r\n\t\treturn returnAnyAs;\r\n\t} else if (_.isBoolean(returnOtherAs)) {\r\n\t\tother = returnOtherAs;\r\n\t}\r\n\t\r\n\treturn isTrue \r\n\t\t? true \r\n\t\t: isFalse \r\n\t\t\t? false \r\n\t\t\t: other;\r\n};\r\n\r\nconvertToBoolean.trueValues = trueValues;\r\nconvertToBoolean.falseValues = falseValues;\r\nexport default convertToBoolean;\r\n","import toNumber from './to-number';\r\nimport toBoolean from '../to-bool';\r\n\r\n\r\n//this is under development yet and can be change in any time\r\nexport default function convertString(text, type, opts) {\r\n\r\n\tswitch(type){\r\n\tcase 'number':\r\n\t\treturn toNumber(text, opts);\r\n\tcase 'boolean':\r\n\t\treturn toBoolean(text, opts);\r\n\tdefault:\r\n\t\treturn text;\r\n\t}\r\n\r\n\r\n}\r\n","import ControlMixin from '../control';\r\nimport setInputAttributes from './set-attributes';\r\nimport setInputEvents from './set-events';\r\nimport getOption from '../../../utils/get-option';\r\nimport convert from '../../../utils/convert-string';\r\n\r\nexport default Base => {\r\n\r\n\tlet Mixin = Base.ControlMixin ? Base : ControlMixin(Base);\r\n\r\n\treturn Mixin.extend({\r\n\t\tconstructor(opts){\r\n\t\t\t\r\n\t\t\tsetInputAttributes(this, opts);\r\n\t\t\tsetInputEvents(this, opts);\r\n\t\t\tMixin.apply(this, arguments);\r\n\r\n\t\t\tif (!_.isFunction(this.getOption)) {\r\n\t\t\t\tthis.getOption = _.partial(getOption, this, _, { args: [this]});\r\n\t\t\t}\r\n\r\n\t\t\tthis.buildRestrictions();\r\n\t\t\tlet value = this.getOption('value') || '';\t\t\t\r\n\t\t\tthis.el.value = value;\r\n\t\t\tthis.setControlValue(value);\r\n\t\t},\r\n\t\ttagName:'input',\r\n\t\ttemplate: false,\r\n\t\tbuildRestrictions(){\r\n\t\t\tlet attrs = _.result(this, 'attributes');\r\n\t\t\tlet pickNumbers = ['maxlength', 'min', 'max'];\r\n\t\t\tlet pickStrings = ['pattern'];\r\n\t\t\tlet pickBools = ['required'];\r\n\t\t\tlet restrictions = {};\r\n\t\t\t_(attrs).each((value, key) => {\r\n\t\t\t\tlet pick = false;\r\n\t\t\t\tkey = key.toLowerCase();\r\n\t\t\t\tif (pickNumbers.indexOf(key) > -1) {\r\n\t\t\t\t\tvalue = convert(value, 'number');\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickStrings.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickBools.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t\tvalue = convert(value, 'boolean', { returnNullAndEmptyAs: true, returnOtherAs: true });\r\n\t\t\t\t}\r\n\t\t\t\tpick && (restrictions[key] = value);\r\n\t\t\t});\r\n\t\t\tthis.restrictions = restrictions;\t\t\r\n\t\t},\r\n\t\tsetControlValue(value, opts = {})\r\n\t\t{\r\n\t\t\tthis.value = this.prepareValueBeforeSet(value);\r\n\t\t\tif(!opts.silent)\r\n\t\t\t\tthis.triggerControlChange();\r\n\t\t\treturn this.value;\r\n\t\t},\r\n\t\tprepareValueBeforeSet(value){\r\n\t\t\tif (value == null || value === '') return value;\r\n\t\t\t\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\tif (len > 0) {\r\n\t\t\t\tvalue = value.toString().substring(0, len);\r\n\t\t\t}\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tlet num = convert(value, 'number');\r\n\t\t\t\tif(isNaN(num))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tlet min = this.restrictions.min;\r\n\t\t\t\tlet max = this.restrictions.max;\r\n\t\t\t\t!isNaN(min) && num < min && (num = min);\r\n\t\t\t\t!isNaN(max) && num > max && (num = max);\r\n\t\t\t\treturn num;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tgetValueType(){\r\n\t\t\treturn this.valueType;\r\n\t\t},\r\n\t\tconvertValue(value){\r\n\t\t\treturn convert(value, this.getValueType());\r\n\t\t},\t\t\r\n\t\tgetMaxLength()\r\n\t\t{\r\n\t\t\treturn this.restrictions.maxlength;\r\n\r\n\t\t},\r\n\t\tisLengthValid(){\r\n\t\t\tlet value = this.getControlValue();\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\treturn len == null || value.length < len;\r\n\t\t},\r\n\t\tisEnteredCharValid(char) {\r\n\t\t\tlet type = this.getValueType();\r\n\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn ['.','-'].indexOf(char) > -1 || !isNaN(parseInt(char, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisValueValid(value){\r\n\t\t\tlet type = this.getValueType();\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn !isNaN(parseFloat(value, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalidateControlValue(value){\r\n\t\t\tif (value == null || value === '') {\r\n\t\t\t\tif(this.restrictions.required)\r\n\t\t\t\t\treturn 'required';\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet strValue = value.toString();\r\n\t\t\tif (_.isNumber(this.restrictions.maxlength) && strValue.length > this.restrictions.maxlength)\r\n\t\t\t\treturn 'length:big';\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tif (!_.isNumber(value))\r\n\t\t\t\t\treturn 'not:number';\r\n\t\t\t\tif (_.isNumber(this.restrictions.min) && value < this.restrictions.min)\r\n\t\t\t\t\treturn 'less:than:min';\r\n\t\t\t\tif (_.isNumber(this.restrictions.max) && value > this.restrictions.max)\r\n\t\t\t\t\treturn 'greater:than:max';\r\n\t\t\t}\r\n\t\t\tif (this.restrictions.pattern) {\r\n\t\t\t\tlet pattern = RegExp(this.restrictions.pattern);\r\n\t\t\t\tif (pattern.test(strValue)) {\r\n\t\t\t\t\treturn 'pattern:mismatch';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import isModel from '../../bb/is-model';\r\nimport isView from '../../bb/is-view';\r\nexport default function getModel(arg){\r\n\treturn isModel(arg) ? arg\r\n\t\t: isView(arg) ? arg.model\r\n\t\t\t: undefined;\r\n}","import isView from '../../bb/is-view';\r\nexport default function getModel(arg){\r\n\treturn isView(arg) && arg;\r\n}","\r\nimport getModel from './get-model';\r\nimport getView from './get-view';\r\nexport default function compareAB(a, b, func){\r\n\tif(_.isArray(func)) {\r\n\r\n\t\tlet result = 0;\r\n\r\n\t\t_(func).every((f) => {\r\n\t\t\tresult = compareAB(a,b,f);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\t\t\r\n\t\treturn result;\r\n\t} else {\r\n\t\tif (_.isFunction(func)) {\r\n\t\t\ta = func.call(a, getModel(a), getView(a)) ;\r\n\t\t\tb = func.call(b, getModel(b), getView(b));\r\n\t\t}\r\n\t\treturn a < b ? -1\r\n\t\t\t: a > b ? 1\r\n\t\t\t\t: 0;\r\n\t}\r\n}\r\n","import compareAB from '../compare-ab';\r\nexport default function comparator(...args){\r\n\tvar result = 0;\r\n\r\n\t//for simple case (arg1, arg2, compare)\r\n\tif (args.length <= 3 && !_.isArray(args[0])){\r\n\r\n\t\treturn compareAB.apply(null, args);\r\n\r\n\t} \r\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\r\n\t//each arguments should be an array\r\n\telse {\r\n\r\n\t\t_(args).every((single) => {\r\n\r\n\t\t\tif(!_.isArray(single)) return true;\r\n\t\t\tresult = compareAB(...single);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n","//import Mn from 'backbone.marionette';\r\nexport default Mn.extend;\r\n","import isModel from '../../bb/is-model';\r\nexport default function traverse(fields, root)\r\n{\r\n\troot = root || '';\r\n\tif (this == null || typeof this != 'object') {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar hash = isModel(this) ? this.attributes : this;\r\n\r\n\tvar props = Object.getOwnPropertyNames(hash);\r\n\r\n\tfor (var x = 0; x < props.length; x++) {\r\n\t\tvar name = props[x];\r\n\t\tvar prop = this[name];\r\n\r\n\t\tif (prop == null || typeof prop != 'object' || (prop instanceof Date || prop instanceof Array)) {\r\n\r\n\t\t\tfields[root + name] = prop;\r\n\t\t}\r\n\t\telse if (typeof prop == 'object') {\r\n\r\n\t\t\ttraverse.call(prop, fields, root + name + '.');\r\n\t\t}\r\n\t}\r\n\t\t\r\n}","import traverse from './traverse';\r\n\r\nexport default function flattenObject(obj) {\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\ttraverse.call(obj, res);\r\n\treturn res;\r\n}","export default {\r\n\tmergeObjects: true,\r\n\twrapObjectWithConstructor: true,\r\n};\r\n","export default function createMixinFromObject(arg) {\r\n\tlet obj = _.clone(arg);\r\n\treturn Base => { \r\n\t\tif (_.isFunction(obj.constructor)) {\r\n\t\t\tlet providedCtor = obj.constructor;\r\n\t\t\tobj.constructor = function(){\r\n\t\t\t\tBase.apply(this, arguments);\r\n\t\t\t\tprovidedCtor.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn Base.extend(obj);\r\n\t};\r\n}\r\n","\r\nimport createMixinFromObject from './create-mixin-from-object';\r\n\r\nexport default function normalizeArguments(args, opts = {}) {\r\n\tlet raw = {};\r\n\tlet wrap = opts.wrapObjectWithConstructor == true;\r\n\tlet merge = opts.mergeObjects == true;\r\n\tlet mixins = [];\r\n\t_(args).each(arg => {\r\n\t\t\r\n\t\t//if argument is function just put it to mixins array\r\n\t\t//and continue;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tmixins.push(arg);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if argument is not an object just skip it\r\n\t\tif (!_.isObject(arg)) return;\r\n\r\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \r\n\t\t//and there is a constructor function\r\n\t\t//converting to a mixin function\r\n\t\t//otherwise extend rawObject\r\n\t\tif (!merge || (wrap && _.isFunction(arg.constructor))) {\r\n\t\t\tmixins.push(createMixinFromObject(arg));\r\n\t\t} \r\n\t\telse {\r\n\t\t\t_.extend(raw, arg);\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n\t//if rawObject is not empty\r\n\t//convert it to a mixin function\r\n\t//and put it to the begin of mixins array\r\n\tif (_.size(raw))\r\n\t\tmixins.unshift(createMixinFromObject(raw));\r\n\r\n\treturn mixins;\r\n}\r\n","\r\n\r\nimport normalizeArguments from './normalize-arguments';\r\n\r\nexport default function withMethod(...args) {\r\n\r\n\tlet mixins = normalizeArguments(args, this.options);\r\n\tlet Mixed = this.class;\r\n\tif (!mixins.length) return Mixed;\r\n\telse\r\n\t\treturn _.reduce(mixins, (Memo, Ctor) => Ctor(Memo), Mixed);\r\n\r\n}\r\n","import defaultOptions from './options';\r\nimport withMethod from './with';\r\n\r\nimport extend from '../extend';\r\n\r\n\r\n\r\nexport default function mix(_ctor, options) {\r\n\r\n\tlet opts = _.extend({}, defaultOptions, options);\r\n\r\n\tlet ctor;\r\n\tif (_.isFunction(_ctor)) {\r\n\t\tctor = _ctor;\r\n\t}\r\n\telse if (_.isObject(_ctor)) {\r\n\t\tctor = function () { };\r\n\t\t_.extend(ctor.prototype, _ctor);\r\n\t} else {\r\n\t\tthrow new Error('Mix argument should be a class or a plain object');\r\n\t}\r\n\r\n\tif (!_.isFunction(ctor.extend))\r\n\t\tctor.extend = extend;\r\n\r\n\treturn {\r\n\t\toptions: opts,\r\n\t\twith: withMethod,\r\n\t\tclass: ctor,\r\n\t};\r\n}\r\n","import getProperty from '../get-by-path/get-property';\r\nimport isModel from '../../bb/is-model';\r\nfunction setProperty(context, name, value) {\r\n\tif (isModel(context)) {\r\n\t\tcontext.set(name, value, { silent: true });\r\n\t}\r\n\telse {\r\n\t\tcontext[name] = value;\r\n\t}\r\n\r\n\treturn getProperty(context, name);\r\n}\r\n\r\nexport default setProperty;\r\n","export default function ensureSetByPathArguments(context, path)\r\n{\r\n\tlet errors = [];\r\n\tif (context == null || !_.isObject(context)) {\r\n\t\terrors.push(new Error('Context is not an object'));\r\n\t}\r\n\tif (!_.isString(path) || path === '') {\r\n\t\terrors.push(new Error('Path is not a string'));\r\n\t}\r\n\tif (errors.length) {\r\n\t\treturn errors;\r\n\t}\r\n}\r\n","import getProperty from '../get-by-path/get-property';\r\nimport setProperty from './set-property';\r\nimport ensureArguments from './ensure-arguments';\r\nimport isModel from '../../bb/is-model';\r\nexport default function setByPathArr(context, propertyName, pathArray, value, options) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, propertyName);\r\n\tif (argumentsErrors) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet modelContext;\r\n\tif (isModel(context)) {\r\n\t\tmodelContext = {\r\n\t\t\tmodel: context,\r\n\t\t\tproperty: propertyName,\r\n\t\t\tpathChunks: [].slice.call(pathArray)\r\n\t\t};\r\n\t}\r\n\r\n\t//set value if this is a last chunk of path\r\n\tif (!pathArray.length) {\r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\treturn setProperty(context, propertyName, value, options);\r\n\r\n\t} else {\r\n\r\n\t\tvar prop = getProperty(context, propertyName);\r\n\r\n\t\tif (!_.isObject(prop) && !options.force) {\r\n\t\t\treturn;\r\n\t\t} else if (!_.isObject(prop) && options.force) {\r\n\t\t\tprop = setProperty(context, propertyName, {}, options);\r\n\t\t} \r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\tvar nextName = pathArray.shift();\t\r\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\r\n\r\n\t}\r\n}\r\n","export default function normalizeSetByPathOptions(opts = {}, ext)\r\n{\r\n\r\n\tlet options = _.extend({}, opts, ext, {\r\n\t\tsilent: opts.silent === true,\r\n\t\tforce: opts.force !== false,\r\n\t\t//passPath: [],\r\n\t\tmodels: []\r\n\t});\r\n\r\n\treturn options;\r\n}\r\n","export default function triggerModelEventsOnSetByPath(value, options = {})\r\n{\r\n\tif (options.silent || !options.models.length) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t_(options.models).each(context => {\r\n\t\tlet rest = context.pathChunks.join(':');\r\n\t\tif (rest) {\r\n\t\t\tcontext.model.trigger(`change:${context.property}:${rest}`, context.model, value);\r\n\t\t}\r\n\t\tcontext.model.trigger(`change:${context.property}`, context.model, value);\r\n\t\tcontext.model.trigger('change', context.model);\r\n\t});\r\n\r\n\t// //triggering change event on all met models\r\n\t// let originPath = options.pathArray.join(':');\r\n\t// while (options.models.length) {\r\n\t// \tlet modelContext = options.models.pop();\r\n\t// \tlet propertyEventName = modelContext.path == ''\r\n\t// \t\t? originPath\r\n\t// \t\t: originPath.substring(modelContext.path.length + 1);\r\n\r\n\t// \tif (propertyEventName) {\r\n\t// \t\tmodelContext.model.trigger('change:' + propertyEventName, value);\r\n\t// \t}\r\n\t// \tmodelContext.model.trigger('change', modelContext.model);\r\n\t// }\r\n}\r\n","import setByPathArray from './set-by-path-array';\r\nimport normalizeOptions from './normalize-options';\r\nimport triggerModelChangeEvents from './trigger-model-change-events';\r\nimport ensureArguments from './ensure-arguments';\r\nexport default function setByPath(context, path, value, opts = {}) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, path);\r\n\tif (argumentsErrors) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tlet pathArray = path.split('.');\t\r\n\tlet options = normalizeOptions(opts, { path, pathArray: [].slice.call(pathArray) });\r\n\r\n\tlet propertyName = pathArray.shift();\r\n\r\n\tlet result = setByPathArray(context, propertyName, pathArray, value, options);\r\n\r\n\tif (result === undefined && value !== undefined) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\ttriggerModelChangeEvents(value, options);\r\n\r\n\treturn value;\r\n\r\n\t// if (_.isObject(path) && !_.isArray(path)) {\r\n\t// \tvalue = path.value;\r\n\t// \toptions.force = path.force !== false;\r\n\t// \toptions.silent = path.silent === true;\r\n\t// \tpath = path.path;\r\n\t// }\r\n\r\n\t// var prop = pathArray.shift();\r\n\r\n\t// if (isModel(context)) {\r\n\t// \toptions.models.push({\r\n\t// \t\tpath: '',\r\n\t// \t\tproperty: prop,\r\n\t// \t\tmodel: context\r\n\t// \t});\r\n\t// }\r\n\r\n}\r\n\r\n\r\n","import setByPath from '../set-by-path';\r\n\r\nexport default function unFlat(obj) {\r\n\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\tfor (var e in obj) {\r\n\t\tsetByPath(res, e, obj[e]);\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n"],"names":["MnObject","Mn","Object","Model","Collection","View","Router","isKnownCtor","arg","isFn","_","isFunction","result","knownCtors","some","ctor","prototype","betterResult","obj","key","opts","context","args","checkAlso","force","defaultValue","default","isString","value","apply","isObject","alsoOptions","omit","getOption","options","extend","deep","Mixin","Base","defaultGetArguments","defaults","triggerMethodOn","camelCase","text","first","splitter","replace","match","prefix","toUpperCase","executingProcessFlagKey","name","ProcessEngine","processContext","executingKey","previous","concurent","Promise","reject","Error","promise","resolve","triggerBegin","endWithErros","errors","triggerErrors","triggerEnd","canNotRun","then","triggerBefore","waitFor","getPromises","isArray","all","eventName","event","methodName","method","_triggerOnContext","fail","ended","canNotRunPromise","_invokeOnContext","promises","initializeProcess","engine","process","arguments","getNestedResult","schema","nested","getPropertySchema","model","getDisplayConfig","getPropertyDisplayConfig","display","isModel","getProperty","get","gettingByPath","getByPathArray","propertyName","pathArray","prop","length","nextName","shift","getByPath","path","split","slice","call","originalGet","Mixed","indexOf","size","transform","raw","alternative","ifEmpty","defaultCssConfig","_setupCssClassModifiers","className","_getCssClassString","$el","removeAttr","attr","optsModifiers","propsModifiers","modifiers","concat","_getCssClassModifiers","getCssClassModifiers","classes","map","cls","ready","filter","f","uniq","join","trim","_cssClassModifiersInitialized","cfg","getCssClassConfig","events","getCssClassEvents","each","on","refreshCssClass","modelChange","listenTo","_getCssClassConfig","refresh","push","beforeRender","_getCssClassEvents","defaultSelector","defaultUpdateDom","selector","element","$","addClass","append","buildRegionFunc","view","hash","autoCreateRegion","updateDom","el","regionEl","region","getRegion","testEl","find","definition","pick","addRegion","normalizeNestedViewContextRegion","regionName","replaceElement","show","partial","buildRegion","isView","isViewClass","_nestedViews","initializeNestedViews","_nestedViewsInitialized","showAllNestedViews","nesteds","index","uniqueId","addNestedView","normalizeRegion","contexts","getNestedViewContext","_normalizeNestedContext","_createNestedContext","isRendered","showNestedView","getNestedViewRegion","buildNestedView","template","buildNestedViewOptions","triggerControlEvent","control","getControlName","triggerMethod","trigger","proxyControlEventToParent","getTriggerValue","getControlValue","convertValue","validate","_triggerControlEvent","type","previousTriggerName","getPreviousTriggerValueKey","JSON","stringify","_isValueAsPrevious","triggerValue","isValueAsPrevious","tryValidateControl","setPreviousTriggerValue","triggerControlInvalid","parent","getParentControl","triggerChildControlEvent","_getOption","getInputType","inputView","valueType","isNumber","isDate","_valueIsNumber","inputType","setInputAttributes","attributes","restrictionKeys","restrictions","key2","ifNull","isChar","ctrlKey","eventContext","prevent","stop","isEnteredCharValid","keyCode","stopPropagation","preventDefault","triggerControlDone","originalEvent","clipboardData","getData","isValueValid","input","select","newvalue","setControlValue","target","toString","handleInputEvent","setInputEvents","passedEvents","eventsArray","eventHandlers","keys","reduce","Memo","toNumber","parseFloat","isNaN","undefined","trueValues","falseValues","returnValue","isBoolean","valueOrAlternative","nullable","nullValue","alts","alt","convertToBoolean","other","defaultOptions","strict","returnNullAs","returnEmptyAs","returnNullAndEmptyAs","returnAnyAs","returnOtherAs","toLowerCase","isTrue","isFalse","convertString","toBoolean","ControlMixin","buildRestrictions","attrs","pickNumbers","pickStrings","pickBools","convert","prepareValueBeforeSet","silent","triggerControlChange","len","getMaxLength","substring","num","min","max","getValueType","maxlength","char","parseInt","required","strValue","pattern","RegExp","test","getModel","compareAB","a","b","func","every","getView","comparator","single","traverse","fields","root","babelHelpers.typeof","props","getOwnPropertyNames","x","Date","Array","flattenObject","res","createMixinFromObject","clone","constructor","providedCtor","normalizeArguments","wrap","wrapObjectWithConstructor","merge","mergeObjects","mixins","unshift","withMethod","class","Ctor","mix","_ctor","setProperty","set","ensureSetByPathArguments","setByPathArr","argumentsErrors","ensureArguments","modelContext","models","normalizeSetByPathOptions","ext","triggerModelEventsOnSetByPath","rest","pathChunks","property","setByPath","normalizeOptions","setByPathArray","unFlat","e"],"mappings":"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"}