{"version":3,"file":"index.js","sources":["mn/object.js","utils/is-known-ctor/ctors.js","utils/is-known-ctor/index.js","utils/get-property/index.js","mixins/common/get-option/index.js","mixins/model/smart-get/get-nested-result.js","mixins/model/smart-get/get-property-schema.js","mixins/model/smart-get/get-display-config.js","bb/is-model.js","utils/get-by-path/get-property.js","utils/get-by-path/get-by-path-array.js","utils/get-by-path/index.js","mixins/model/smart-get/index.js","mixins/view/css-class-modifiers/index.js","mixins/controls/control/trigger-control-event.js","mixins/controls/control/get-trigger-value.js","utils/get-option/index.js","utils/camel-case/index.js","mixins/controls/control/index.js","mixins/controls/input/_get-option.js","mixins/controls/input/get-input-type.js","mixins/controls/input/set-attributes.js","mixins/controls/input/events/_get-option.js","mixins/controls/input/events/_is-char.js","mixins/controls/input/events/keydown.js","mixins/controls/input/events/keyup.js","mixins/controls/input/events/paste.js","mixins/controls/input/events/blur.js","mixins/controls/input/events/focus.js","mixins/controls/input/events/input.js","mixins/controls/input/events/index.js","mixins/controls/input/handle-event.js","mixins/controls/input/set-events.js","mixins/controls/input/index.js","bb/is-view.js","utils/compare-ab/get-model.js","utils/compare-ab/get-view.js","utils/compare-ab/index.js","utils/comparator/index.js","utils/extend/index.js","utils/flat/traverse.js","utils/flat/index.js","utils/mix/options.js","utils/mix/create-mixin-from-object.js","utils/mix/normalize-arguments.js","utils/mix/with.js","utils/mix/index.js","utils/set-by-path/set-property.js","utils/set-by-path/ensure-arguments.js","utils/set-by-path/set-by-path-array.js","utils/set-by-path/normalize-options.js","utils/set-by-path/trigger-model-change-events.js","utils/set-by-path/index.js","utils/unflat/index.js"],"sourcesContent":["import Mn from 'backbone.marionette';\r\nconst MnObject = Mn.Object || Mn.MnObject;\r\nexport default MnObject;\r\n","import Model from '../../bb/model';\r\nimport Collection from '../../bb/collection';\r\nimport View from '../../bb/view';\r\nimport Router from '../../bb/router';\r\nimport MnObject from '../../mn/object';\r\nexport default [\r\n\tModel,\r\n\tCollection,\r\n\tView,\r\n\tRouter,\r\n\tMnObject\r\n];","import knownCtors from './ctors';\r\n\r\nfunction isKnownCtor(arg) {\r\n\tlet isFn = _.isFunction(arg);\r\n\tlet result = _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\r\n\treturn isFn && result;\r\n}\r\n\r\nexport default isKnownCtor;\r\n","import isKnownCtor from '../is-known-ctor';\r\n\r\nexport default function getProperty(valueContext, key, options = {}, fallback){\r\n\r\n\tlet context = options.context || valueContext;\r\n\toptions.deep !== undefined || (options.deep = true);\r\n\toptions.force !== undefined || (options.force = true);\r\n\toptions.args || (options.args = []);\r\n\r\n\t//key and valueContext should be passed\r\n\tif(key == null) return;\r\n\t\r\n\t//getting raw value\r\n\tlet value = valueContext && valueContext[key];\r\n\r\n\t//if there is no raw value and deep option is true then getting value from fallback\r\n\tif(value === undefined && options.deep && _.isFunction(fallback)){\r\n\t\tlet fallbackOptions = _.extend({}, options, {deep:false, force: false});\r\n\t\tvalue = fallback.call(context, key, fallbackOptions); \r\n\t}\r\n\r\n\t//if returned value is function and is not any of known constructors and options property force set to true \r\n\t//we should return value of that function\r\n\t//options.args will be passed as arguments\r\n\tif(_.isFunction(value) && options.force && !isKnownCtor(value))\r\n\t\tvalue = value.apply(context, options.args || []);\r\n\r\n\t//console.log('key', key, value);\r\n\t\r\n\t//if value is still undefined we will return default option value\r\n\treturn value === undefined ? options.default : value;\r\n}\r\n\r\n","import getProperty from '../../../utils/get-property';\r\n\r\nexport default (Base) => Base.extend({\r\n\t//property first approach\r\n\tgetProperty(key, options = {}){\r\n\t\treturn getProperty(this, key, options, this.getOption);\r\n\t},\r\n\t//options first approach\r\n\tgetOption(key, options = {}){\r\n\t\toptions.context = this;\r\n\t\treturn getProperty(this.getProperty('options',{deep:false}), key, options, this.getProperty);\r\n\t},\r\n});\r\n","export default function getNestedResult(value, context, schema) {\r\n\treturn value != null \r\n\t\t&& _.isFunction(schema.nested) \r\n\t\t&& schema.nested(value, context);\r\n}","export default function getPropertySchema(model, key)\r\n{\r\n\tif (_.isFunction(model.getPropertySchema)) {\r\n\t\treturn model.getPropertySchema(key);\r\n\t} else {\r\n\t\treturn {};\r\n\t}\r\n}","export default function getDisplayConfig(key, model, schema){\r\n\tif (key == null) return {};\r\n\treturn (_.isFunction(model.getPropertyDisplayConfig) && model.getPropertyDisplayConfig(key))\r\n\t\t|| schema.display || {}\r\n}","import Model from './model';\r\nexport default function isModel(arg){\r\n\treturn arg instanceof Model;\r\n}","import isModel from '../../bb/is-model';\r\nfunction getProperty(context, name)\r\n{\r\n\tif(context == null || !_.isObject(context) || name == null || name == '') return;\r\n\tif (isModel(context))\r\n\t\treturn context.get(name, { gettingByPath: true  });\r\n\telse\r\n\t\treturn context[name];\r\n}\r\nexport default getProperty;\t\r\n","\r\nimport getProperty from './get-property';\r\n\r\nfunction getByPathArray(context, propertyName, pathArray) {\r\n\t\r\n\tif (context == null || !_.isObject(context) || propertyName == null || propertyName == '')\r\n\t\treturn;\r\n\r\n\tvar prop = getProperty(context, propertyName);\r\n\r\n\tif (!pathArray.length || (pathArray.length && prop == null))\r\n\t\treturn prop;\r\n\r\n\tvar nextName = pathArray.shift();\r\n\r\n\treturn getByPathArray(prop, nextName, pathArray);\r\n\r\n}\r\n\r\nexport default getByPathArray;\r\n","import getByPathArray from './get-by-path-array';\r\n\r\nexport default function getByPath(obj, path) {\r\n\r\n\tif (obj == null || !_.isObject(obj) || path == null || path == '') return;\r\n\r\n\tvar pathArray = _.isString(path) ? path.split('.')\r\n\t\t: _.isArray(path) ? [].slice.call(path)\r\n\t\t\t: [path];\r\n\r\n\tvar prop = pathArray.shift();\r\n\r\n\treturn getByPathArray(obj, prop, pathArray);\r\n\r\n}\r\n","import Model from '../../../bb/model';\r\nimport getNestedResult from './get-nested-result';\r\nimport getPropertySchema from './get-property-schema';\r\nimport getDisplayConfig from './get-display-config';\r\nimport getByPath from '../../../utils/get-by-path';\r\nexport default Base => {\r\n\tconst originalGet = Model.prototype.get;\r\n\tconst Mixed = Base.extend({\r\n\t\tgetByPath(key){\r\n\t\t\tif(key.indexOf('.') > -1)\r\n\t\t\t\treturn getByPath(this, key);\r\n\t\t\telse\r\n\t\t\t\treturn originalGet.call(this, key);\r\n\t\t},\r\n\t\tget(key, opts = {}){\r\n\t\t\tif(key == null) return;\t\r\n\t\t\t\r\n\t\t\tlet value = 'value' in opts \r\n\t\t\t\t? opts.value\r\n\t\t\t\t: this.getByPath.call(this, key);\r\n\r\n\t\t\tif (!_.size(opts)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet result = opts.nested && getNestedResult(value, this, prop);\r\n\t\t\tif (result != null) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(opts.transform) && !opts.raw) {\r\n\t\t\t\tvalue = opts.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(prop.transform) && !opts.raw){\r\n\t\t\t\tvalue = prop.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(opts.display === true){\r\n\r\n\t\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\r\n\t\t\t\tif(opts.alternative){\r\n\t\t\t\t\tvalue = _.isFunction(display.alternative) && display.alternative.call(this, value, _.extend({},opts,prop), this);\r\n\t\t\t\t}\r\n\t\t\t\telse if(_.isFunction(display.transform)) {\r\n\t\t\t\t\tvalue = display.transform.call(this, value, opts, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(display.ifEmpty && (value == null || value === ''))\r\n\t\t\t\t\treturn display.ifEmpty;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tdisplay(key, opts = {}){\r\n\t\t\t_.extend(opts, { display:true });\r\n\t\t\treturn this.get(key, opts);\r\n\t\t},\r\n\t});\r\n\r\n\treturn Mixed;\r\n};","\r\nconst defaultCssConfig = {\r\n\tbeforeRender: true,\r\n\tmodelChange: true,\r\n\trefresh: true,\r\n};\r\n\r\nexport default (Base) => Base.extend({\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._setupCssClassModifiers();\t\t\r\n\t},\r\n\r\n\trefreshCssClass(){\r\n\t\tlet className = this._getCssClassString();\r\n\t\tif(className == ''){\r\n\t\t\tthis.$el.removeAttr('class');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$el.attr({\r\n\t\t\t\tclass: className\r\n\t\t\t});\r\n\t\t}\r\n\t},\t\r\n\r\n\t_getCssClassModifiers(){\r\n\t\tlet optsModifiers = this.getOption('cssClassModifiers',{deep:false, args:[this.model, this]});\r\n\t\tlet propsModifiers = this.getProperty('cssClassModifiers',{deep:false, args:[this.model, this]});\r\n\t\tlet modifiers = [this.getOption('className')].concat(optsModifiers || [], propsModifiers || []);\r\n\t\treturn modifiers;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassModifiers(){\r\n\t\treturn this._getCssClassModifiers();\r\n\t},\r\n\t_getCssClassString()\r\n\t{\r\n\t\tlet modifiers = this.getCssClassModifiers();\r\n\t\tlet classes = _(modifiers).map((cls) => {\r\n\t\t\treturn _.isString(cls) \r\n\t\t\t\t? cls \r\n\t\t\t\t: _.isFunction(cls) \r\n\t\t\t\t\t? cls.call(this, this.model, this) \r\n\t\t\t\t\t: null;\r\n\t\t});\r\n\t\tlet ready = _(classes).filter((f) => f != null && f != '');\r\n\t\tlet className = _.uniq(ready).join(' ');\r\n\t\treturn (className || '').trim();\r\n\t},\r\n\r\n\t_setupCssClassModifiers(){\r\n\r\n\t\tif(this._cssClassModifiersInitialized) return;\r\n\r\n\t\tlet cfg = this.getCssClassConfig();\r\n\t\tif(!cfg) return;\r\n\r\n\t\tlet events = this.getCssClassEvents(cfg);\r\n\t\t_(events).each((eventName) => this.on(eventName, this.refreshCssClass));\r\n\r\n\t\tif (cfg.modelChange && this.model) {\r\n\t\t\tthis.listenTo(this.model, 'change', this.refreshCssClass);\r\n\t\t}\r\n\r\n\t\tthis._cssClassModifiersInitialized = true;\r\n\t},\r\n\t\r\n\t_getCssClassConfig(){\r\n\t\tlet cfg = _.extend({}, defaultCssConfig, this.getOption('cssClassConfig'));\r\n\t\tif(!cfg || _.size(cfg) == 0) return;\r\n\t\treturn cfg;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassConfig(){\r\n\t\treturn this._getCssClassConfig();\r\n\t},\r\n\r\n\t_getCssClassEvents(cfg){\r\n\t\tlet events = [].concat(cfg.events || []);\r\n\t\tif(cfg.refresh) events.push('refresh');\r\n\t\tif(cfg.beforeRender) events.push('before:render');\r\n\t\tevents = _(events).uniq();\r\n\t\treturn events;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassEvents(cfg){\r\n\t\treturn this._getCssClassEvents(cfg);\r\n\t}\r\n});\r\n","export default function triggerControlEvent(control, event, ...args){\r\n\r\n\t//let control = _control.getParentControl() || _control;\r\n\r\n\tlet name = control.getControlName();\r\n\tlet eventName = name + ':' + event;\r\n\tlet method = _.isFunction(control.triggerMethod) ? control.triggerMethod\r\n\t\t: _.isFunction(control.trigger) ? control.trigger\r\n\t\t\t: function(){};\r\n\tmethod.call(control, eventName, ...args);\r\n\t\r\n\r\n\tcontrol.proxyControlEventToParent(eventName, ...args);\r\n\r\n}\r\n","export default function getTriggerValue(control, args = []){\r\n\tif (args.length) {\r\n\t\treturn args[0];\r\n\t} else {\r\n\t\treturn control.getControlValue();\r\n\t}\r\n}\r\n","import getProperty from '../get-property';\r\nexport default function getOption(context, key, opts = {}) {\r\n\tif (_.isFunction(context.getOption)) {\r\n\t\treturn context.getOption(key, opts);\r\n\t} else {\r\n\t\topts.context = context;\r\n\t\tlet fallback = _.isFunction(context.getProperty)\r\n\t\t\t? context.getProperty\r\n\t\t\t: key => context[key];\r\n\t\treturn getProperty(context.options, key, opts, fallback);\r\n\t}\r\n}\r\n","// camelCase('asd:qwe:zxc') -> asdQweZxc\r\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\r\nexport default function camelCase(text, first) {\r\n\tif (!_.isString(text)) return text;\r\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\r\n\treturn text.replace(splitter, (match, prefix, text) => text.toUpperCase());\r\n}","import triggerControlEvent from './trigger-control-event';\r\nimport getTriggerValue from './get-trigger-value';\r\nimport getOption from '../../../utils/get-option';\r\nimport camelCase from '../../../utils/camel-case';\r\n\r\nexport default Base => Base.extend({\t\r\n\r\n\tgetControlValue(){\r\n\t\treturn this.value;\r\n\t},\r\n\tsetControlValue(value){\r\n\t\tthis.value = value;\r\n\t},\r\n\r\n\tgetControlName(){\r\n\t\treturn getOption(this, 'controlName', { args:[this]}) || 'control';\r\n\t},\r\n\r\n\tgetParentControl(){\r\n\t\treturn getOption(this, 'proxyTo', { args:[this]});\r\n\t},\r\n\ttriggerChildControlEvent(eventName, ...args){\r\n\t\tlet events = getOption(this, 'childControlEvents', { args:[this]}) || {};\r\n\t\tif (_.isFunction(events[eventName])) {\r\n\t\t\tevents[eventName].apply(this, args);\r\n\t\t}\r\n\t},\r\n\r\n\ttryValidateControl(value){\r\n\t\tlet validate = getOption(this, 'validateControlValue', { force: false });\r\n\t\tif(_.isFunction(validate))\r\n\t\t\treturn validate.call(this, value, this);\r\n\t},\r\n\r\n\ttriggerControlChange(){\r\n\t\tthis._triggerControlEvent('change', arguments);\r\n\t},\r\n\ttriggerControlDone(){\r\n\t\tthis._triggerControlEvent('done', arguments);\r\n\t},\r\n\t_triggerControlEvent(eventName, args) {\r\n\r\n\t\tlet triggerValue = getTriggerValue(this, args);\r\n\t\tlet previousTriggerName = camelCase('_previous:' + eventName);\r\n\t\tif (previousTriggerName in this && this[previousTriggerName] === triggerValue) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet errors = this.tryValidateControl(triggerValue);\r\n\t\tif (!errors) {\r\n\t\t\tthis[previousTriggerName] = triggerValue;\r\n\t\t\ttriggerControlEvent(this, eventName, triggerValue);\r\n\t\t} else {\r\n\t\t\tthis.triggerControlInvalid(errors);\r\n\t\t}\r\n\t},\r\n\ttriggerControlInvalid(errors){\r\n\t\ttriggerControlEvent(this, 'invalid', errors);\r\n\t},\r\n\tproxyControlEventToParent(eventName, ...args){\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (parent && _.isFunction(parent.triggerChildControlEvent)) {\r\n\t\t\tparent.triggerChildControlEvent(eventName, ...args);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\r\n}, {\r\n\tControlMixin: true\r\n});\r\n","export default function getNotInitializedOption(key, opts = {}){\r\n\tlet value = opts[key] || this[key];\r\n\tif (_.isFunction(value)) {\r\n\t\tlet model = opts.model || this.model;\r\n\t\tvalue = value.call(this, model, this);\r\n\t}\r\n\treturn value;\r\n}","import notInitializedOption from './_get-option';\r\n\r\nexport default function getInputType(inputView, opts = {}){\r\n\t\r\n\tlet valueType = notInitializedOption.call(inputView, 'valueType', opts);\r\n\tif (valueType == null) {\r\n\t\tlet value = inputView.getControlValue();\r\n\t\tif ( value == null) {\r\n\t\t\tvalueType = 'string';\r\n\t\t} else {\r\n\t\t\tif(_.isNumber(value))\r\n\t\t\t\tvalueType = 'number';\r\n\t\t\telse if(_.isDate(value))\r\n\t\t\t\tvalueType = 'datetime';\r\n\t\t\telse\r\n\t\t\t\tvalueType = 'string';\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tif (valueType == 'number') {\r\n\t\tinputView._valueIsNumber = true;\r\n\t}\r\n\r\n\tlet type = notInitializedOption.call(inputView, 'inputType', opts);\r\n\r\n\tif (!type) {\r\n\t\tif (inputView._valueIsNumber) {\r\n\t\t\ttype = notInitializedOption.call(inputView, 'inputNumberType', opts) || 'number';\r\n\t\t} else if (valueType == 'string') {\r\n\t\t\ttype = 'text';\r\n\t\t} else if (valueType == 'datetime') {\r\n\t\t\ttype = 'datetime';\r\n\t\t} else {\r\n\t\t\ttype = 'text';\r\n\t\t}\r\n\t}\r\n\tinputView.inputType = type;\r\n\tinputView.valueType = valueType;\r\n\treturn type;\r\n}\r\n","import getInputType from './get-input-type';\r\nimport notInitializedOption from './_get-option';\r\nexport default function setInputAttributes(inputView, opts = {}) {\r\n\r\n\tlet attributes = notInitializedOption.call(inputView, 'attributes', opts);\r\n\t\r\n\tlet buildedAttributes = {\r\n\t\tvalue: inputView.value,\r\n\t\ttype: getInputType(inputView, opts),\r\n\t};\r\n\tinputView.attributes = () => _.extend(buildedAttributes, attributes);\r\n}\r\n","export default function getInputOption(context, key, ifNull){\r\n\tlet value = context.getOption(key, {args:[context.model, context]});\r\n\tif (value == null) {\r\n\t\tvalue = ifNull;\r\n\t}\r\n\treturn value;\r\n}","export default function isChar(event){\r\n\treturn event.key && event.key.length == 1 && !event.ctrlKey;\r\n}","import getOption from './_get-option';\r\nimport isChar from './_is-char';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\tlet prevent = false;\r\n\tlet stop = false;\r\n\r\n\tif (isChar(event)) {\r\n\t\tif (!context.isCharValid(event.key)) {\r\n\t\t\tprevent = true;\r\n\t\t}\r\n\t}\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tprevent = true;\r\n\t\tstop = true;\r\n\t}\r\n\r\n\tstop && event.stopPropagation();\r\n\tprevent && event.preventDefault();\r\n}","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tcontext.triggerControlDone();\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\t}\r\n}","export default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\tlet text = event.originalEvent.clipboardData.getData('text/plain');\r\n\tif (!text) return;\r\n\tlet type = context.getValueType();\r\n\tif (type == 'number' && isNaN(parseFloat(text, 10))) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t}\r\n}","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context } = eventContext;\r\n\tif (getOption(context, 'doneOnBlur', true)) {\r\n\t\tcontext.triggerControlDone();\r\n\t}\r\n}","import getOption from './_get-option';\r\nexport default function(eventContext) {\r\n\tlet { context } = eventContext;\r\n\tif (getOption(context, 'selectOnFocus', true)) {\r\n\t\tcontext.el.select();\r\n\t}\r\n}","export default function(eventContext) {\r\n\r\n\tlet { context, input, event } = eventContext;\r\n\r\n\tlet newvalue = context.setControlValue(event.target.value);\r\n\tif (event.target.value != newvalue) {\r\n\t\tinput.value = newvalue;\r\n\t}\r\n\tcontext.triggerControlChange();\r\n}","import keydown from './keydown';\r\nimport keyup from './keyup';\r\nimport paste from './paste';\r\nimport blur from './blur';\r\nimport focus from './focus';\r\nimport input from './input';\r\n//import jsChange from './js-change';\r\nexport default {\r\n\tkeydown, \r\n\t//keypress,\r\n\tkeyup,\r\n\tpaste,\r\n\tblur,\r\n\tfocus,\r\n\tinput,\r\n\t//'js:change': jsChange\r\n};","import camelCase from '../../../utils/camel-case';\r\nimport events from './events';\r\nexport default function handleInputEvent(control, eventName, event) {\r\n\tlet options = _.extend({\r\n\t\tcontext: control,\r\n\t\tinput: control.el,\r\n\t\trestrictions: control.restrictions,\r\n\t\teventName,\r\n\t\tevent\r\n\t});\r\n\r\n\r\n\tlet method = camelCase(`on:dom:${eventName}`);\r\n\r\n\tif (_.isFunction(events[eventName])) {\r\n\t\tevents[eventName].call(control, options);\r\n\t} \r\n\t\r\n\tif (_.isFunction(control[method])) {\r\n\t\tcontrol[method](event, options);\r\n\t} \r\n}","import handleEvent from './handle-event';\r\nimport eventHandlers from './events';\r\nimport notInitializedOption from './_get-option';\r\nexport default function setInputEvents(inputView, opts = {}) {\r\n\r\n\tlet passedEvents = notInitializedOption.call(inputView, 'events', opts);\t\r\n\r\n\tlet eventsArray = _(eventHandlers).keys();\t\r\n\tlet events = _.reduce(eventsArray, (Memo, eventName) => {\r\n\t\tMemo[eventName] = function(event){ \r\n\t\t\thandleEvent(this, eventName, event); \r\n\t\t};\r\n\t\treturn Memo;\r\n\t}, {});\r\n\tinputView.events = _.extend(events, passedEvents);\r\n}\r\n","import ControlMixin from '../control';\r\nimport setInputAttributes from './set-attributes';\r\nimport setInputEvents from './set-events';\r\nimport getOption from '../../../utils/get-option';\r\n\r\nexport default Base => {\r\n\r\n\tlet Mixin = Base.ControlMixin ? Base : ControlMixin(Base);\r\n\r\n\treturn Mixin.extend({\r\n\t\tconstructor(opts){\r\n\t\t\tsetInputAttributes(this, opts);\r\n\t\t\tsetInputEvents(this, opts);\r\n\t\t\tMixin.apply(this, arguments);\r\n\t\t\tif (!_.isFunction(this.getOption)) {\r\n\t\t\t\tthis.getOption = _.partial(getOption, this, _, { args: [this.model, this]});\r\n\t\t\t}\r\n\t\t\tlet value = this.getOption('value');\r\n\t\t\t\r\n\t\t\tthis.el.value = value;\r\n\t\t\tthis.setControlValue(value);\r\n\t\t},\r\n\t\ttagName:'input',\r\n\t\ttemplate: false,\r\n\t\tsetControlValue(value)\r\n\t\t{\r\n\t\t\tlet newvalue = value;\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\tif (len > 0) {\r\n\t\t\t\tnewvalue = (value || '').substring(0, len);\r\n\t\t\t}\r\n\t\t\tthis.value = newvalue;\r\n\t\t\treturn newvalue;\r\n\t\t},\r\n\t\tgetValueType(){\r\n\t\t\treturn this.valueType;\r\n\t\t},\r\n\r\n\t\t\r\n\t\tgetMaxLength()\r\n\t\t{\r\n\t\t\tlet len = parseInt(this.getOption('maxLength'),10);\r\n\t\t\treturn !isNaN(len) && len;\r\n\t\t},\r\n\t\tisLengthValid(){\r\n\t\t\tlet value = this.getControlValue();\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\treturn len == null || value.length < len;\r\n\t\t},\r\n\t\tisCharValid(char) {\r\n\t\t\tlet type = this.getValueType();\r\n\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn char == '.' || !isNaN(parseInt(char, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import View from './view';\r\nexport default function isView(arg){\r\n\treturn arg instanceof View;\r\n}","import isModel from '../../bb/is-model';\r\nimport isView from '../../bb/is-view';\r\nexport default function getModel(arg){\r\n\treturn isModel(arg) ? arg\r\n\t\t: isView(arg) ? arg.model\r\n\t\t\t: undefined;\r\n}","import isView from '../../bb/is-view';\r\nexport default function getModel(arg){\r\n\treturn isView(arg) && arg;\r\n}","\r\nimport getModel from './get-model';\r\nimport getView from './get-view';\r\nexport default function compareAB(a, b, func){\r\n\tif (_.isFunction(func)) {\r\n\r\n\t\ta = func.call(a, getModel(a), getView(a));\r\n\t\tb = func.call(b, getModel(b), getView(b));\r\n\r\n\t\treturn a < b ? -1\r\n\t\t\t: a > b ? 1\r\n\t\t\t\t: 0;\r\n\r\n\t} else if(_.isArray(func)) {\r\n\r\n\t\tlet result = 0;\r\n\r\n\t\t_(func).every((f) => {\r\n\t\t\tif(!_.isFunction(f)) return true;\r\n\t\t\tresult = compareAB(a,b,f);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\t\t\r\n\t\treturn result;\r\n\t}\r\n}","import compareAB from '../compare-ab';\r\nexport default function comparator(...args){\r\n\tvar result = 0;\r\n\r\n\t//for simple case (arg1, arg2, compare)\r\n\tif (args.length === 3 && !_.isArray(args[0])){\r\n\r\n\t\treturn compareAB.apply(null, args);\r\n\r\n\t} \r\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\r\n\t//each arguments should be an array\r\n\telse {\r\n\r\n\t\t_(args).every((single) => {\r\n\r\n\t\t\tif(!_.isArray(single)) return true;\r\n\t\t\tresult = compareAB(...single);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn result;\r\n}","//import Mn from 'backbone.marionette';\r\nexport default Mn.extend;\r\n","import isModel from '../../bb/is-model';\r\nexport default function traverse(fields, root)\r\n{\r\n\troot = root || '';\r\n\tif (this == null || typeof this != 'object') {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar hash = isModel(this) ? this.attributes : this;\r\n\r\n\tvar props = Object.getOwnPropertyNames(hash);\r\n\r\n\tfor (var x = 0; x < props.length; x++) {\r\n\t\tvar name = props[x];\r\n\t\tvar prop = this[name];\r\n\r\n\t\tif (prop == null || typeof prop != 'object' || (prop instanceof Date || prop instanceof Array)) {\r\n\r\n\t\t\tfields[root + name] = prop;\r\n\t\t}\r\n\t\telse if (typeof prop == 'object') {\r\n\r\n\t\t\ttraverse.call(prop, fields, root + name + '.');\r\n\t\t}\r\n\t}\r\n\t\t\r\n}","import traverse from './traverse';\r\n\r\nexport default function flattenObject(obj) {\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\ttraverse.call(obj, res);\r\n\treturn res;\r\n}","export default {\r\n\tmergeObjects: true,\r\n\twrapObjectWithConstructor: true,\r\n};\r\n","export default function createMixinFromObject(arg) {\r\n\tlet obj = _.clone(arg);\r\n\treturn Base => { \r\n\t\tif (_.isFunction(obj.constructor)) {\r\n\t\t\tlet providedCtor = obj.constructor;\r\n\t\t\tobj.constructor = function(){\r\n\t\t\t\tBase.apply(this, arguments);\r\n\t\t\t\tprovidedCtor.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn Base.extend(obj);\r\n\t};\r\n}\r\n","\r\nimport createMixinFromObject from './create-mixin-from-object';\r\n\r\nexport default function normalizeArguments(args, opts = {}) {\r\n\tlet raw = {};\r\n\tlet wrap = opts.wrapObjectWithConstructor == true;\r\n\tlet merge = opts.mergeObjects == true;\r\n\tlet mixins = [];\r\n\t_(args).each(arg => {\r\n\t\t\r\n\t\t//if argument is function just put it to mixins array\r\n\t\t//and continue;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tmixins.push(arg);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if argument is not an object just skip it\r\n\t\tif (!_.isObject(arg)) return;\r\n\r\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \r\n\t\t//and there is a constructor function\r\n\t\t//converting to a mixin function\r\n\t\t//otherwise extend rawObject\r\n\t\tif (!merge || (wrap && _.isFunction(arg.constructor))) {\r\n\t\t\tmixins.push(createMixinFromObject(arg));\r\n\t\t} \r\n\t\telse {\r\n\t\t\t_.extend(raw, arg);\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n\t//if rawObject is not empty\r\n\t//convert it to a mixin function\r\n\t//and put it to the begin of mixins array\r\n\tif (_.size(raw))\r\n\t\tmixins.unshift(createMixinFromObject(raw));\r\n\r\n\treturn mixins;\r\n}\r\n","\r\n\r\nimport normalizeArguments from './normalize-arguments';\r\n\r\nexport default function withMethod(...args) {\r\n\r\n\tlet mixins = normalizeArguments(args, this.options);\r\n\tlet Mixed = this.class;\r\n\tif (!mixins.length) return Mixed;\r\n\telse\r\n\t\treturn _.reduce(mixins, (Memo, Ctor) => Ctor(Memo), Mixed);\r\n\r\n}\r\n","import defaultOptions from './options';\r\nimport withMethod from './with';\r\n\r\nimport extend from '../extend';\r\n\r\n\r\n\r\nexport default function mix(_ctor, options) {\r\n\r\n\tlet opts = _.extend({}, defaultOptions, options);\r\n\r\n\tlet ctor;\r\n\tif (_.isFunction(_ctor)) {\r\n\t\tctor = _ctor;\r\n\t}\r\n\telse if (_.isObject(_ctor)) {\r\n\t\tctor = function () { };\r\n\t\t_.extend(ctor.prototype, _ctor);\r\n\t} else {\r\n\t\tthrow new Error('Mix argument should be a class or a plain object');\r\n\t}\r\n\r\n\tif (!_.isFunction(ctor.extend))\r\n\t\tctor.extend = extend;\r\n\r\n\treturn {\r\n\t\toptions: opts,\r\n\t\twith: withMethod,\r\n\t\tclass: ctor,\r\n\t};\r\n}\r\n","import getProperty from '../get-by-path/get-property';\r\nimport isModel from '../../bb/is-model';\r\nfunction setProperty(context, name, value) {\r\n\tif (isModel(context)) {\r\n\t\tcontext.set(name, value, { silent: true });\r\n\t}\r\n\telse {\r\n\t\tcontext[name] = value;\r\n\t}\r\n\r\n\t// if(isModel(value)){\r\n\t// \toptions.models.push({\r\n\t// \t\tpath: options.passPath.join(':'),\r\n\t// \t\tproperty: name,\r\n\t// \t\tmodel: value\r\n\t// \t});\t\t\r\n\t// }\r\n\t// options.passPath.push(name);\r\n\r\n\treturn getProperty(context, name);\r\n}\r\n\r\nexport default setProperty;\r\n","export default function ensureSetByPathArguments(context, path)\r\n{\r\n\tlet errors = [];\r\n\tif (context == null || !_.isObject(context)) {\r\n\t\terrors.push(new Error('Context is not an object'));\r\n\t}\r\n\tif (!_.isString(path) || path === '') {\r\n\t\terrors.push(new Error('Path is not a string'));\r\n\t}\r\n\tif (errors.length) {\r\n\t\treturn errors;\r\n\t}\r\n}\r\n","import getProperty from '../get-by-path/get-property';\r\nimport setProperty from './set-property';\r\nimport ensureArguments from './ensure-arguments';\r\nimport isModel from '../../bb/is-model';\r\nexport default function setByPathArr(context, propertyName, pathArray, value, options) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, propertyName);\r\n\tif (argumentsErrors) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet modelContext;\r\n\tif (isModel(context)) {\r\n\t\tmodelContext = {\r\n\t\t\tmodel: context,\r\n\t\t\tproperty: propertyName,\r\n\t\t\tpathChunks: [].slice.call(pathArray)\r\n\t\t};\r\n\t}\r\n\r\n\t//set value if this is a last chunk of path\r\n\tif (!pathArray.length) {\r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\treturn setProperty(context, propertyName, value, options);\r\n\r\n\t} else {\r\n\r\n\t\tvar prop = getProperty(context, propertyName);\r\n\r\n\t\tif (!_.isObject(prop) && !options.force) {\r\n\t\t\treturn;\r\n\t\t} else if (!_.isObject(prop) && options.force) {\r\n\t\t\tprop = setProperty(context, propertyName, {}, options);\r\n\t\t} \r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\tvar nextName = pathArray.shift();\t\r\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\r\n\r\n\t}\r\n}\r\n","export default function normalizeSetByPathOptions(opts = {}, ext)\r\n{\r\n\r\n\tlet options = _.extend({}, opts, ext, {\r\n\t\tsilent: opts.silent === true,\r\n\t\tforce: opts.force !== false,\r\n\t\t//passPath: [],\r\n\t\tmodels: []\r\n\t});\r\n\r\n\treturn options;\r\n}\r\n","export default function triggerModelEventsOnSetByPath(value, options = {})\r\n{\r\n\tif (options.silent || !options.models.length) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t_(options.models).each(context => {\r\n\t\tlet rest = context.pathChunks.join(':');\r\n\t\tif (rest) {\r\n\t\t\tcontext.model.trigger(`change:${context.property}:${rest}`, context.model, value);\r\n\t\t}\r\n\t\tcontext.model.trigger(`change:${context.property}`, context.model, value);\r\n\t\tcontext.model.trigger('change', context.model);\r\n\t});\r\n\r\n\t// //triggering change event on all met models\r\n\t// let originPath = options.pathArray.join(':');\r\n\t// while (options.models.length) {\r\n\t// \tlet modelContext = options.models.pop();\r\n\t// \tlet propertyEventName = modelContext.path == ''\r\n\t// \t\t? originPath\r\n\t// \t\t: originPath.substring(modelContext.path.length + 1);\r\n\r\n\t// \tif (propertyEventName) {\r\n\t// \t\tmodelContext.model.trigger('change:' + propertyEventName, value);\r\n\t// \t}\r\n\t// \tmodelContext.model.trigger('change', modelContext.model);\r\n\t// }\r\n}\r\n","import setByPathArray from './set-by-path-array';\r\nimport normalizeOptions from './normalize-options';\r\nimport triggerModelChangeEvents from './trigger-model-change-events';\r\nimport ensureArguments from './ensure-arguments';\r\nexport default function setByPath(context, path, value, opts = {}) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, path);\r\n\tif (argumentsErrors) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tlet pathArray = path.split('.');\t\r\n\tlet options = normalizeOptions(opts, { path, pathArray: [].slice.call(pathArray) });\r\n\r\n\tlet propertyName = pathArray.shift();\r\n\r\n\tlet result = setByPathArray(context, propertyName, pathArray, value, options);\r\n\r\n\tif (result === undefined && value !== undefined) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\ttriggerModelChangeEvents(value, options);\r\n\r\n\treturn value;\r\n\r\n\t// if (_.isObject(path) && !_.isArray(path)) {\r\n\t// \tvalue = path.value;\r\n\t// \toptions.force = path.force !== false;\r\n\t// \toptions.silent = path.silent === true;\r\n\t// \tpath = path.path;\r\n\t// }\r\n\r\n\t// var prop = pathArray.shift();\r\n\r\n\t// if (isModel(context)) {\r\n\t// \toptions.models.push({\r\n\t// \t\tpath: '',\r\n\t// \t\tproperty: prop,\r\n\t// \t\tmodel: context\r\n\t// \t});\r\n\t// }\r\n\r\n}\r\n\r\n\r\n","import setByPath from '../set-by-path';\r\n\r\nexport default function unFlat(obj) {\r\n\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\tfor (var e in obj) {\r\n\t\tsetByPath(res, e, obj[e], true);\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n"],"names":["MnObject","Mn","Object","Model","Collection","View","Router","isKnownCtor","arg","isFn","_","isFunction","result","knownCtors","some","ctor","prototype","getProperty","valueContext","key","options","fallback","context","deep","undefined","force","args","value","fallbackOptions","extend","call","apply","default","Base","getOption","getNestedResult","schema","nested","getPropertySchema","model","getDisplayConfig","getPropertyDisplayConfig","display","isModel","name","isObject","get","gettingByPath","getByPathArray","propertyName","pathArray","prop","length","nextName","shift","getByPath","obj","path","isString","split","isArray","slice","originalGet","Mixed","indexOf","opts","size","transform","raw","alternative","ifEmpty","defaultCssConfig","arguments","_setupCssClassModifiers","className","_getCssClassString","$el","removeAttr","attr","optsModifiers","propsModifiers","modifiers","concat","_getCssClassModifiers","getCssClassModifiers","classes","map","cls","ready","filter","f","uniq","join","trim","_cssClassModifiersInitialized","cfg","getCssClassConfig","events","getCssClassEvents","each","eventName","on","refreshCssClass","modelChange","listenTo","_getCssClassConfig","refresh","push","beforeRender","_getCssClassEvents","triggerControlEvent","control","event","getControlName","method","triggerMethod","trigger","proxyControlEventToParent","getTriggerValue","getControlValue","camelCase","text","first","splitter","replace","match","prefix","toUpperCase","validate","_triggerControlEvent","triggerValue","previousTriggerName","errors","tryValidateControl","triggerControlInvalid","parent","getParentControl","triggerChildControlEvent","getNotInitializedOption","getInputType","inputView","valueType","notInitializedOption","isNumber","isDate","_valueIsNumber","type","inputType","setInputAttributes","attributes","buildedAttributes","getInputOption","ifNull","isChar","ctrlKey","eventContext","prevent","stop","isCharValid","keyCode","stopPropagation","preventDefault","triggerControlDone","originalEvent","clipboardData","getData","getValueType","isNaN","parseFloat","el","select","input","newvalue","setControlValue","target","triggerControlChange","handleInputEvent","restrictions","setInputEvents","passedEvents","eventsArray","eventHandlers","keys","reduce","Memo","Mixin","ControlMixin","partial","len","getMaxLength","substring","parseInt","char","isView","getModel","compareAB","a","b","func","getView","every","comparator","single","traverse","fields","root","babelHelpers.typeof","hash","props","getOwnPropertyNames","x","Date","Array","flattenObject","res","createMixinFromObject","clone","constructor","providedCtor","normalizeArguments","wrap","wrapObjectWithConstructor","merge","mergeObjects","mixins","unshift","withMethod","class","Ctor","mix","_ctor","defaultOptions","Error","setProperty","set","silent","ensureSetByPathArguments","setByPathArr","argumentsErrors","ensureArguments","modelContext","models","normalizeSetByPathOptions","ext","triggerModelEventsOnSetByPath","rest","pathChunks","property","setByPath","normalizeOptions","setByPathArray","unFlat","e"],"mappings":"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"}