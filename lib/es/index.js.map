{"version":3,"file":"index.js","sources":["vendors/marionette.js","utils/mix/options.js","utils/mix/create-mixin-from-object.js","utils/mix/normalize-arguments.js","utils/mix/with.js","vendors/helpers.js","utils/mix/index.js","components/base-object/index.js","utils/is-known-ctor/ctors.js","utils/is-known-ctor/index.js","utils/better-result/index.js","utils/get-option/index.js","mixins/common/get-option/index.js","utils/camel-case/index.js","utils/trigger-method/index.js","utils/trigger-method-on/index.js","components/process/register.js","components/process/helpers.js","components/process/index.js","mixins/common/startable/index.js","mixins/common/childrenable/index.js","mixins/model/smart-get/get-nested-result.js","mixins/model/smart-get/get-property-schema.js","mixins/model/smart-get/get-display-config.js","utils/get-by-path/get-property.js","utils/get-by-path/get-by-path-array.js","utils/get-by-path/index.js","mixins/model/smart-get/index.js","mixins/collection/is-fetching/index.js","mixins/view/css-class-modifiers/index.js","utils/take-first/index.js","utils/compare-ab/get-model.js","utils/compare-ab/get-view.js","utils/compare-ab/index.js","utils/comparator/index.js","utils/convert-string/to-number.js","utils/to-bool/options.js","utils/to-bool/index.js","utils/convert-string/index.js","utils/flat/traverse.js","utils/flat/index.js","utils/has-flag/index.js","utils/is-empty-value/index.js","utils/get-flag/index.js","utils/params-to-object/index.js","utils/set-by-path/set-property.js","utils/set-by-path/ensure-arguments.js","utils/set-by-path/set-by-path-array.js","utils/set-by-path/normalize-options.js","utils/set-by-path/trigger-model-change-events.js","utils/set-by-path/index.js","utils/unflat/index.js","utils/compare-objects/index.js","utils/merge-objects/index.js","utils/merge-options/index.js","components/actions/action.js","components/actions/store.js","components/actions/actionable.js","components/app-error/index.js","components/bearer-token/index.js","components/render-in-node/index.js","components/view-stack/index.js","mixins/collection-view/empty-fetch/index.js","mixins/collection-view/improved-indexes/index.js","mixins/collection-view/next-collection-view/index.js","mixins/collection-view/customs/index.js","components/text-view/index.js","components/modals/view-mixin.js","components/modals/config.js","components/modals/index.js","components/model-schema/schema.js","components/model-schema/property-schema.js","components/model-schema/model-schema.js","components/model-schema/store.js","components/navigation/router/build-route-context.js","components/navigation/router/action-context.js","components/navigation/router/process-callback.js","components/navigation/route-error-handler/index.js","components/navigation/router/index.js","components/navigation/page/router.js","components/navigation/page/routes-mixin.js","components/navigation/page/index.js","components/navigation/history/index.js","components/navigation/history-watcher/index.js","components/navigation/navigator/index.js","components/store/fake.js","components/store/store.js","components/store/index.js","components/validator/rules.js","components/validator/validate.js","components/validator/index.js","components/view-manager/borrow.js","components/view-manager/collection.js","components/view-manager/common.js","components/view-manager/customs.js","components/view-manager/utils.js","components/view-manager/models.js","components/view-manager/render.js","components/view-manager/empty-view.js","components/view-manager/index.js","utils/build-view-by-key/index.js","utils/enums/index.js","utils/skip-take/index.js","utils/index.js","mixins/view/nested-views/build-region.js","mixins/view/nested-views/normalize-region.js","mixins/view/nested-views/index.js","mixins/view/next-view/index.js","mixins/view/destroy/index.js","mixins/view/build-view-by-key/index.js","mixins/controls/button/index.js","mixins/controls/control/index.js","mixins/controls/control-view/index.js","mixins/controls/input/get-input-type.js","mixins/controls/input/set-attributes.js","mixins/controls/input/events/_get-option.js","mixins/controls/input/events/_is-char.js","mixins/controls/input/events/keydown.js","mixins/controls/input/events/keyup.js","mixins/controls/input/events/paste.js","mixins/controls/input/events/blur.js","mixins/controls/input/events/focus.js","mixins/controls/input/events/input.js","mixins/controls/input/events/index.js","mixins/controls/input/handle-event.js","mixins/controls/input/set-events.js","mixins/controls/input/index.js","mixins/controls/promise-bar/index.js"],"sourcesContent":["import Mn, { Region, View } from 'backbone.marionette';\r\n\r\nconst MnObject = Mn.Object || Mn.MnObject;\r\n\r\n\r\nexport {\r\n\tMnObject, Region, View\r\n};\r\n","export default {\r\n\tmergeObjects: true,\r\n\twrapObjectWithConstructor: true,\r\n};\r\n","export default function createMixinFromObject(arg) {\r\n\tlet mixedObj = _.clone(arg);\r\n\tlet mixedCtor = _.isFunction(mixedObj.constructor) && mixedObj.constructor;\r\n\treturn Base => { \r\n\t\tif (_.isFunction(mixedCtor)) {\r\n\t\t\t//let providedCtor = ((mixed) => mixed)(obj.constructor);\r\n\t\t\tmixedObj.constructor = function mx(){\r\n\t\t\t\tBase.apply(this, arguments);\r\n\t\t\t\tmixedCtor.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn Base.extend(mixedObj);\r\n\t};\r\n}\r\n","\r\nimport createMixinFromObject from './create-mixin-from-object.js';\r\n\r\nexport default function normalizeArguments(args, opts = {}) {\r\n\tlet raw = {};\r\n\tlet wrap = opts.wrapObjectWithConstructor == true;\r\n\tlet merge = opts.mergeObjects == true;\r\n\tlet mixins = [];\r\n\t_(args).each(arg => {\r\n\t\t\r\n\t\t//if argument is function just put it to mixins array\r\n\t\t//and continue;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tmixins.push(arg);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if argument is not an object just skip it\r\n\t\tif (!_.isObject(arg)) return;\r\n\r\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \r\n\t\t//and there is a constructor function\r\n\t\t//converting to a mixin function\r\n\t\t//otherwise extend rawObject\r\n\t\tif (!merge || (wrap && _.isFunction(arg.constructor))) {\r\n\t\t\tmixins.push(createMixinFromObject(arg));\r\n\t\t} \r\n\t\telse {\r\n\t\t\t_.extend(raw, arg);\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n\t//if rawObject is not empty\r\n\t//convert it to a mixin function\r\n\t//and put it to the begin of mixins array\r\n\tif (_.size(raw))\r\n\t\tmixins.unshift(createMixinFromObject(raw));\r\n\r\n\treturn mixins;\r\n}\r\n","\r\n\r\nimport normalizeArguments from './normalize-arguments.js';\r\n\r\nexport default function withMethod(...args) {\r\n\r\n\tlet mixins = normalizeArguments(args, this.options);\r\n\tlet Mixed = this.class;\r\n\tif (!mixins.length) return Mixed;\r\n\telse\r\n\t\treturn _.reduce(mixins, (Memo, Ctor) => { \r\n\t\t\tlet mixed = Ctor(Memo);\r\n\t\t\treturn mixed;\r\n\t\t}, Mixed);\r\n\r\n}\r\n","import { Model, Collection, BackboneView as View } from './backbone.js';\r\n\r\n\r\nexport function isClass(arg, Base){\r\n\treturn _.isFunction(arg) && (arg == Base || arg.prototype instanceof Base);\r\n}\r\n\r\n\r\nexport function isModel(arg){\r\n\treturn arg instanceof Model;\r\n}\r\nexport function isModelClass(arg) {\r\n\treturn isClass(arg, Model);\r\n}\r\n\r\n\r\nexport function isCollection(arg){\r\n\treturn arg instanceof Collection;\r\n}\r\nexport function isCollectionClass(arg) {\r\n\treturn isClass(arg, Collection);\r\n}\r\n\r\n\r\nexport function isView(arg){\r\n\treturn arg instanceof View;\r\n}\r\n\r\n\r\nexport function isViewClass(arg) {\r\n\treturn isClass(arg, View);\r\n}\r\n\r\nexport const extend = Model.extend;\r\n\r\n","import defaultOptions from './options.js';\r\nimport withMethod from './with.js';\r\n\r\nimport extend from '../extend/index.js';\r\n\r\n\r\n\r\nexport default function mix(_ctor, options) {\r\n\r\n\tlet opts = _.extend({}, defaultOptions, options);\r\n\r\n\tlet ctor;\r\n\r\n\tif (_.isFunction(_ctor)) {\r\n\t\tctor = _ctor;\r\n\t}\r\n\telse if (_.isObject(_ctor)) {\r\n\t\tlet b = _.isFunction(_ctor.constructor) && _ctor.constructor;\r\n\t\tctor = function mx() { b.apply(this, arguments); };\r\n\t\t_.extend(ctor.prototype, _.omit(_ctor,'constructor'));\r\n\r\n\t} else {\r\n\t\tthrow new Error('Mix argument should be a class or a plain object');\r\n\t}\r\n\r\n\tif (!_.isFunction(ctor.extend))\r\n\t\tctor.extend = extend;\r\n\r\n\treturn {\r\n\t\toptions: opts,\r\n\t\twith: withMethod,\r\n\t\tclass: ctor,\r\n\t};\r\n}\r\n","import mix from '../../utils/mix/index.js';\r\n\r\nconst BaseModel = mix(function BbmnBase(){}).class;\r\n\r\nexport default BaseModel;\r\n\r\n","import { Model, Collection, BackboneView as View, Router } from '../../vendors/backbone.js';\r\nimport { MnObject } from '../../vendors/marionette.js';\r\nimport Mn from 'backbone.marionette';\r\nimport BaseObject from '../../components/base-object/index.js';\r\nlet ctors = [\r\n\tModel,\r\n\tCollection,\r\n\tView,\r\n\tRouter,\r\n\tMnObject,\r\n\tBaseObject\r\n];\r\n\r\nlet tryGetFromMn = ['Region', 'Application', 'AppRouter'];\r\n\r\n_.each(tryGetFromMn, ClassName => {\r\n\t_.isFunction(Mn[ClassName]) && ctors.push(Mn[ClassName]);\r\n});\r\n\r\n\r\nexport default ctors;\r\n","import knownCtors from './ctors.js';\r\n\r\nfunction isKnownCtor(arg) {\r\n\tlet isFn = _.isFunction(arg);\r\n\tlet result = _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\r\n\treturn isFn && result;\r\n}\r\n\r\nexport default isKnownCtor;\r\n","import isKnownCtor from '../is-known-ctor/index.js';\r\nexport default function betterResult(obj, key, opts = {})\r\n{\r\n\tlet { context, args, checkAlso, force } = opts;\r\n\tlet defaultValue = opts.default;\r\n\r\n\tif(!_.isString(key) || key === '') return;\r\n\t\r\n\tlet value = (obj || {})[key];\r\n\r\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value)))\r\n\t\treturn value;\r\n\t\t\r\n\tlet result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\r\n\r\n\tif (result == null && _.isObject(checkAlso)) {\r\n\t\tlet alsoOptions = _.omit(opts, 'checkAlso');\r\n\t\tresult = betterResult(checkAlso, key, alsoOptions);\r\n\t}\r\n\r\n\tif (result == null && defaultValue != null )\r\n\t\tresult = defaultValue;\r\n\r\n\treturn result;\r\n}\r\n","import result from '../better-result/index.js';\r\n\r\nexport default function getOption(context = {}, key, opts, also) {\r\n\r\n\tif(_.isObject(key) && _.isString(opts)){\r\n\t\tlet _opts = also;\r\n\t\talso = key;\r\n\t\tkey = opts;\r\n\t\topts = _opts;\r\n\t}\r\n\r\n\tlet options = _.extend({ args:[context], context }, opts, { default: null });\r\n\tlet { deep } = options;\r\n\tlet defaultValue = opts && opts.default;\r\n\r\n\tlet value = result(context.options || also, key, options);\r\n\tif (value == null && deep !== false) {\r\n\t\tvalue = result(context, key, options);\r\n\t}\r\n\t\r\n\treturn value != null ? value : defaultValue;\r\n\r\n}\r\n\r\nexport function instanceGetOption(...args){\r\n\treturn getOption(this, ...args);\r\n}\r\n","import result from '../../../utils/better-result/index.js';\r\nimport getOption from '../../../utils/get-option/index.js';\r\n\r\nconst Mixin = Base => Base.extend({\r\n\r\n\t//property first approach\r\n\tgetProperty(key, opts){\r\n\t\t\r\n\t\tlet defaultGetArguments = result(this, '_getPropertyArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts, {\r\n\t\t\tcontext: this,\r\n\t\t});\r\n\t\tlet { deep } = options;\r\n\r\n\t\tlet value = result(this, key, options);\r\n\t\tif (value == null && deep !== false) {\r\n\t\t\tvalue = result(this.options, key, options);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//options first approach\r\n\tgetOption(key, opts){\r\n\t\tlet defaultGetArguments = result(this, '_getOptionArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts);\r\n\r\n\t\treturn getOption(this, key, options);\r\n\t},\r\n\r\n\tmergeOptions(values = {}, keys = [], opts = {}){\r\n\t\t\r\n\t\tif(_.isString(keys))\r\n\t\t\tkeys = keys.split(/\\s*,\\s*/);\r\n\r\n\t\t_.each(keys, (key) => {\r\n\t\t\tconst option = result(values, key, _.extend({ force: false }, opts));\r\n\t\t\tif (option !== undefined) {\r\n\t\t\t\tthis[key] = option;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n}, {\r\n\tGetOptionMixin:true\r\n});\r\n\r\nMixin.defaults = {\r\n\tdeep: true,\r\n\tforce: true\r\n};\r\n\r\nexport default Mixin;\r\n","// camelCase('asd:qwe:zxc') -> asdQweZxc\r\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\r\nexport default function camelCase(...args) {\r\n\t\r\n\tlet text;\r\n\tlet first;\r\n\r\n\tif (!args.length) return;\r\n\telse if (args.length == 1) {\r\n\t\ttext = args[0];\r\n\t} else {\r\n\t\tif(_.isBoolean(args[args.length - 1])){\r\n\t\t\tfirst = args.pop();\r\n\t\t}\r\n\t\ttext = _.filter(args, chunk => chunk != null).join(':');\r\n\t}\r\n\r\n\tif (!text) return text;\r\n\r\n\tif (!_.isString(text)) return text.toString();\r\n\ttext = text.replace(/:{2,}/gmi,':');\r\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\r\n\ttext = text.replace(splitter, (match, prefix, text) => text.toUpperCase());\r\n\tif(!first)\r\n\t\ttext = text.replace(/(^)(\\w)/gi, (match, prefix, text) => text.toLowerCase());\r\n\treturn text;\r\n\r\n}\r\n","\r\nimport camelCase from '../camel-case/index.js';\r\nimport getOption from '../get-option/index.js';\r\n\r\nexport default function triggerMethod(event, ...args) {\r\n\t// get the method name from the event name\r\n\tconst methodName = camelCase('on:' + event);\r\n\tconst method = getOption(this, methodName, { force: false });\r\n\tlet result;\r\n  \r\n\t// call the onMethodName if it exists\r\n\tif (_.isFunction(method)) {\r\n\t\t// pass all args, except the event name\r\n\t\tresult = method.apply(this, args);\r\n\t}\r\n  \r\n\tif(_.isFunction(this.trigger)) {\r\n\t\t// trigger the event\r\n\t\tthis.trigger.apply(this, arguments);\r\n\t}\r\n  \r\n\treturn result;\r\n}\r\n\r\n\r\n","import triggerMethod from '../trigger-method/index.js';\r\n\r\nexport default function triggerMethodOn(context, event, ...args) {\r\n\treturn triggerMethod.call(context, event, ...args);\r\n}\r\n","\r\nexport default function (Process, context, name, opts) {\r\n\r\n\tcontext[name] = function(...args){\r\n\t\t\r\n\t\tlet process = new Process(context, name, _.extend({}, opts));\r\n\t\tlet concurrent = process.concurrencyCheck();\r\n\r\n\t\tif (concurrent)\r\n\t\t\treturn concurrent;\r\n\t\telse\r\n\t\t\treturn process.run(...args);\r\n\r\n\t};\r\n\r\n}\r\n","export function isPromisable(arg){\r\n\treturn arg instanceof Promise || _.isFunction(arg && arg.then);\r\n}\r\n\r\nexport function asArray(arg) {\r\n\tif(_.isArray(arg))\r\n\t\treturn arg;\r\n\telse if(arg == null || arg === '')\r\n\t\treturn [];\r\n\telse\r\n\t\treturn [arg];\r\n}\r\n\r\nexport function race(...promises){\r\n\treturn Promise.race(promises);\r\n}\r\n\r\nexport function valueToPromise(arg){\r\n\tif(!isPromisable(arg)) {\r\n\t\tlet result = arg;\r\n\t\targ = arg == null || arg === '' ? Promise.resolve() : Promise.reject(result);\r\n\t}\r\n\treturn arg;\t\t\r\n}\r\n","import mix from '../../utils/mix/index.js';\r\nimport triggerMethodOn from '../../utils/trigger-method-on/index.js';\r\nimport camelCase from '../../utils/camel-case/index.js';\r\nimport result from '../../utils/better-result/index.js';\r\nimport register from './register.js';\r\n\r\nimport { isPromisable, race, asArray, valueToPromise } from './helpers.js';\r\n\r\nconst Process = mix({\r\n\tconstructor: function Process(context, name, opts){\r\n\t\tthis._initDefaults(name, context);\r\n\t\tthis._initCancelation();\r\n\t\tthis._mergeOptions(opts);\r\n\t},\r\n\r\n\r\n\t// initialize methods\r\n\r\n\t_initDefaults(name, context){\r\n\t\tif(name == null || name === '')\r\n\t\t\tthrow new Error('Process requires two arguments: name [string], context [object]. name missing');\r\n\t\t\r\n\t\tif(!_.isObject(context))\r\n\t\t\tthrow new Error('Process requires two arguments: name [string], context [object]. context is not an object');\r\n\r\n\t\tthis.cid = _.uniqueId('process');\r\n\t\tthis.name = name;\r\n\t\tthis.context = context;\r\n\t\tthis.errors = [];\r\n\t},\r\n\r\n\t_initCancelation(){\r\n\t\tthis.cancelPromise = new Promise((resolve, reject) => {\r\n\t\t\tthis.cancel = () => reject('cancel'); \r\n\t\t});\r\n\t},\r\n\t_mergeOptions(opts = {}){\r\n\t\tlet options = _.omit(opts, 'cid', 'name', 'context', 'cancelPromise', 'cancel', 'errors');\r\n\t\t_(options).each((value, key) => this[key] = value);\r\n\t},\r\n\r\n\t\r\n\tconcurrencyCheck(){\r\n\r\n\t\tlet previous = this.getProcessFromContext();\r\n\t\t//console.log(previous, this.context);\r\n\t\tif(!previous) return;\r\n\t\r\n\t\tlet concurrent = this.concurrent;\t\r\n\t\t\r\n\t\tif (concurrent === false) {\r\n\t\r\n\t\t\tthis.cancel();\r\n\t\r\n\t\t} else if (concurrent == 'first') {\r\n\t\r\n\t\t\treturn previous.promise;\r\n\t\r\n\t\t} else if (concurrent == 'last') {\r\n\t\r\n\t\t\tprevious.cancel();\r\n\t\r\n\t\t}\t\t\r\n\t},\r\n\r\n\r\n\t// life cycle methods\t\r\n\r\n\trun(...args){\r\n\t\tthis.updateProcessInContext(this);\r\n\t\tthis.args = args || [];\r\n\t\tthis.promise = this._createLifeCyclePromise();\r\n\t\treturn this.promise;\r\n\t},\r\n\r\n\r\n\t_createLifeCyclePromise(){\r\n\r\n\r\n\t\treturn this._notCanceled()\r\n\t\t\t.then(() => this._begin())\r\n\t\t\t.then(() => this._beforeStart())\r\n\t\t\t.then(() => this._canBeStarted())\r\n\t\t\t.then(() => this._waitOtherPromises())\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.triggerComplete();\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.triggerError(error);\r\n\t\t\t\tlet jsError;\r\n\t\t\t\tif(error instanceof Error) {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t} else if ((jsError = this.getJsError())) {\r\n\t\t\t\t\tthrow jsError;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t},\r\n\r\n\r\n\r\n\r\n\t_notCanceled() {\r\n\t\treturn this._cancelationRace(Promise.resolve());\r\n\t},\r\n\t_begin(){\r\n\t\treturn this._getHookResultAsPromise('begin');\r\n\t},\r\n\t_beforeStart(){\r\n\t\treturn this._getHookResultAsPromise('before');\r\n\t},\r\n\t_canBeStarted(){\r\n\t\tlet contextMethod = 'can:not:' + this.name;\r\n\t\tlet promise = this.invokeOnContext(contextMethod);\r\n\t\tif(!isPromisable(promise)) {\r\n\t\t\tpromise = (promise == null || promise === '') \r\n\t\t\t\t? Promise.resolve()\r\n\t\t\t\t: Promise.reject(promise);\r\n\t\t}\r\n\t\treturn this._cancelationRace(promise);\r\n\t},\r\n\t_waitOtherPromises(){\r\n\t\tlet contextMethod = `get:${this.name}:promises`;\r\n\t\t\r\n\t\tlet promises = asArray(this.invokeOnContext(contextMethod));\r\n\r\n\t\treturn this._cancelationRace(Promise.all(promises));\r\n\t},\r\n\r\n\t_getHookResultAsPromise(hookName){\r\n\t\tlet procMethod = camelCase('on:' + hookName);\r\n\t\tlet procHook = _.isFunction(this[procMethod]) && this[procMethod](this.context, ...this.args) || undefined;\r\n\t\tlet result = valueToPromise(procHook).then(() => {\r\n\t\t\tlet cntxHook = this.triggerOnContext(hookName);\r\n\t\t\treturn valueToPromise(cntxHook);\r\n\t\t});\r\n\r\n\t\treturn this._cancelationRace(result);\r\n\r\n\t},\r\n\r\n\t// trigger methods\r\n\r\n\ttriggerComplete() { \r\n\r\n\t\tthis.updateProcessInContext(null);\r\n\r\n\t\tif (_.isFunction(this.onComplete))\r\n\t\t\tthis.onComplete(this.context, ...this.args);\r\n\r\n\t\tthis.triggerOnContext();\r\n\r\n\t\tthis.triggerEnd();\r\n\t\t\r\n\t\r\n\t},\r\n\ttriggerError(errors){\r\n\r\n\r\n\t\tthis.updateProcessInContext(null);\t\t\r\n\r\n\t\tif(!_.isArray(errors))\r\n\t\t\terrors = [errors];\r\n\r\n\t\tthis.errors.push(...errors);\r\n\r\n\t\t\r\n\t\tif (_.isFunction(this.onError))\r\n\t\t\tthis.onError(this.context, ...this.errors);\r\n\t\t\r\n\t\tthis.triggerOnContext('error', ...this.errors);\r\n\t\t\r\n\t\tthis.triggerEnd();\r\n\r\n\t\t\r\n\t},\r\n\ttriggerEnd(){\r\n\t\tthis.triggerOnContext('end');\r\n\t},\r\n\r\n\r\n\r\n\t// helpers methods\r\n\r\n\tgetJsError(context){\r\n\t\t!context && (context = this);\r\n\t\tif(context != this && (!_.isObject(context) || !_.isArray(context.errors)))\r\n\t\t\treturn;\r\n\r\n\t\treturn _(context.errors).filter(f => f instanceof Error)[0];\r\n\t},\t\r\n\r\n\t_cancelationRace(promise){\r\n\t\treturn race(this.cancelPromise, promise);\r\n\t},\r\n\r\n\r\n\tgetContextProcessKey(){\r\n\t\treturn camelCase(`_process:${this.name}:executing`);\r\n\t},\r\n\tgetProcessFromContext(){\r\n\t\tlet key = this.getContextProcessKey();\r\n\t\treturn this.context[key];\r\n\t},\r\n\tupdateProcessInContext(process){\r\n\t\tlet key = this.getContextProcessKey();\t\t\r\n\t\tthis.context[key] = process;\r\n\t},\r\n\r\n\r\n\r\n\ttriggerOnContext (eventName) {\r\n\t\r\n\t\tlet context = this.context; \r\n\t\tif(!_.isFunction(context.trigger))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tlet event = (eventName ? eventName + ':' : '') + this.name;\r\n\t\t\r\n\t\treturn triggerMethodOn(context, event, this, ...this.args);\r\n\t\r\n\t},\r\n\r\n\tinvokeOnContext(methodName)\r\n\t{\r\n\t\tlet method = camelCase(methodName);\r\n\t\tlet context = this.context;\r\n\t\tlet args = this.args;\r\n\t\treturn result(context, method, { args });\r\n\r\n\t}\r\n\r\n}).class;\r\n\r\n\r\nProcess.register = function(context, name, opts) {\r\n\treturn register(this, context, name, opts);\r\n};\r\n\r\nexport default Process;\r\n","import Process from '../../../components/process/index.js';\r\n\r\nconst defaultStartableOptions  = {\r\n\tconcurrent: false,\r\n\r\n\t//good place to supply own state collecting logic\r\n\tstoreState(){\r\n\r\n\t\tthis.contextState = [{\r\n\t\t\tkey: 'startable.status',\r\n\t\t\tvalue: this.context['startable.status']\r\n\t\t}];\r\n\r\n\r\n\t\t/*\r\n\r\n\t\tfor example: take all simple values from context\r\n\r\n\t\tfor(var key in this.context){\r\n\t\t\tlet value = this.context[key];\r\n\t\t\tif (value == null || !_.isObject(value.valueOf()))\r\n\t\t\t\tthis.contextState.push({ key, value });\r\n\t\t}\r\n\r\n\t\t*/\r\n\r\n\t},\r\n\trestoreState(){\r\n\t\t_(this.contextState || []).each(keyValue => {\r\n\t\t\tthis.context[keyValue.key] = keyValue.value;\r\n\t\t});\r\n\t},\r\n\tonBefore(...args){\r\n\t\tthis.storeState();\r\n\t\tthis.ensureState();\r\n\t\tthis.context['startable.status'] = this.processingName;\r\n\t\tthis.context['startable.start.lastArguments'] = args;\r\n\t},\r\n\tonComplete(){\r\n\t\tthis.context['startable.status'] = this.processedName;\r\n\t},\t\r\n\tonError(){\r\n\t\tthis.restoreState();\r\n\t},\r\n\tensureState(shouldThrow = true){\r\n\t\tlet other = this.name == 'start' ? 'stop' : 'start';\r\n\t\tlet error = this.name == 'start' ? 'not:stopped' : 'not:started';\r\n\t\tlet status = this.context['startable.status'];\r\n\t\tswitch(status){\r\n\t\tcase 'stopping':\r\n\t\tcase 'starting':\r\n\t\t\tif(shouldThrow) throw new Error('not:iddle');\r\n\t\t\telse return 'not:iddle';\r\n\t\tcase 'iddle':\r\n\t\t\tif(this.name == 'start') return;\r\n\t\t\telse if(shouldThrow) throw new Error(error);\r\n\t\t\telse return error;\r\n\t\tcase other:\r\n\t\t\tif(shouldThrow) throw new Error(error);\r\n\t\t\telse return error;\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst defaultStartOptions  = {\r\n\tprocessingName: 'starting',\r\n\tprocessedName: 'started'\r\n};\r\nconst defaultStopOptions  = {\r\n\tprocessingName: 'stopping',\r\n\tprocessedName: 'stopped'\r\n};\r\n\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeStartable();\r\n\r\n\t},\r\n\t'startable.status': 'iddle',\r\n\t_initializeStartable(){\r\n\r\n\t\tlet startable = _.extend({}, defaultStartableOptions, this.getOption('startableOptions', {args:[this]}));\r\n\r\n\t\tlet start = _.extend({}, startable, defaultStartOptions, this.getOption('startOptions', {args:[this]}));\r\n\t\tlet stop = _.extend({}, startable, defaultStopOptions, this.getOption('stopOptions', {args:[this]}));\r\n\r\n\t\tProcess.register(this, 'start', start);\r\n\t\tProcess.register(this, 'stop', stop);\r\n\r\n\t},\r\n\tisStarted(){\r\n\t\treturn this['startable.status'] === 'started';\r\n\t},\r\n\tisStopped(){\r\n\t\treturn this['startable.status'] === 'stopped' || this['startable.status'] === 'iddle';\r\n\t},\r\n\tisNotIddle(){\r\n\t\treturn this['startable.status'] === 'stopping' || this['startable.status'] === 'starting';\r\n\t},\r\n\trestart(){\r\n\t\tif(this.isNotIddle())\r\n\t\t\tthrow new Error('Restart not allowed while startable instance is not iddle: ', this['startable.status']);\r\n\t\tlet stop = this.isStarted() ? this.stop() : Promise.resolve();\r\n\t\tlet args = this['startable.start.lastArguments'] || [];\r\n\t\treturn stop.then(() => this.start(...args));\r\n\t}\r\n}, {\r\n\tStartableMixin: true\r\n});\r\n","\r\nimport isKnownCtor from '../../../utils/is-known-ctor/index.js';\r\n\r\nexport default Base => Base.extend({\r\n\r\n\tconstructor(opts){\r\n\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeChildrenable(opts);\r\n\r\n\t},\r\n\t_initializeChildrenable(opts){\r\n\t\tthis.mergeOptions(opts, ['parent', 'root']);\r\n\t\tif (this.parent == null && this.root == null) \r\n\t\t\tthis.root = this;\r\n\t},\r\n\r\n\t//call this method manualy for initialize children\r\n\tinitializeChildren(){\r\n\t\tif (this._childrenInitialized) return;\r\n\r\n\t\tlet children = this.getOption('children');\r\n\t\tthis._children = [];\r\n\t\t_(children).each(child => this._initializeChild(child));\r\n\r\n\t\tthis._childrenInitialized = true;\r\n\r\n\t},\r\n\r\n\t_initializeChild(arg){\r\n\t\tlet Child;\r\n\t\tlet options = {};\r\n\r\n\t\tif (isKnownCtor(arg))\r\n\t\t\tChild = arg;\r\n\t\telse if(_.isFunction(arg)){\r\n\t\t\t\r\n\t\t\tlet invoked = arg.call(this, this);\r\n\t\t\treturn this._initializeChild(invoked);\r\n\r\n\t\t} else if (_.isObject(arg)) {\r\n\t\t\tChild = arg.Child;\r\n\t\t\t_.extend(options, _.omit(arg, 'Child'));\r\n\t\t}\r\n\r\n\t\t//if (!isKnownCtor(arg)) return;\r\n\r\n\t\t_.extend(options, this.getOption('childOptions'), { parent: this });\r\n\t\toptions = this.buildChildOptions(options);\r\n\t\t\r\n\t\tlet child = this.buildChild(Child, options);\r\n\t\tthis._children.push(child);\r\n\r\n\t},\r\n\r\n\tbuildChildOptions(options){\r\n\t\treturn options;\r\n\t},\r\n\tbuildChild(Child, options){\r\n\t\t!Child && (Child = this.getOption('defaultChildClass') || this.prototype.constructor);\r\n\t\treturn new Child(options);\r\n\t},\r\n\t_getChildren(items, opts = {}){\r\n\t\tlet { exclude, filter, map } = opts;\r\n\r\n\t\tif(exclude != null && !_.isArray(exclude))\r\n\t\t\topts.exclude = [exclude];\r\n\r\n\t\tif(!_.isFunction(filter))\r\n\t\t\tdelete opts.filter;\r\n\r\n\t\tlet result = [];\r\n\t\t_(items).each((item, index) => {\r\n\r\n\t\t\tif(!this._childFilter(item, index, opts))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(_.isFunction(map))\r\n\t\t\t\titem = map(item);\r\n\r\n\t\t\titem && result.push(item);\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\t_childFilter(item, index, opts = {}){\r\n\t\t\r\n\t\tif(opts.force) return item;\r\n\r\n\t\tlet { exclude, filter } = opts;\r\n\r\n\t\tif(_.isFunction(this.childFilter) && !this.childFilter(item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isArray(exclude) && exclude.indexOf(item) >= 0)\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isFunction(filter) && !filter.call(this, item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\treturn item;\r\n\t},\r\n\tchildFilter: false,\r\n\tgetChildren(opts = {}){\r\n\t\tlet children = [].slice.call(this._children || []);\r\n\t\topts.reverse && children.length > 1 && children.reverse();\t\t\r\n\t\treturn this._getChildren(children, opts);\r\n\t},\r\n\tgetAllChildren(opts = {}){\r\n\r\n\t\tlet { includeSelf, map, reverse } = opts;\r\n\t\tlet options = _.omit(opts, 'includeSelf', 'map');\r\n\r\n\r\n\t\tlet children = this.getChildren(options);\r\n\t\tlet result = _(children).chain()\r\n\t\t\t.map(child => {\r\n\t\t\t\tlet children = child.getAllChildren(options);\r\n\t\t\t\treturn reverse ? [children, child] : [child, children];\r\n\t\t\t})\r\n\t\t\t.flatten()\r\n\t\t\t.value();\r\n\r\n\t\tif (includeSelf) {\r\n\t\t\tlet method = reverse ? 'push' : 'unshift';\r\n\t\t\tresult[method](this);\r\n\t\t}\r\n\t\t\r\n\t\tif (_.isFunction(map)) {\r\n\t\t\treturn _(result).chain().map(map).filter(f => !!f).value();\r\n\t\t} else {\t\t\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetParent(){\r\n\t\treturn this.parent;\r\n\t}\r\n\r\n\r\n\r\n}, { ChildrenableMixin: true });\r\n","export default function getNestedResult(value, context, schema) {\r\n\treturn value != null \r\n\t\t&& _.isFunction(schema.nested) \r\n\t\t&& schema.nested(value, context);\r\n}","export default function getPropertySchema(model, key)\r\n{\r\n\tif (_.isFunction(model.getPropertySchema)) {\r\n\t\treturn model.getPropertySchema(key);\r\n\t} else {\r\n\t\treturn {};\r\n\t}\r\n}","export default function getDisplayConfig(key, model, schema){\r\n\tif (key == null) return {};\r\n\treturn (_.isFunction(model.getPropertyDisplayConfig) && model.getPropertyDisplayConfig(key))\r\n\t\t|| (schema && schema.display) || {};\r\n}","import { isModel } from '../../vendors/helpers.js';\r\nfunction getProperty(context, name)\r\n{\r\n\tif(context == null || !_.isObject(context) || name == null || name == '') return;\r\n\tif (isModel(context))\r\n\t\treturn context.get(name, { gettingByPath: true  });\r\n\telse\r\n\t\treturn context[name];\r\n}\r\nexport default getProperty;\t\r\n","\r\nimport getProperty from './get-property.js';\r\n\r\nfunction getByPathArray(context, propertyName, pathArray) {\r\n\t\r\n\tif (context == null || !_.isObject(context) || propertyName == null || propertyName == '')\r\n\t\treturn;\r\n\r\n\tvar prop = getProperty(context, propertyName);\r\n\r\n\tif (!pathArray.length || (pathArray.length && prop == null))\r\n\t\treturn prop;\r\n\r\n\tvar nextName = pathArray.shift();\r\n\r\n\treturn getByPathArray(prop, nextName, pathArray);\r\n\r\n}\r\n\r\nexport default getByPathArray;\r\n","import getByPathArray from './get-by-path-array.js';\r\n\r\nexport default function getByPath(obj, path) {\r\n\r\n\tif (obj == null || !_.isObject(obj) || path == null || path == '') return;\r\n\r\n\tvar pathArray = _.isString(path) ? path.split('.')\r\n\t\t: _.isArray(path) ? [].slice.call(path)\r\n\t\t\t: [path];\r\n\r\n\tvar prop = pathArray.shift();\r\n\r\n\treturn getByPathArray(obj, prop, pathArray);\r\n\r\n}\r\n","import { Model } from '../../../vendors/backbone.js';\r\nimport getNestedResult from './get-nested-result.js';\r\nimport getPropertySchema from './get-property-schema.js';\r\nimport getDisplayConfig from './get-display-config.js';\r\nimport getByPath from '../../../utils/get-by-path/index.js';\r\n\r\n\r\nexport default Base => {\r\n\tconst originalGet = Model.prototype.get;\r\n\tconst Mixed = Base.extend({\r\n\t\tgetByPath(key){\r\n\t\t\tif(key.indexOf('.') > -1)\r\n\t\t\t\treturn getByPath(this, key);\r\n\t\t\telse\r\n\t\t\t\treturn originalGet.call(this, key);\r\n\t\t},\r\n\t\tget(key, opts = {}){\r\n\t\t\tif(key == null || key == '') return;\t\r\n\t\t\t\r\n\t\t\tlet value = 'value' in opts \r\n\t\t\t\t? opts.value\r\n\t\t\t\t: this.getByPath.call(this, key);\r\n\r\n\t\t\tif (!_.size(opts)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet result = opts.nested && getNestedResult(value, this, prop);\r\n\t\t\tif (result != null) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(opts.transform) && !opts.raw) {\r\n\t\t\t\tvalue = opts.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(prop.transform) && !opts.raw){\r\n\t\t\t\tvalue = prop.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(opts.display === true){\r\n\r\n\t\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\r\n\t\t\t\tif(opts.alternative){\r\n\t\t\t\t\tvalue = _.isFunction(display.alternative) && display.alternative.call(this, value, _.extend({},opts,prop), this);\r\n\t\t\t\t}\r\n\t\t\t\telse if(_.isFunction(display.transform)) {\r\n\t\t\t\t\tvalue = display.transform.call(this, value, opts, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(display.ifEmpty && (value == null || value === ''))\r\n\t\t\t\t\treturn display.ifEmpty;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tdisplay(key, opts = {}){\r\n\t\t\t_.extend(opts, { display:true });\r\n\t\t\treturn this.get(key, opts);\r\n\t\t},\r\n\t\tpropertyName(key) {\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\t\t\treturn display.label || key;\r\n\t\t}\r\n\t});\r\n\r\n\treturn Mixed;\r\n};\r\n","export default Collection => Collection.extend({\r\n\tconstructor(){\r\n\t\t\r\n\t\tthis.on({\r\n\t\t\trequest(){\r\n\t\t\t\tthis._isFetching = true;\r\n\t\t\t},\r\n\t\t\tsync(){\r\n\t\t\t\tthis._isFetching = false;\r\n\t\t\t\tthis._isFetched = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tCollection.apply(this, arguments);\r\n\t},\r\n\tisFetching(){\r\n\t\treturn this._isFetching === true;\r\n\t},\r\n\tisFetched(){\r\n\t\treturn this._isFetched === true;\r\n\t}\r\n});\r\n","import betterResult from '../../../utils/better-result/index.js';\r\nconst defaultCssConfig = {\r\n\tbeforeRender: true,\r\n\tmodelChange: true,\r\n\trefresh: true,\r\n};\r\n\r\nexport default (Base) => Base.extend({\r\n\tconstructor(){\r\n\t\tif(!this.cssClassModifiers) {\r\n\t\t\tthis.cssClassModifiers = [];\r\n\t\t}\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._setupCssClassModifiers();\t\t\r\n\t},\r\n\taddCssClassModifier(...modifiers){\r\n\t\tthis.cssClassModifiers.push(...modifiers);\r\n\t},\r\n\trefreshCssClass(){\r\n\t\tlet className = this._getCssClassString();\r\n\t\tif(className == ''){\r\n\t\t\tthis.$el.removeAttr('class');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$el.attr({\r\n\t\t\t\tclass: className\r\n\t\t\t});\r\n\t\t}\r\n\t},\t\r\n\r\n\t_getCssClassModifiers(){\r\n\t\tlet optsModifiers = betterResult(this.options || {}, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tlet propsModifiers = betterResult(this, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tlet className = betterResult(this, 'className', { args:[this.model, this], default: [] });\r\n\t\tlet modifiers = [className].concat(optsModifiers, propsModifiers);\r\n\t\treturn modifiers;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassModifiers(){\r\n\t\treturn this._getCssClassModifiers();\r\n\t},\r\n\t_getCssClassString()\r\n\t{\r\n\t\tlet modifiers = this.getCssClassModifiers();\r\n\t\t\r\n\t\tlet classes = _(modifiers).reduce((hash, modifier) => {\r\n\t\t\tif(modifier == null || modifier === '') { return hash; }\r\n\t\t\tlet cls;\r\n\t\t\tif (_.isString(modifier)) {\r\n\t\t\t\tcls = modifier;\r\n\t\t\t} else if (_.isFunction(modifier)) {\r\n\t\t\t\tlet builded = modifier.call(this, this.model, this);\r\n\t\t\t\tcls = _.isString(builded) && builded || undefined;\r\n\t\t\t}\r\n\t\t\tcls && (hash[cls] = true);\r\n\t\t\treturn hash;\r\n\t\t}, {});\r\n\r\n\t\treturn _.keys(classes).join(' ');\r\n\r\n\t\t// return _.chain(classes)\r\n\t\t// \t.keys(classes)\r\n\t\t// \t.uniq()\r\n\t\t// \t.value()\r\n\t\t// \t.join(' ');\r\n\r\n\t},\r\n\r\n\t_setupCssClassModifiers(){\r\n\r\n\t\tif(this._cssClassModifiersInitialized) return;\r\n\r\n\t\tlet cfg = this.getCssClassConfig();\r\n\t\tif(!cfg) return;\r\n\r\n\t\tlet events = this.getCssClassEvents(cfg);\r\n\t\t_(events).each((eventName) => this.on(eventName, this.refreshCssClass));\r\n\r\n\t\tif (cfg.modelChange && this.model) {\r\n\t\t\tthis.listenTo(this.model, 'change', this.refreshCssClass);\r\n\t\t}\r\n\r\n\t\tthis._cssClassModifiersInitialized = true;\r\n\t},\r\n\t\r\n\t_getCssClassConfig(){\r\n\t\tlet cfg = _.extend({}, defaultCssConfig, this.getOption('cssClassConfig'));\r\n\t\tif(!cfg || _.size(cfg) == 0) return;\r\n\t\treturn cfg;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassConfig(){\r\n\t\treturn this._getCssClassConfig();\r\n\t},\r\n\r\n\t_getCssClassEvents(cfg){\r\n\t\tlet events = [].concat(cfg.events || []);\r\n\t\tif(cfg.refresh) events.push('refresh');\r\n\t\tif(cfg.beforeRender) events.push('before:render');\r\n\t\tevents = _(events).uniq();\r\n\t\treturn events;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassEvents(cfg){\r\n\t\treturn this._getCssClassEvents(cfg);\r\n\t}\r\n}, { CssClassModifiersMixin: true });\r\n","export default function takeFirst(key, ...args) {\r\n\tif(!_.isString(key) || key === '') return;\r\n\tlet value;\r\n\t_.some(args, arg => {\r\n\t\tif (key in (arg || {})) {\r\n\t\t\tvalue = arg[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn value;\r\n}\r\n","import { isModel, isView } from '../../vendors/helpers.js';\r\nexport default function getModel(arg){\r\n\r\n\tif (isModel(arg)) { return arg; }\r\n\t\r\n\tif (isView(arg)) { return arg.model; }\r\n\r\n}\r\n","import { isView }  from '../../vendors/helpers.js';\r\nexport default function getModel(arg){\r\n\treturn isView(arg) && arg;\r\n}\r\n","\r\nimport getModel from './get-model.js';\r\nimport getView from './get-view.js';\r\nexport default function compareAB(a, b, func){\r\n\tif(_.isArray(func)) {\r\n\r\n\t\tlet result = 0;\r\n\r\n\t\t_(func).every((f) => {\r\n\t\t\tresult = compareAB(a,b,f);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\t\t\r\n\t\treturn result;\r\n\t} else {\r\n\t\tif (_.isFunction(func)) {\r\n\t\t\ta = func.call(a, getModel(a), getView(a));\r\n\t\t\tb = func.call(b, getModel(b), getView(b));\r\n\t\t}\r\n\r\n\t\tif (a < b) return -1;\r\n\t\tif (a > b) return 1;\r\n\t\treturn 0;\r\n\r\n\t}\r\n}\r\n","import compareAB from '../compare-ab/index.js';\r\nexport default function comparator(...args){\r\n\tvar result = 0;\r\n\r\n\t//for simple case (arg1, arg2, compare)\r\n\tif (args.length <= 3 && !_.isArray(args[0])){\r\n\r\n\t\treturn compareAB.apply(null, args);\r\n\r\n\t} \r\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\r\n\t//each arguments should be an array\r\n\telse {\r\n\r\n\t\t_(args).every((single) => {\r\n\r\n\t\t\tif(!_.isArray(single)) return true;\r\n\t\t\tresult = compareAB(...single);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n","export default function toNumber(text){\r\n\tif(_.isNumber(text)) return text;\r\n\tif(!_.isString(text)) return;\r\n\t\r\n\tlet value = parseFloat(text, 10);\r\n\tif(isNaN(value))\r\n\t\tvalue = undefined;\r\n\t\t\r\n\treturn value;\r\n}\r\n","export default {\r\n\tnullable: true, \r\n\tstrict: false,\r\n\treturnNullAs: undefined, \r\n\treturnEmptyAs: undefined, \r\n\treturnNullAndEmptyAs: undefined,\r\n\treturnAnyAs: undefined, \r\n\treturnOtherAs: undefined\r\n};\r\n","import defaultOptions from './options.js';\r\n\r\nconst trueValues = ['true','1','-1','yes'];\r\nconst falseValues = ['false','0','no'];\r\n\r\nconst alternative = function(...args) {\r\n\tlet returnValue;\r\n\t_(args).some(arg => {\r\n\t\tif(_.isBoolean(arg)) {\r\n\t\t\treturnValue = arg;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn returnValue;\r\n};\r\n\r\nconst valueOrAlternative = function(nullable, nullValue, value, ...alts){\r\n\tlet alt = alternative(...alts);\r\n\tif (alt != null)\r\n\t\treturn alt;\r\n\telse if (nullable)\r\n\t\treturn nullValue;\r\n\telse\r\n\t\treturn value;\r\n};\r\n\r\nconst convertToBoolean = function (arg, opts = {})\r\n{\r\n\r\n\tlet other;\r\n\tlet options = _.extend({}, defaultOptions, opts);\r\n\tlet { \r\n\t\tnullable, strict,\r\n\t\treturnNullAs, returnEmptyAs, returnNullAndEmptyAs,\r\n\t\treturnAnyAs, returnOtherAs\r\n\t} = options;\r\n\r\n\r\n\r\n\tif (arg == null) {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnNullAs, returnNullAndEmptyAs);\r\n\t}\r\n\telse if (arg === '') {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnEmptyAs, returnNullAndEmptyAs);\r\n\t} else if (_.isBoolean(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\t//  else if (_.isObject(arg)) {\r\n\t// }\r\n\t\r\n\tother = strict \r\n\t\t? (nullable ? undefined : false) \r\n\t\t: true;\r\n\t\t\r\n\r\n\tlet text = arg.toString().toLowerCase();\r\n\tlet isTrue = convertToBoolean.trueValues.indexOf(text) > -1;\r\n\tlet isFalse = convertToBoolean.falseValues.indexOf(text) > -1;\r\n\r\n\r\n\tif (_.isBoolean(returnAnyAs)) {\r\n\t\treturn returnAnyAs;\r\n\t} else if (_.isBoolean(returnOtherAs)) {\r\n\t\tother = returnOtherAs;\r\n\t}\r\n\t\r\n\treturn isTrue \r\n\t\t? true \r\n\t\t: isFalse \r\n\t\t\t? false \r\n\t\t\t: other;\r\n};\r\n\r\nconvertToBoolean.trueValues = trueValues;\r\nconvertToBoolean.falseValues = falseValues;\r\nexport default convertToBoolean;\r\n","import toNumber from './to-number.js';\r\nimport toBoolean from '../to-bool/index.js';\r\n\r\n\r\n//this is under development yet and can be change in any time\r\nexport default function convertString(text, type, opts) {\r\n\r\n\tswitch(type){\r\n\tcase 'number':\r\n\t\treturn toNumber(text, opts);\r\n\tcase 'boolean':\r\n\t\treturn toBoolean(text, opts);\r\n\tdefault:\r\n\t\treturn text;\r\n\t}\r\n\r\n\r\n}\r\n","import { isModel } from '../../vendors/helpers.js';\r\nexport default function traverse(fields, root)\r\n{\r\n\troot = root || '';\r\n\tif (this == null || typeof this != 'object') {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar hash = isModel(this) ? this.attributes : this;\r\n\r\n\tvar props = Object.getOwnPropertyNames(hash);\r\n\r\n\tfor (var x = 0; x < props.length; x++) {\r\n\t\tvar name = props[x];\r\n\t\tvar prop = this[name];\r\n\r\n\t\tif (prop == null || typeof prop != 'object' || (prop instanceof Date || prop instanceof Array)) {\r\n\r\n\t\t\tfields[root + name] = prop;\r\n\t\t}\r\n\t\telse if (typeof prop == 'object') {\r\n\r\n\t\t\ttraverse.call(prop, fields, root + name + '.');\r\n\t\t}\r\n\t}\r\n\t\t\r\n}\r\n","import traverse from './traverse.js';\r\n\r\nexport default function flattenObject(obj) {\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\ttraverse.call(obj, res);\r\n\treturn res;\r\n}\r\n","import camelCase from '../camel-case/index.js';\r\nfunction transformStringArray(arr, opts = {}){\r\n\tlet { ignoreCase = true, toCamelCase = false } = opts;\r\n\treturn _(arr).map(value => {\r\n\t\tif (ignoreCase) \r\n\t\t\treturn value.toLowerCase();\r\n\t\telse if (toCamelCase)\r\n\t\t\treturn camelCase(value);\r\n\t\telse\r\n\t\t\treturn value;\r\n\t});\r\n}\r\nexport default function hasFlag(value, flag, opts = {}){\r\n\tif (value == null || flag == null) return false;\r\n\r\n\t// if(typeof value != typeof flag)\r\n\t// \tthrow new Error('value and flag must be of same type. allowed types: string, number');\r\n\r\n\r\n\tif (_.isNumber(value) && _.isNumber(flag)) {\r\n\t\tlet has = value & flag;\r\n\t\treturn opts.all === true ? has === flag : has > 0;\r\n\t} else if ((_.isNumber(value) && !_.isNumber(flag)) || (!_.isNumber(value) && _.isNumber(flag))) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!_.isArray(flag)) { flag = flag.toString(); }\r\n\tif (!_.isString(flag) && !_.isArray(flag)) { return false; }\r\n\r\n\tlet rawflags = _.isArray(flag) \r\n\t\t? flag\r\n\t\t: flag.split(/\\s*,\\s*/);\r\n\r\n\r\n\tlet rawvalues;\r\n\tif(_.isString(value)){\r\n\t\trawvalues = value.split(/\\s*,\\s*/);\r\n\t} else if(_.isArray(value)){\r\n\t\trawvalues = values;\r\n\t} else if(_.isObject(value)) {\r\n\t\trawvalues = opts.useObjectValues \r\n\t\t\t? _.map(value, v => v)\r\n\t\t\t: _.keys(value);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet flags = transformStringArray(rawflags, opts);\r\n\tlet values = transformStringArray(rawvalues, opts);\r\n\r\n\tlet intersection = _.intersection(values, flags);\t\t\r\n\tif (intersection.length == 0) return false;\r\n\tif (intersection.length == flags.length) return true;\r\n\treturn opts.all != true;\r\n\r\n\r\n\t// if(_.isString(value) && _.isString(flag)) {\r\n\t// \tif(value === '' || flag === '') return false;\r\n\t// \tlet values = transformStringArray(value.split(/\\s*,\\s*/), opts);\r\n\t// \tlet flags = transformStringArray(flag.split(/\\s*,\\s*/), opts);\r\n\r\n\t// }\r\n\r\n}\r\n","export default function isEmptyValue(arg, { allowWhiteSpace = false } = {}) {\r\n\tif (arg == null || _.isNaN(arg)) return true;\r\n\tif (!_.isString(arg)) return false;\r\n\tif (arg === '') return true;\r\n\t\r\n\treturn !allowWhiteSpace && arg.trim() === '';\r\n\t\r\n}\r\n","import isEmptyValue from '../is-empty-value/index.js';\r\n\r\nfunction normalizeStringArray(arr){\r\n\treturn _.reduce(arr, (result,item) => {\r\n\t\tif(item == null) return;\r\n\t\tresult.push(item.toString());\r\n\t\treturn result;\r\n\t}, []);\r\n}\r\n\r\nfunction compare(a, b, options = {}){\r\n\tif (a == null) {\r\n\t\treturn false;\r\n\t}\r\n\tlet { caseInsensitive = true } = options;\r\n\tif (!_.isString(a)) {\r\n\t\ta = a.toString();\r\n\t}\r\n\tif(caseInsensitive) {\r\n\t\ta = a.toLowerCase();\r\n\t\tb = b.toLowerCase();\r\n\t}\r\n\treturn a === b;\r\n}\r\n\r\nexport default function getFlag(value, flag, options = {}){\r\n\tlet flags;\r\n\tif (isEmptyValue(value) || isEmptyValue(flag)) { return; }\t\r\n\tlet { returnAs, useObjectValues, takeObjectKeys, all, delimeter = ', ', doNotPluck } = options;\r\n\tif(_.isString(flag)){\r\n\t\tflags = normalizeStringArray(flag.split(/\\s*,\\s*/gmi), options);\r\n\t}else if(_.isArray(flag)) {\r\n\t\tflags = normalizeStringArray(flag, options);\r\n\t} else {\r\n\t\treturn;\r\n\t}\r\n\tif (returnAs == null) {\r\n\t\treturnAs = _.isArray(flag) ? 'array' : 'string';\r\n\t}\r\n\tif(_.isString(value)) {\r\n\t\tvalue = normalizeStringArray(value.split(/\\s*,\\s*/gmi), options);\r\n\t}\r\n\tlet isArray = _.isArray(value);\r\n\tlet method = all ? 'every' : 'some';\r\n\tlet founded = _.reduce(value, (filtered, item, key) => {\r\n\t\tlet check = item;\r\n\t\tif(!isArray && !useObjectValues){\r\n\t\t\tcheck = key;\r\n\t\t}\r\n\t\t\r\n\t\tlet good = _[method](flags, flag => compare(check, flag, options));\r\n\t\t//console.log(method, good, flags, value);\r\n\t\tif (!good) { return filtered; }\r\n\r\n\t\tif (isArray) {\r\n\t\t\tfiltered.push(check);\r\n\t\t} else {\r\n\t\t\tfiltered.push({value: item, key });\r\n\t\t}\r\n\t\treturn filtered;\r\n\t}, []);\r\n\r\n\t//console.log(founded);\r\n\tif (returnAs === 'string') {\r\n\t\tif (isArray) {\r\n\t\t\treturn founded.join(delimeter);\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key).join(delimeter);\r\n\t\t}\r\n\t} else if(returnAs === 'array'){\r\n\t\tif (isArray || doNotPluck) {\r\n\t\t\treturn founded;\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key);\r\n\t\t}\r\n\t} else if(returnAs === 'object') {\r\n\t\treturn _.reduce(founded, (result, item, index) => {\r\n\t\t\tlet value = isArray \r\n\t\t\t\t? item \r\n\t\t\t\t: takeObjectKeys ? item.key : item.value;\r\n\t\t\tlet key = isArray \r\n\t\t\t\t? index \r\n\t\t\t\t: takeObjectKeys ? item.value : item.key;\r\n\t\t\tresult[key] = value;\r\n\t\t\treturn result;\r\n\t\t}, {});\r\n\t}\r\n\r\n}\r\n","function pstoSetPair(context, pair){\r\n\tif(!_.isString(pair)) return;\r\n\tlet keyvalue = pair.split('=');\r\n\tlet key = keyvalue.shift();\r\n\tlet value = keyvalue.join('=');\r\n\tpstoSetKeyValue(context, key, value);\r\n}\r\n\r\nfunction pstoSetKeyValue(context, key, value){\r\n\t\t\r\n\tif (key == null) return;\r\n\tkey = decodeURIComponent(key);\r\n\tvalue != null && (value = decodeURIComponent(value));\r\n\r\n\tif(!(key in context))\r\n\t\treturn (context[key] = value);\r\n\r\n\t!_.isArray(context[key]) && (context[key] = [context[key]]);\r\n\r\n\tcontext[key].push(value);\r\n\r\n\treturn context[key];\r\n}\r\n\r\nexport default function paramsToObject(raw, opts = {emptyObject: true}){\r\n\tlet result = {};\r\n\tif(!_.isString(raw)) return opts.emptyObject ? result : raw;\r\n\r\n\tlet pairs = raw.split('&');\r\n\t_(pairs).each((pair) => pstoSetPair(result, pair));\r\n\t\r\n\treturn result;\r\n}\r\n","import getProperty from '../get-by-path/get-property.js';\r\nimport { isModel } from '../../vendors/helpers.js';\r\nfunction setProperty(context, name, value) {\r\n\tif (isModel(context)) {\r\n\t\tcontext.set(name, value, { silent: true });\r\n\t}\r\n\telse {\r\n\t\tcontext[name] = value;\r\n\t}\r\n\r\n\treturn getProperty(context, name);\r\n}\r\n\r\nexport default setProperty;\r\n","export default function ensureSetByPathArguments(context, path)\r\n{\r\n\tlet errors = [];\r\n\tif (context == null || !_.isObject(context)) {\r\n\t\terrors.push(new Error('Context is not an object'));\r\n\t}\r\n\tif (!_.isString(path) || path === '') {\r\n\t\terrors.push(new Error('Path is not a string'));\r\n\t}\r\n\tif (errors.length) {\r\n\t\treturn errors;\r\n\t}\r\n}\r\n","import getProperty from '../get-by-path/get-property.js';\r\nimport setProperty from './set-property.js';\r\nimport ensureArguments from './ensure-arguments.js';\r\nimport { isModel } from '../../vendors/helpers.js';\r\nexport default function setByPathArr(context, propertyName, pathArray, value, options) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, propertyName);\r\n\tif (argumentsErrors) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet modelContext;\r\n\tif (isModel(context)) {\r\n\t\tmodelContext = {\r\n\t\t\tmodel: context,\r\n\t\t\tproperty: propertyName,\r\n\t\t\tpathChunks: [].slice.call(pathArray)\r\n\t\t};\r\n\t}\r\n\r\n\t//set value if this is a last chunk of path\r\n\tif (!pathArray.length) {\r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\treturn setProperty(context, propertyName, value, options);\r\n\r\n\t} else {\r\n\r\n\t\tvar prop = getProperty(context, propertyName);\r\n\r\n\t\tif (!_.isObject(prop) && !options.force) {\r\n\t\t\treturn;\r\n\t\t} else if (!_.isObject(prop) && options.force) {\r\n\t\t\tprop = setProperty(context, propertyName, {}, options);\r\n\t\t} \r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\tvar nextName = pathArray.shift();\t\r\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\r\n\r\n\t}\r\n}\r\n","export default function normalizeSetByPathOptions(opts = {}, ext)\r\n{\r\n\r\n\tlet options = _.extend({}, opts, ext, {\r\n\t\tsilent: opts.silent === true,\r\n\t\tforce: opts.force !== false,\r\n\t\t//passPath: [],\r\n\t\tmodels: []\r\n\t});\r\n\r\n\treturn options;\r\n}\r\n","export default function triggerModelEventsOnSetByPath(value, options = {})\r\n{\r\n\tif (options.silent || !options.models.length) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t_(options.models).each(context => {\r\n\t\tlet rest = context.pathChunks.join(':');\r\n\t\tif (rest) {\r\n\t\t\tcontext.model.trigger(`change:${context.property}:${rest}`, context.model, value);\r\n\t\t}\r\n\t\tcontext.model.trigger(`change:${context.property}`, context.model, value);\r\n\t\tcontext.model.trigger('change', context.model);\r\n\t});\r\n\r\n}\r\n","import setByPathArray from './set-by-path-array.js';\r\nimport normalizeOptions from './normalize-options.js';\r\nimport triggerModelChangeEvents from './trigger-model-change-events.js';\r\nimport ensureArguments from './ensure-arguments.js';\r\nexport default function setByPath(context, path, value, opts = {}) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, path);\r\n\tif (argumentsErrors) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tlet pathArray = path.split('.');\t\r\n\tlet options = normalizeOptions(opts, { path, pathArray: [].slice.call(pathArray) });\r\n\r\n\tlet propertyName = pathArray.shift();\r\n\r\n\tlet result = setByPathArray(context, propertyName, pathArray, value, options);\r\n\r\n\tif (result === undefined && value !== undefined) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\ttriggerModelChangeEvents(value, options);\r\n\r\n\treturn value;\r\n\r\n\t// if (_.isObject(path) && !_.isArray(path)) {\r\n\t// \tvalue = path.value;\r\n\t// \toptions.force = path.force !== false;\r\n\t// \toptions.silent = path.silent === true;\r\n\t// \tpath = path.path;\r\n\t// }\r\n\r\n\t// var prop = pathArray.shift();\r\n\r\n\t// if (isModel(context)) {\r\n\t// \toptions.models.push({\r\n\t// \t\tpath: '',\r\n\t// \t\tproperty: prop,\r\n\t// \t\tmodel: context\r\n\t// \t});\r\n\t// }\r\n\r\n}\r\n\r\n\r\n","import setByPath from '../set-by-path/index.js';\r\n\r\nexport default function unFlat(obj) {\r\n\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\tfor (var e in obj) {\r\n\t\tsetByPath(res, e, obj[e]);\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n","export default function compareObjects(objectA, objectB) {\r\n\r\n\tif (!_.isObject(objectA) || !_.isObject(objectB)) {\r\n\t\treturn objectA == objectB;\r\n\t}\r\n\tif ((_.isArray(objectA) && !_.isArray(objectB)) || (_.isArray(objectB) && !_.isArray(objectA))) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (typeof objectA != typeof objectB) return false;\r\n\r\n\tlet size = _.size(objectA);\r\n\tif(size != _.size(objectB)) return false;\r\n\r\n\tif (_.isArray(objectA)) {\r\n\t\tlet allvalues = _.uniq(objectA.concat(objectB));\r\n\t\treturn _.every(allvalues, value => {\r\n\t\t\tlet valuesA = _.filter(objectA, _v => _v == value);\r\n\t\t\tlet valuesB = _.filter(objectB, _v => _v == value);\r\n\t\t\tif (valuesA.length != valuesB.length) return false;\r\n\t\t\treturn compareObjects(valuesA[0], valuesB[0]);\r\n\t\t});\r\n\t} else {\r\n\t\tlet allkeys = _.uniq(_.keys(objectA).concat(_.keys(objectB)));\r\n\t\tif (allkeys.length != size) return false;\r\n\t\treturn _.every(allkeys, key => {\r\n\t\t\treturn compareObjects(objectA[key], objectB[key]);\r\n\t\t});\r\n\t}\r\n}\r\n","import { flat, unflat } from '../index.js';\r\n\r\nexport default function mergeObject(src, dst){\r\n\tif (!_.isObject(src) || !_.isObject(dst)) {\r\n\t\treturn dst;\r\n\t}\r\n\tlet flatSrc = flat(src);\r\n\tlet flatDst = flat(dst);\r\n\t_.each(flatDst, (value, key) => {\r\n\t\tflatSrc[key] = value;\r\n\t});\r\n\treturn unflat(flatSrc);\r\n}\r\n","export default function mergeOptions(options, keys) {\r\n\tif (!options) { return; }\r\n  \r\n\t_.each(keys, key => {\r\n\t\tconst option = options[key];\r\n\t\tif (option !== undefined) {\r\n\t\t\tthis[key] = option;\r\n\t\t}\r\n\t});\r\n}\r\n","import extend from '../../utils/extend/index.js';\r\nimport getByPath from '../../utils/get-by-path/index.js';\r\n\r\nconst Action = function(options = {}){\r\n\tlet { name, action } = options;\r\n\tthis.options = _.omit(options, 'name', 'callback');\r\n\tthis.name = name;\r\n\tthis._action = action;\r\n};\r\nAction.extend = extend;\r\n_.extend(Action.prototype, {\r\n\tgetOption(key){\r\n\t\treturn getByPath(this.options, key);\r\n\t},\r\n\tgetLabel(){ return this.name; },\r\n\tgetAction() {\r\n\t\treturn this._action;\r\n\t},\r\n\texec(instance, ...args){\r\n\t\tlet decline = this.isNotAllowed(instance, args);\r\n\t\tif (decline) {\r\n\t\t\treturn this.onExecuteNotAllowed(instance, decline, args);\r\n\t\t}\r\n\t\tlet action = this.getAction();\r\n\r\n\t\tif (_.isFunction(action)) {\r\n\t\t\treturn action.apply(instance, args);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.onActionMissing(instance);\r\n\t\t}\r\n\t},\r\n\tis (arg) { return this == arg || this.name == arg; },\r\n\tisVisible () { return this.hidden !== true; },\r\n\tisNotAllowed () { },\r\n\tonExecuteNotAllowed () { },\r\n\tonActionMissing () { },\r\n});\r\n\r\nexport default Action;\r\n","import BaseAction from './action.js';\r\n\r\nconst store = {\r\n\tAction: BaseAction,\r\n\tnames:{},\r\n\tgetStoreName(arg){\r\n\t\tif(_.isString(arg) && arg !== '') {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tlet store = this.getStoreByCtor(arg);\r\n\t\t\tif (store) {\r\n\t\t\t\treturn store.name;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _.uniqueId('actionStore');\t\t\r\n\t},\r\n\tgetStoreByCtor(ctor){\r\n\t\treturn _.find(this.names, f => f.ctor === ctor);\t\t\r\n\t},\r\n\tisNotInitialized(arg){\r\n\t\treturn !this.getStore(arg);\r\n\t},\r\n\tinitialize({ name, actions, Action, buildAction } = {}) {\r\n\t\tlet ActionClass = Action || this.Action;\r\n\t\tlet ctor = _.isFunction(name) && name || undefined;\r\n\t\tname = this.getStoreName(name);\r\n\r\n\t\tif(name in this.names) { return; }\r\n\r\n\t\tlet options = { name, ctor, Action: ActionClass };\r\n\t\tlet actionsByNames = {};\r\n\t\tlet builded = _.reduce(actions, (passed, action) => {\r\n\r\n\t\t\taction = this.buildAction(action, options);\r\n\t\t\tif(_.isFunction(buildAction)){\r\n\t\t\t\taction = buildAction(action, options);\r\n\t\t\t}\r\n\t\t\tif(!(action instanceof ActionClass)){\r\n\t\t\t\taction = new ActionClass(action);\r\n\t\t\t}\r\n\t\t\tif (!(action.name in actionsByNames)) {\r\n\t\t\t\tpassed.push(action);\r\n\t\t\t\tactionsByNames[action.name] = action;\r\n\t\t\t}\r\n\t\t\treturn passed;\r\n\t\t}, []);\r\n\r\n\t\tthis.names[name] = {\r\n\t\t\tname, ctor, actions: builded, actionsByNames\r\n\t\t};\r\n\t},\r\n\tgetStore(arg){\r\n\t\tif (_.isString(arg)) {\r\n\t\t\treturn this.names[name];\r\n\t\t} else if (_.isFunction(arg)) {\r\n\t\t\treturn this.getStoreByCtor(arg);\r\n\t\t}\r\n\t},\r\n\tgetActions(arg, options){\r\n\t\tlet cache = this.getStore(arg);\r\n\t\tif(!cache) return [];\r\n\t\treturn _.filter(cache.actions, (action, index) => this.filter(action, index, options));\r\n\t},\r\n\tgetAction(store, action){\r\n\t\tlet cache = this.getStore(store);\r\n\t\tif (!cache) return;\r\n\t\tlet name = _.isString(action) ? action : action.name;\r\n\t\treturn cache.actionsByNames[name];\r\n\t},\r\n\texec(store, action, instance, ...args) {\r\n\t\tlet found = this.getAction(store, action);\r\n\t\tif (!found) {\r\n\t\t\tthrow new Error('action not found:' + action);\r\n\t\t} else {\r\n\t\t\treturn found.exec(instance, ...args);\r\n\t\t}\r\n\t},\r\n\tfilter: () => true,\r\n\tbuildAction: raw => raw,\r\n};\r\n\r\n\r\nexport default store;\r\n","import betterResult from '../../utils/better-result/index.js';\r\nimport Action from './action.js';\r\nimport ActionStore from './store.js';\r\n\r\n\r\nfunction getFromPrototypes(instance, property, { exclude, process } = {}) {\r\n\tif(exclude && !_.isArray(exclude)) {\r\n\t\texclude = [exclude];\r\n\t}\r\n\tif(!_.isFunction(process)) {\r\n\t\tprocess = value => value;\r\n\t}\r\n\tlet prototype = instance.__proto__;\r\n\tlet result = [];\r\n\twhile(prototype){\r\n\t\tlet value = prototype[property];\r\n\t\tprototype = prototype.__proto__;\r\n\r\n\t\tif (value == null) { continue; }\r\n\r\n\t\tif(exclude && exclude.indexOf(value) > -1) { continue; }\r\n\t\t\r\n\t\tvalue = process(value);\r\n\t\tif(value != null) {\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n\r\n\r\nexport default Base => Base.extend({\r\n\t_actionableMixin: true,\r\n\r\n\t\r\n\tinheritActions: false,\r\n\tInstanceAction: Action,\r\n\r\n\tconstructor(){\r\n\t\tBase.apply(this, arguments);\r\n\t},\r\n\t_initializeActionableActions(){\r\n\t\tif (this._actionableActionsInitialized) return;\r\n\t\tif (ActionStore.isNotInitialized(this.actionsStoreName || this.constructor)) {\r\n\t\t\tlet instance = betterResult(this, 'actions', { args: [this], default: [] });\r\n\t\t\tlet inherited = [];\r\n\t\t\tif (this.inheritActions) {\r\n\t\t\t\tlet protoActions = getFromPrototypes(this, 'actions', {\r\n\t\t\t\t\texclude: this.actions,\r\n\t\t\t\t\tprocess: actions => betterResult({ actions }, 'actions', { args: [this], default: [] })\r\n\t\t\t\t});\r\n\t\t\t\tinherited.push(..._.flatten(protoActions));\r\n\t\t\t\tinherited = _.filter(inherited, f => f != null);\r\n\t\t\t}\r\n\t\t\tlet rawactions = [...inherited, ...instance];\r\n\t\t\tActionStore.initialize({\r\n\t\t\t\tname: this.actionsStoreName || this.constructor, \r\n\t\t\t\tactions: rawactions, \r\n\t\t\t\tAction: this.ActionClass,\r\n\t\t\t\tbuildAction: raw => this.buildStoreAction(raw),\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis._actionableActionsInitialized = true;\r\n\r\n\t},\r\n\r\n\tbuildStoreAction: action => action,\r\n\tgetActions(options = {}){\r\n\t\tthis._initializeActionableActions();\r\n\t\treturn ActionStore.getActions(this.actionsStoreName || this.constructor, options);\r\n\t},\r\n\texecuteAction(action){\r\n\t\tthis._initializeActionableActions();\r\n\t\treturn ActionStore.exec(this.actionsStoreName || this.constructor, action, this,  ...arguments);\r\n\t},\r\n}, { ActionableMixin: true });\r\n","import extend from '../../utils/extend/index.js';\r\n\r\nconst errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number', 'url'];\r\nfunction normalizeAppErrorOptions(data = {}){\r\n\tif(_.isString(data)){\r\n\t\tdata = { message: data };\r\n\t}\r\n\treturn data;\r\n}\r\nconst AppError = extend.call(Error, {\r\n\turlRoot: '',\r\n\turl: '',\r\n\tname: 'app:error',\r\n\tconstructor(options){\r\n\t\tif (!(this instanceof AppError)) {\r\n\t\t\treturn new AppError(_.extend({},options,{ newKeywordOmited: true }));\r\n\t\t}\r\n\t\toptions = normalizeAppErrorOptions(options);\r\n\t\tlet url = options.url;\r\n\t\tdelete options.url;\r\n\r\n\t\tconst error = Error.call(this, options.message);\r\n\t\tconst important = {\r\n\t\t\tname: options.name || this.name,\r\n\t\t\tmessage: options.message || this.message,\r\n\t\t};\r\n\t\tif(url || this.url){\r\n\t\t\timportant.url = (this.urlRoot || '') + (url || this.url || '');\r\n\t\t}\r\n\t\toptions.name = important.name;\r\n\t\t_.extend(this, important, _.pick(error, errorProps), options);\r\n\t\r\n\t\tif (Error.captureStackTrace) {\r\n\t\t\tthis.captureStackTrace();\r\n\t\t}\r\n\t\tif (options.url) \r\n\t\t\tthis.url = this.urlRoot + this.url;\r\n\t},\t\r\n\tcaptureStackTrace(){\r\n\t\tError.captureStackTrace(this, this.constructor);\r\n\t},\r\n\ttoString() {\r\n\t\tlet url = this.url ? ` See: ${ this.url }` : '';\r\n\t\treturn `${ this.name }: ${ this.message }${url}`;\r\n\t}\r\n});\r\n// AppError.setUrlRoot = function(url){\r\n// \tthis.prototype.urlRoot = url;\r\n// };\r\nAppError.extend = extend;\r\n\r\n\r\nexport default AppError;\r\n","import { Model, ajax as _nativeAjax } from '../../vendors/backbone.js';\r\nimport Backbone from 'backbone';\r\n\r\n// import Model from '../../b b/model';\r\n\r\nlet nativeAjax = _nativeAjax;\r\n\r\nconst tokenizedAjax = function(...args){\r\n\tlet options;\r\n\r\n\tif(args && args.length == 1 && _.isObject(args[0])){\r\n\t\toptions = args[0];\r\n\t}\r\n\tif(args && args.length == 2 && !_.isObject(args[0]) && _.isObject(args[1])){\r\n\t\toptions = args[1];\r\n\t}\r\n\r\n\toptions && (options.headers = _.extend({}, options.headers, this.getAjaxHeaders()));\r\n\r\n\treturn nativeAjax.apply($, args);\r\n};\r\n\r\n\r\nconst Token = Model.extend({\r\n\r\n\ttokenAttribute: 'access_token',\r\n\trefreshTokenAttribute: 'refresh_token',\r\n\tendPoint: 'auth/token',\r\n\tsecondsOffset: 0,\r\n\r\n\tshouldRequestOnInitialize: true,\r\n\r\n\tconstructor(){\r\n\t\tthis.ajaxHeaders = {};\r\n\t\tthis.flows = {};\r\n\t\tthis.initializeFlows();\r\n\t\tthis.setExpiration(null);\r\n\r\n\t\tModel.apply(this, arguments);\r\n\r\n\t\tif (this.shouldRequestOnInitialize) {\r\n\t\t\tthis.getReady();\r\n\t\t}\r\n\t},\r\n\r\n\tgetReady(){\r\n\t\tif(this.ready) return this.ready;\r\n\t\t\r\n\t\tif (!this.hasToken()) {\r\n\t\t\tthis.ready = Promise.resolve();\r\n\t\t} else {\r\n\t\t\tthis.ready = this.refresh({force: true}).catch(() => {\r\n\t\t\t\tthis.update(null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.ready;\r\n\t},\r\n\t\r\n\r\n\tinitializeFlows(){\r\n\r\n\t\tthis.setFlow('password', {\r\n\t\t\turl: this.endPoint,\r\n\t\t\tmethod: 'POST'\r\n\t\t});\r\n\t\tthis.setFlow('refresh', {\r\n\t\t\turl: this.endPoint,\r\n\t\t\tmethod: 'POST'\r\n\t\t});\r\n\r\n\t},\r\n\tgetFlow(key){\r\n\t\treturn _.clone(this.flows[key] || {});\r\n\t},\r\n\tsetFlow(key, value){\r\n\t\tthis.flows[key] = value;\r\n\t},\r\n\r\n\r\n\r\n\thasToken(){\r\n\t\treturn this.getToken() != null;\r\n\t},\r\n\tgetToken(){\r\n\t\treturn this.get(this.tokenAttribute);\r\n\t},\r\n\r\n\tgetRefreshToken(){\r\n\t\treturn this.get(this.refreshTokenAttribute);\r\n\t},\r\n\r\n\tgetAjaxHeaders(){\t\t\r\n\t\treturn this.ajaxHeaders;\r\n\t},\t\r\n\r\n\tparse(data){\r\n\t\treturn data;\r\n\t},\r\n\r\n\tfetch(options = {}){\r\n\t\tif(this._fetching) return this._fetching;\t\t\r\n\t\tthis._fetching = nativeAjax(options).then(\r\n\t\t\t(json) => {\r\n\r\n\t\t\t\tlet parsed = this.parse(_.clone(json));\r\n\t\t\t\tthis.update(parsed);\r\n\t\t\t\tdelete this._fetching;\r\n\t\t\t\treturn Promise.resolve(json);\r\n\t\t\t}, \r\n\t\t\t(xhr) => {\r\n\t\t\t\t\r\n\t\t\t\tdelete this._fetching;\r\n\t\t\t\t\r\n\t\t\t\toptions.clearOnFail !== false \r\n\t\t\t\t\t&& this.update(null);\r\n\r\n\t\t\t\tlet error = this.handleError(xhr);\r\n\t\t\t\tif(error){\r\n\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(xhr);\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\treturn this._fetching;\r\n\t},\r\n\thandleError(){},\r\n\tupdate(hash, opts = {}){\r\n\t\tlet { silent } = opts;\r\n\t\tif (hash == null) {\r\n\r\n\t\t\tthis.clear(opts);\r\n\r\n\t\t} else {\r\n\t\t\tlet fullhash = _.extend({}, this.attributes, hash);\r\n\t\t\tlet unset = [];\r\n\t\t\tlet shouldUnset = !!opts.unset;\r\n\t\t\tlet setHash = _(fullhash).reduce((memo, value, key) => {\r\n\t\t\t\tif (key in hash) {\r\n\t\t\t\t\tmemo[key] = value;\r\n\t\t\t\t} else if (shouldUnset) {\r\n\t\t\t\t\tunset.push(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmemo[key] = undefined;\r\n\t\t\t\t}\r\n\t\t\t\treturn memo;\r\n\t\t\t}, {});\r\n\r\n\t\t\tsetHash = this.parse(setHash);\r\n\t\t\tthis.set(setHash, { silent });\r\n\t\t\t_(unset).each(key => this.unset(key, { silent }));\r\n\t\t}\r\n\r\n\t\tthis.reflectTokenChanges();\r\n\r\n\t},\r\n\r\n\treplaceBackboneAjax(){\t\t\r\n\t\tif(!this.hasToken())\r\n\t\t\tBackbone.ajax = nativeAjax;\r\n\t\telse\r\n\t\t\tBackbone.ajax = (...args) => this.ajax(...args);\r\n\t},\r\n\tupdateAjaxHeaders(token){\r\n\t\ttoken || (token = this.getToken());\r\n\t\tlet headers = this.getAjaxHeaders();\r\n\t\tif (token) {\r\n\t\t\theaders.Authorization = 'Bearer ' + token;\r\n\t\t\theaders.Accept = 'application/json';\r\n\t\t} else {\r\n\t\t\tdelete headers.Authorization;\r\n\t\t}\r\n\t},\r\n\r\n\t//implement by your own\r\n\tstoreToken(){},\r\n\r\n\treflectTokenChanges(opts = {}){\r\n\t\tlet { silent, store = true } = opts;\r\n\t\tthis.updateAjaxHeaders();\r\n\t\tthis.replaceBackboneAjax();\r\n\t\tif (store)\r\n\t\t\tthis.storeToken();\r\n\t\tif (!silent)\r\n\t\t\tthis.trigger('changed');\r\n\t},\r\n\r\n\tajax(...args){\r\n\t\treturn this.refresh().then(\r\n\t\t\t() => tokenizedAjax.apply(this, args),\r\n\t\t\terror => Promise.reject(error)\r\n\t\t);\r\n\t},\t\r\n\trefresh(opts = {}){\t\t\r\n\r\n\t\t// if token is fresh enough and there is no force refresh\r\n\t\t// pass\r\n\t\tif (!this.isExpired() && !opts.force) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\tlet options = this.getFlow('refresh');\r\n\t\toptions.data = this.getRefreshTokenData();\r\n\t\treturn this.fetch(options);\r\n\t},\r\n\tgetRefreshTokenData(){\r\n\t\treturn {\r\n\t\t\t'grant_type':'refresh_token',\r\n\t\t\t'refresh_token': this.getRefreshToken(),\r\n\t\t};\r\n\t},\r\n\r\n\tsetExpiration(arg){\r\n\r\n\t\tif (arg === null) {\r\n\t\t\tthis.expiresAt = null;\r\n\t\t}\r\n\r\n\t\tlet date;\r\n\t\tlet now = new Date();\r\n\r\n\t\tif (_.isDate(arg)) {\r\n\t\t\tdate = arg;\r\n\t\t} else if(_.isObject(arg)) {\r\n\t\t\tdate = new Date();\r\n\t\t\t\r\n\t\t\tlet { seconds, minutes, hours, days } = arg;\r\n\t\t\tdate.setDate(date.getDate() + (days || 0));\r\n\t\t\tdate.setHours(date.getHours() + (hours || 0));\r\n\t\t\tdate.setMinutes(date.getMinutes() + (minutes || 0));\r\n\t\t\tdate.setSeconds(date.getSeconds() + (seconds || 0));\r\n\t\t}\r\n\r\n\t\tif(!_.isDate(date) || isNaN(date.valueOf()) || date < now) {\r\n\t\t\tdate = new Date();\r\n\t\t\tdate.setSeconds(now.getSeconds() + 90);\r\n\t\t}\r\n\r\n\t\tthis.expiresAt = date;\r\n\t},\r\n\tgetExpiration(){\r\n\t\treturn this.expiresAt;\r\n\t},\r\n\tisExpired(){\r\n\t\tlet date = this.getExpiration();\r\n\t\tif(!_.isDate(date) || isNaN(date.valueOf()))\r\n\t\t\treturn true;\r\n\t\treturn date.valueOf() < Date.now() + (this.secondsOffset * 1000);\r\n\t},\r\n\tlogin(username, password){\r\n\r\n\t\tlet options = this.getFlow('password');\r\n\t\toptions.data = { grant_type:'password', username, password };\r\n\t\toptions.clearOnFail = false;\r\n\t\treturn this.fetch(options);\r\n\r\n\t},\r\n\r\n});\r\n\r\nToken.setNativeAjax = function(arg){\r\n\tlet old = nativeAjax;\r\n\tnativeAjax = arg;\r\n\treturn old;\r\n};\r\n\r\nexport default Token;\r\n","import { Region } from '../../vendors/marionette.js';\r\n\r\nexport const config = {\r\n\tdestroySelfOnEmpty: false,\r\n\tdestroyOnEmpty: false,\r\n};\r\n\r\nconst BaseNodeRegion = Region.extend({\r\n\tonEmpty() {\r\n\t\tlet destroySelf = this.getOption('destroySelfOnEmpty') || this.getOption('destroyOnEmpty');\r\n\t\tlet destroyNode = this.getOption('destroyOnEmpty');\r\n\t\tdestroySelf && this.destroy();\r\n\t\tdestroyNode && this.el.remove();\r\n\t}\r\n});\r\n\r\nconfig.Region = BaseNodeRegion;\r\n\r\nfunction normalizeElement(selector) {\r\n\tlet body = document.querySelector('body');\r\n\tlet el;\r\n\tif (selector == null) {\r\n\t\tel = body;\r\n\t} else if( selector instanceof Element) {\r\n\t\tel = selector;\r\n\t}\r\n\telse if(selector && selector.jquery){\r\n\t\tel = selector.get(0);\r\n\t} else if (_.isString(selector)) {\r\n\t\tel = document.querySelector(selector);\r\n\t}\r\n\tif (el instanceof Element) {\r\n\t\treturn el;\r\n\t} else {\r\n\t\tthrow new Error('el must be in Dom');\t\t\r\n\t}\r\n}\r\n\r\nexport default function renderInNode(view, { el, replaceElement = false, destroySelfOnEmpty = config.destroySelfOnEmpty, destroyOnEmpty = config.destroyOnEmpty  } = {}) {\r\n\tconst NodeRegion = config.Region;\r\n\tel = normalizeElement(el);\r\n\tconst body = document.querySelector('body');\r\n\tif (el === body) {\r\n\t\tel = document.createElement('div');\r\n\t\tbody.appendChild(el);\r\n\t\treplaceElement = true;\r\n\t}\r\n\tconst region = new NodeRegion({ el, replaceElement, destroySelfOnEmpty, destroyOnEmpty });\r\n\tregion.show(view);\r\n\treturn region;\r\n}\r\n","import { Events } from '../../vendors/backbone.js';\r\nimport triggerMethod from '../../utils/trigger-method/index.js';\r\nimport { instanceGetOption as getOption} from '../../utils/get-option/index.js';\r\n\r\nconst ViewStack = function(options = {}){\r\n\tthis.cid = _.uniqueId('stack');\r\n\tthis.unremovableKey = `_${this.cid}_preventRemove`;\r\n\tthis.destroyOnRemove = true;\r\n\tthis.removeOnEsc = true,\r\n\tthis.removeOnOutsideClick = true,\r\n\tthis.options = options;\r\n\tthis.stack = [];\r\n};\r\n_.extend(ViewStack.prototype, Events, {\r\n\r\n\r\n\tadd(view, options){\r\n\t\tif(!_.isObject(view)) { return; }\r\n\t\tif (this.getOption('clearBeforeAdd')) {\r\n\t\t\tthis.removeAll();\r\n\t\t}\r\n\t\tthis.triggerMethod('before:add');\r\n\r\n\t\tthis.stack.push(view);\r\n\t\tthis._setupView(view, options);\r\n\r\n\t\tthis._stackChanged(1, view);\r\n\r\n\t},\r\n\t_setupView(view, { preventRemove } = {}){\r\n\t\tif (preventRemove) {\r\n\t\t\tlet key = this.getUnremovableKey();\r\n\t\t\tview[key] = true;\r\n\t\t}\r\n\t\tthis.listenToOnce(view, 'destroy', () => this._removeView(view, { selfDestroy: true }));\t\t\r\n\t},\r\n\tremove(view, { destroy } = {}){\r\n\t\tlet destroyOnRemove = this.getOption('destroyOnRemove');\r\n\t\tlet removed = this._removeView(view);\r\n\t\tif (removed && (destroy || destroyOnRemove)) {\r\n\t\t\tthis._destroyView(view);\r\n\t\t}\r\n\t},\r\n\tgetLast(){\r\n\t\treturn _.last(this.stack);\r\n\t},\r\n\tremoveLast(){\r\n\t\tlet view = this.getLast();\r\n\t\tthis.remove(view);\r\n\t},\r\n\tdestroyLast(){\r\n\t\tlet view = this.getLast();\r\n\t\tthis.remove(view, { destroy: true });\r\n\t},\r\n\r\n\r\n\t_removeView(view, { selfDestroy } = {}){\r\n\t\tif (!_.isObject(view)) { return; }\r\n\r\n\t\tif (this.isViewUnremovable(view, selfDestroy)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._cleanUpView(view);\r\n\r\n\t\tlet index = this.stack.indexOf(view);\r\n\t\tif (index === -1) return;\r\n\r\n\t\tif (index == this.stack.length - 1)\r\n\t\t\tthis.stack.pop();\r\n\t\telse\r\n\t\t\tthis.stack.splice(index, 1);\r\n\t\t\t\r\n\t\tthis._stackChanged(-1);\r\n\r\n\t\treturn view;\r\n\t},\r\n\t_cleanUpView(view){\r\n\t\tthis.stopListening(view);\r\n\t\tdelete view[this.getUnremovableKey()];\r\n\t},\r\n\t_destroyView(view) {\r\n\t\tif (_.isObject(view) && _.isFunction(view.destroy)) { \r\n\t\t\tview.destroy();\r\n\t\t}\r\n\t},\t\r\n\t_stackChanged(change, view){\r\n\t\tif (change > 0) {\r\n\t\t\tthis._setDocumentListeners();\t\t\t\r\n\t\t\tthis.triggerMethod('add', view);\r\n\t\t} else {\r\n\t\t\tthis._unsetDocumentListeners();\t\t\t\r\n\t\t\tthis.triggerMethod('remove', view);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tUnremovable view methods\r\n\t\tsometimes you want to prevent view to be removed from the stack\t\t\r\n\t*/\r\n\tgetUnremovableKey(){\r\n\t\treturn this.getOption('unremovableKey');\r\n\t},\r\n\t// options is for internal use only.\r\n\t// self destroy flag filled when a view destroyed outside the stack\r\n\tisViewUnremovable(view, { selfDestroy }={}){\r\n\t\tif (selfDestroy) return false;\r\n\t\tlet key = this.getUnremovableKey();\r\n\t\treturn view[key];\r\n\t},\t\r\n\r\n\r\n\t/*\r\n\t\tDOM listeners logic\r\n\t\t- esc handler\r\n\t\t- outside click handler\r\n\t*/\r\n\tgetViewDomElement(view){\r\n\t\treturn view && view.el;\r\n\t},\r\n\tisElementOutsideOfView(eventElement, view){\r\n\t\tlet viewElement = this.getViewDomElement(view);\r\n\t\tif (!viewElement) return;\r\n\t\treturn !$.contains(viewElement, eventElement);\r\n\t},\r\n\tgetViewIfElementOutside(eventElement){\r\n\t\tlet view = this.getLast();\r\n\t\tif (!view) return;\r\n\t\tif(this.isElementOutsideOfView(eventElement, view)) {\r\n\t\t\treturn view;\r\n\t\t}\r\n\t},\r\n\toutsideClickHandler(event){\r\n\t\tif (!this.stack.length) { return; }\r\n\r\n\t\tlet view = this.getViewIfElementOutside(event.target);\r\n\t\tif (!view) { return; }\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\tthis.remove(view);\r\n\r\n\t},\r\n\tescapePressHandler(event){\r\n\t\tif (!this.stack.length || event.keyCode !== 27 ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\tthis.removeLast();\r\n\r\n\t},\r\n\r\n\t_setDocumentListeners(){\r\n\t\tif (this._documentListeners || !this.stack.length) return;\r\n\t\tlet $doc = this.getDocument();\r\n\t\tif (this._shouldRemoveOnEsc()) {\t\t\t\r\n\t\t\tthis._escapePressHandler = _.bind(this.escapePressHandler, this);\r\n\t\t\t$doc.on('keyup', this._escapePressHandler);\r\n\t\t\tthis.triggerMethod('dom:listeners:escape:on');\r\n\t\t}\r\n\t\tif (this._shouldRemoveOnOutsideClick()) {\r\n\t\t\tthis._outsideClickHandler = _.bind(this.outsideClickHandler, this);\r\n\t\t\t$doc.on('click', this._outsideClickHandler);\r\n\t\t\tthis.triggerMethod('dom:listeners:click:on');\r\n\t\t}\r\n\t\tthis.triggerMethod('dom:listeners:on');\r\n\t\tthis._documentListeners = true;\r\n\t},\r\n\t_unsetDocumentListeners(){\r\n\t\tif (!(this._documentListeners && !this.stack.length)) return;\r\n\t\tlet $doc = this.getDocument();\r\n\t\tif (this._escapePressHandler) {\r\n\t\t\t$doc.off('keyup', this._escapePressHandler);\r\n\t\t\tdelete this._escapePressHandler;\r\n\t\t\tthis.triggerMethod('dom:listeners:escape:off');\r\n\t\t}\r\n\t\tif(this._outsideClickHandler) {\r\n\t\t\t$doc.off('click', this._outsideClickHandler);\r\n\t\t\tdelete this._outsideClickHandler;\r\n\t\t\tthis.triggerMethod('dom:listeners:click:off');\r\n\t\t}\r\n\t\tthis.triggerMethod('dom:listeners:off');\r\n\t\tthis._documentListeners = false;\r\n\t},\r\n\t_shouldRemoveOnEsc(){\r\n\t\treturn this.getOption('removeOnEsc') === true;\r\n\t},\r\n\t_shouldRemoveOnOutsideClick(){\r\n\t\treturn this.getOption('removeOnOutsideClick') === true;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\thelper methods\r\n\t*/\r\n\tgetOption,\r\n\ttriggerMethod,\r\n\r\n\tgetDocument(){\r\n\t\treturn this.$doc || $(document);\r\n\t},\r\n\tisDestroyed(){\r\n\t\treturn this._isDestroyed || this._isDestroying;\r\n\t},\r\n\tremoveAll(){\r\n\t\twhile(this.stack.length){\r\n\t\t\tthis.destroyLast();\r\n\t\t}\r\n\t},\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\t\t\r\n\t\tthis._isDestroying = true;\r\n\r\n\t\tthis.triggerMethod('before:destroy');\r\n\r\n\t\tthis.removeAll();\r\n\r\n\t\tlet $doc = this.getDocument();\r\n\t\t$doc.off('keyup', this._onKeyUp);\r\n\t\t$doc.off('click', this._outsideClick);\r\n\r\n\t\tthis._isDestroyed = true;\r\n\t\tthis.triggerMethod('destroy');\r\n\t},\r\n});\r\nexport default ViewStack;\r\n","export default CollectionView => CollectionView.extend({\r\n\tshouldHandleEmptyFetch: true, \r\n\tconstructor(){\r\n\t\tCollectionView.apply(this, arguments);\r\n\r\n\t\tthis.getOption('shouldHandleEmptyFetch') && this.emptyView\r\n\t\t\t&& this._handleEmptyFetch();\r\n\t},\r\n\t_handleEmptyFetch(){\r\n\t\tif (!this.collection || this.collection.length) { return; }\r\n\r\n\t\tthis.listenToOnce(this.collection, 'sync', \r\n\t\t\t() => !this.collection.length && this._renderChildren()\r\n\t\t);\r\n\r\n\t},\r\n});\r\n","function rebuildIndexes() {\r\n\tif (!this.getOption('shouldRebuildIndexes') || !this.collection) {\r\n\t\treturn;\r\n\t}\r\n\tlet models = this.collection.models;\r\n\tfor (let index = 0, length = models.length; index < length; index++) {\r\n\t\tlet model = models[index];\r\n\t\tlet view = this._children.findByModel(model);\r\n\t\tview && (view._index = index);\r\n\t}\r\n}\r\n\r\nexport default CollectionView => CollectionView.extend({\r\n\tshouldRebuildIndexes: true,\r\n\r\n\tconstructor() {\t\t\r\n\t\t\r\n\t\tCollectionView.apply(this, arguments);\r\n\t\tthis.on('before:sort', rebuildIndexes.bind(this));\r\n\t\t// if (this.collection) {\r\n\t\t// \trebuildIndexes.call(this);\r\n\t\t// \tthis.listenTo({\r\n\t\t// \t\t'update': rebuildIndexes.bind(this),\r\n\t\t// \t\t'sort': rebuildIndexes.bind(this),\r\n\t\t// \t\t'reset': rebuildIndexes.bind(this),\r\n\t\t// \t});\r\n\t\t// }\r\n\t},\r\n\t_addChild(view, index){\r\n\t\tview._isModelView = arguments.length === 1;\r\n\t\tif (index != null) {\r\n\t\t\tview._index = index;\r\n\t\t}\r\n\t\treturn CollectionView.prototype._addChild.apply(this, arguments);\r\n\t},\r\n\t_viewComparator(v1,v2){\r\n\t\tlet res = v1._index - v2._index;\r\n\t\tif (res) return res;\r\n\t\tif (v1._isModelView) return 1;\r\n\t\treturn -1;\r\n\t},\r\n});\r\n","export default CollectionView => CollectionView.extend({\r\n\t_renderChildren() {\r\n\t\t// If there are unrendered views prevent add to end perf\r\n\t\tif (this._hasUnrenderedViews) {\r\n\t\t\tdelete this._addedViews;\r\n\t\t\tdelete this._hasUnrenderedViews;\r\n\t\t}\r\n\r\n\t\tconst views = this._addedViews || this.children._views;\r\n\r\n\t\tthis.triggerMethod('before:render:children', this, views);\r\n\t\r\n\t\tthis._showEmptyView();\r\n\t\r\n\t\tconst els = this._getBuffer(views);\r\n\t\r\n\t\tthis._attachChildren(els, views);\r\n\t\r\n\t\tdelete this._addedViews;\r\n\t\r\n\t\tthis.triggerMethod('render:children', this, views);\r\n\t},\r\n\taddChildView(view, index, options = {}) {\r\n\t\tif (!view || view._isDestroyed) {\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tif (_.isObject(index)) {\r\n\t\t\toptions = index;\r\n\t\t}\r\n\r\n\t\t// If options has defined index we should use it\r\n\t\tif (options.index != null) {\r\n\t\t\tindex = options.index;\r\n\t\t}\r\n\r\n\t\tif (!this._isRendered && !options.preventRender) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tthis._addChild(view, index);\r\n\r\n\t\tif (options.preventRender) {\r\n\t\t\tthis._hasUnrenderedViews = true;\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tconst hasIndex = (typeof index !== 'undefined');\r\n\t\tconst isAddedToEnd = !hasIndex || index >= this._children.length;\r\n\r\n\t\t// Only cache views if added to the end and there is no unrendered views\r\n\t\tif (isAddedToEnd && !this._hasUnrenderedViews) {\r\n\t\t\tthis._addedViews = [view];\r\n\t\t}\r\n\t\t\r\n\t\tif (hasIndex) {\r\n\t\t\tthis._renderChildren();\r\n\t\t} else {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\r\n\t\treturn view;\r\n\t},\r\n\t_showEmptyView() {\r\n\r\n\t\tthis._destroyEmptyView();\r\n\t\r\n\t\tif(!this.isEmpty()) { return; }\r\n\r\n\t\tconst EmptyView = this._getEmptyView();\t\r\n\t\tif (!EmptyView) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tconst options = this._getEmptyViewOptions();\r\n\t\tthis._emptyViewInstance = new EmptyView(options);\r\n\t\r\n\t\tthis.addChildView(this._emptyViewInstance, { preventRender: true, index: 0, });\r\n\t\r\n\t},\r\n\t_destroyEmptyView(){\r\n\t\tlet view = this._emptyViewInstance;\r\n\t\tif (!view) return;\r\n\t\r\n\t\tthis._removeChildView(view);\r\n\t\r\n\t\tthis._removeChild(view);\r\n\t\r\n\t\tview.destroy();\r\n\t\tdelete this._emptyViewInstance;\r\n\t},\r\n}, { CollectionViewMixin_4x: true});\r\n","import { isView, isViewClass } from '../../../vendors/helpers.js';\r\nimport betterResult from '../../../utils/better-result/index.js';\r\nexport default Base => Base.extend({\r\n\t\r\n\trenderAllCustoms: false,\r\n\tshouldMergeCustoms: false,\r\n\trenderCollection: true,\r\n\r\n\tconstructor(){\r\n\t\tthis._customs = [];\t\t\r\n\t\tBase.apply(this, arguments);\r\n\t\tif (this.getOption('renderCollection') === false && this.collection) {\r\n\t\t\tthis._collection = this.collection;\r\n\t\t\tdelete this.collection;\r\n\t\t}\r\n\t\tthis._initializeCustoms();\r\n\t},\r\n\tgetCollection(){\r\n\t\treturn this.collection || this._collection;\r\n\t},\r\n\t_initializeCustoms(){\r\n\r\n\t\tlet optionsCustoms = betterResult(this.options, 'customs', { args: [this], context: this });\r\n\t\tlet instanceCustoms = betterResult(this, 'customs', { args: [this] });\r\n\t\tlet shouldMergeCustoms = this.getOption('shouldMergeCustoms');\r\n\t\tlet add;\r\n\t\tif (shouldMergeCustoms) {\r\n\t\t\tadd = (instanceCustoms || []).concat(optionsCustoms || []);\t\t\t\r\n\t\t} else {\r\n\t\t\tadd = instanceCustoms || optionsCustoms || [];\r\n\t\t}\r\n\t\tthis._customs.push(...add);\r\n\r\n\t\tif (this.getOption('renderAllCustoms')) {\r\n\t\t\tthis.on('render', this._renderCustoms);\r\n\t\t}\r\n\t},\r\n\trenderCustoms(){\r\n\t\tthis.triggerMethod('before:customs:render');\r\n\r\n\t\t_.each(this._renderedCustoms, view => view.destroy());\r\n\t\t\r\n\t\tlet customs = this.getCustoms();\r\n\t\t\r\n\t\tthis._renderedCustoms = this.addChildViews(customs);\r\n\r\n\t\tthis.triggerMethod('customs:render');\r\n\t},\r\n\t_renderCustoms(){\r\n\t\tif (!this.getOption('renderAllCustoms')) return;\r\n\t\tthis.renderCustoms();\r\n\t},\r\n\tgetCustoms() {\t\t\r\n\t\treturn this._prepareCustoms(this._customs.slice(0));\r\n\t},\r\n\t_prepareCustoms(rawcustoms){\r\n\t\treturn _.reduce(rawcustoms, (array, item) => {\r\n\t\t\tlet args = this._prepareCustom(item);\r\n\t\t\targs && (args = this.buildCustom(...args));\r\n\t\t\targs && array.push(args);\r\n\t\t\treturn array;\r\n\t\t},[]);\r\n\t},\r\n\t_prepareCustom(arg){\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\treturn this._prepareCustom(arg.call(this, this));\r\n\t\t} else if (_.isArray(arg)) {\r\n\t\t\treturn arg;\r\n\t\t} else {\r\n\t\t\treturn [arg, { index: 0 }];\r\n\t\t}\r\n\t},\r\n\tbuildCustom(view, options = {}){ \r\n\t\tif (isViewClass(view)) {\r\n\t\t\tlet childOptions = this.getOption('customViewOptions');\r\n\t\t\tview = new view(childOptions);\r\n\t\t} else if (_.isFunction(view)) {\r\n\t\t\tview = view.call(this, this);\r\n\t\t} else if(!isView(view) && _.isObject(view) && 'view' in view) {\r\n\t\t\tif(isView(view.view)) {\r\n\t\t\t\tif(_.isObject(view.options))\r\n\t\t\t\t\toptions = view.options;\r\n\t\t\t\tview = view.view;\r\n\t\t\t} else if(isViewClass(view.view)) {\r\n\t\t\t\tlet viewOptions = view.options;\r\n\t\t\t\tview = new view.view(viewOptions);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isView(view)) {\r\n\t\t\tthis._setupCustom(view);\r\n\t\t\treturn [view, options]; \r\n\t\t}\r\n\t},\r\n\t_setupCustom(view){\r\n\t\tthis.setupCustom(view);\r\n\t},\r\n\tsetupCustom: _.noop,\r\n\taddChildViews(children = []){\r\n\t\tif (!children.length) { return; }\r\n\r\n\t\tlet awaitingRender = false;\r\n\t\tlet rendered = [];\r\n\t\twhile(children.length) {\r\n\r\n\t\t\tlet args = children.pop();\r\n\t\t\tif (!args) { continue; }\r\n\r\n\t\t\tif (!_.isArray(args)) {\r\n\t\t\t\targs = [args, { index: 0 }];\r\n\t\t\t}\r\n\r\n\t\t\tlet [ view, index, options = {} ] = args;\r\n\t\t\tif (_.isObject(index)) {\r\n\t\t\t\toptions = index;\r\n\t\t\t\tindex = undefined;\r\n\t\t\t}\r\n\t\t\tif (index != null && !('index' in options)) {\r\n\t\t\t\toptions.index = index;\r\n\t\t\t}\r\n\t\t\toptions.preventRender = !!children.length;\r\n\t\t\tif (!isView(view)) { continue; }\r\n\r\n\t\t\tthis.addChildView(view, options);\r\n\t\t\trendered.push(view);\r\n\t\t\tawaitingRender = options.preventRender;\r\n\t\t}\r\n\t\tif (awaitingRender) {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\treturn rendered;\r\n\t},\r\n}, { CustomsMixin: true });\r\n","import { BackboneView } from '../../vendors/backbone.js';\r\nimport triggerMethod from '../../utils/trigger-method/index.js';\r\n\r\nexport default BackboneView.extend({\r\n\tsupportsDestroyLifecycle: true,\r\n\r\n\tconstructor({ text } = {}){\r\n\t\tBackboneView.apply(this, arguments);\r\n\t\tthis.setText(text);\r\n\t},\r\n\trender(){\r\n\t\tthis.$el.html(this.text);\r\n\t\tthis._isRendered = true;\r\n\t\treturn this;\r\n\t},\r\n\tisRendered(){\r\n\t\treturn this._isRendered === true;\r\n\t},\r\n\tsetText(text){\r\n\t\tthis.text = text;\r\n\t\tif(this.isRendered()) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\ttriggerMethod,\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\r\n\t\tthis._isDestroying = true;\r\n\r\n\t\tthis.triggerMethod('before:destroy', this);\r\n\t\t\r\n\t\tif (this._isAttached) {\r\n\t\t\tthis.triggerMethod('before:detach', this);\r\n\t\t}\r\n\t\t\r\n\t\tthis.remove();\r\n\t\t\r\n\t\tif (this._isAttached) {\r\n\t\t\tthis._isAttached = false;\r\n\t\t\tthis.triggerMethod('detach', this);\r\n\t\t}\r\n\t\t\r\n\t\tthis._isDestroyed = true;\r\n\t\r\n\t\tthis.triggerMethod('destroy', this);\r\n\t}\r\n});\r\n","import { isView, isViewClass } from '../../vendors/helpers.js';\r\nimport mix from '../../utils/mix/index.js';\r\n\r\n\r\nimport { customs, nextCollectionView } from '../../mixins/collection-view/index.js';\r\nimport { destroy } from '../../mixins/view/index.js';\r\nimport TextView from '../text-view/index.js';\r\n\r\nexport default CollectionView => {\r\n\tlet Mixed = CollectionView;\r\n\tlet mixWith = [];\r\n\r\n\tif (!Mixed.DestroyMixin) {\r\n\t\tmixWith.push(destroy);\r\n\t}\r\n\tif (!Mixed.CollectionViewMixin_4x) {\r\n\t\tmixWith.push(nextCollectionView);\r\n\t}\r\n\r\n\tif (!Mixed.CustomsMixin) {\r\n\t\tmixWith.push(customs);\r\n\t}\r\n\r\n\tif (mixWith.length) {\r\n\t\tMixed = mix(Mixed).with(...mixWith);\r\n\t}\r\n\r\n\treturn Mixed.extend({\r\n\t\tviewComparator:false,\r\n\t\twrapContent: true,\r\n\t\tchildViewContainer: '[data-modal-content]',\r\n\t\trenderAllCustoms: true,\r\n\t\ttemplateContext(){\r\n\t\t\treturn {\r\n\t\t\t\tshouldWrapContent: this.getOption('wrapContent') === true,\r\n\t\t\t};\r\n\t\t},\r\n\t\tevents:{\r\n\t\t\t'click'(event){\r\n\t\t\t\tif(this.getOption('preventRemove')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet $el = $(event.target);\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tif ($el.closest('[data-modal-content]').length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.destroy();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcustoms:[\r\n\t\t\t(v) => v.createCloseButton(),\r\n\t\t\t(v) => v.takeOptionsView('header'),\r\n\t\t\t(v) => v.takeOptionsView('content'),\r\n\t\t\t(v) => v.takeOptionsView('footer'),\r\n\t\t],\r\n\t\tcreateCloseButton(){\r\n\t\t\tif (!this.getOption('closeButton') || this.getOption('preventRemove')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet Button = this.getOption('closeButtonView');\r\n\t\t\tif (!isViewClass(Button)) {\r\n\t\t\t\tthrow new Error('CloseButtonView not defined in modals config');\r\n\t\t\t}\r\n\t\t\tlet view = new Button({ attributes: { 'data-modal-close':'' } });\r\n\t\t\tthis.listenTo(view, 'click', this.destroy);\r\n\t\t\treturn view;\r\n\t\t},\r\n\t\ttakeOptionsView(key){\r\n\t\t\tlet view = this.getOption(key);\r\n\t\t\tlet _view;\r\n\t\t\tif(!view) {\t\t\t\r\n\t\t\t\treturn view;\r\n\t\t\t} else if(isView(view)) {\r\n\t\t\t\t_view = view;\r\n\t\t\t}\r\n\t\t\telse if(_.isString(view)){\t\t\t\r\n\t\t\t\tlet tagName = ['header','footer'].indexOf(key) > -1 ? key : 'div';\r\n\t\t\t\tlet View = this.getOption('textView') || TextView;\r\n\t\t\t\t_view = new View({ text: view, tagName });\r\n\t\t\t} else if(isViewClass(view)) {\r\n\t\t\t\tlet options = this.getOption(key+'Options');\r\n\t\t\t\t_view = new view(options);\r\n\t\t\t}\r\n\t\t\tif(_view){\r\n\t\t\t\t!this.modalChildren && (this.modalChildren = {});\r\n\t\t\t\tthis.modalChildren[key] = _view;\r\n\t\t\t\tif (key === 'content') {\r\n\t\t\t\t\tthis._initContentListeners(_view);\r\n\t\t\t\t}\r\n\t\t\t\treturn _view;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initContentListeners(content){\r\n\t\t\tthis.listenTo(content, {\r\n\t\t\t\t'destroy': () => this.destroy(),\r\n\t\t\t\t'done': () => this.destroy(),\r\n\t\t\t});\r\n\t\t},\r\n\t\tattributes:{\r\n\t\t\t'data-modal': ''\r\n\t\t},\r\n\t});\r\n};\r\n","import { isViewClass } from '../../vendors/helpers.js';\r\nimport renderInNode from '../../components/render-in-node/index.js';\r\nimport { View as MnView } from '../../vendors/marionette.js';\r\nimport ViewStack from '../../components/view-stack/index.js';\r\nimport ViewMixin from './view-mixin.js';\r\n\r\nexport default {\r\n\t\r\n\ttemplate: _.template(`\r\n<div data-modal-bg></div>\r\n<% if(shouldWrapContent) {%><div data-modal-content-wrapper><%} %>\r\n<section data-modal-content></section>\r\n<% if(shouldWrapContent) {%></div><%} %>\r\n`),\r\n\r\n\tBaseView: undefined,\r\n\tTextView: undefined,\r\n\tModalView: undefined,\r\n\tCloseButtonView: undefined,\r\n\r\n\tbuildView(options, View){\r\n\t\tif(!isViewClass(View)) {\r\n\t\t\tif (!this.ModalView) {\r\n\t\t\t\tif (!this.BaseView) {\r\n\t\t\t\t\tthrow new Error('modals config has no View defined. please set View or BaseView');\r\n\t\t\t\t}\r\n\t\t\t\tthis.ModalView = ViewMixin(this.BaseView);\r\n\t\t\t}\r\n\t\t\tView = this.ModalView;\r\n\t\t}\r\n\t\toptions = _.extend({ \r\n\t\t\ttextView: this.TextView || MnView, \r\n\t\t\tcloseButtonView: this.CloseButtonView || MnView,\r\n\t\t\ttemplate: this.template,\r\n\t\t}, options);\r\n\t\treturn new View(options);\r\n\t},\r\n\trender(view, stack, options = {}){\r\n\t\tlet el = _.result(this, 'container');\r\n\t\tif(el && el.jquery){\r\n\t\t\tel = el.get(0);\r\n\t\t}\r\n\t\toptions = _.extend({ \r\n\t\t\tel, replaceElement: true, destroyOnEmpty: true,\t\t\t\r\n\t\t}, options);\r\n\r\n\t\trenderInNode(view, options);\r\n\r\n\t\tif (stack) {\r\n\t\t\tlet { preventRemove } = options;\r\n\t\t\tstack.add(view, { preventRemove });\r\n\t\t}\r\n\t},\r\n\tcontainer: () => document.querySelector('body'),\r\n\tstackOptions: {\r\n\t\tremoveOnEsc: true,\r\n\t\tremoveOnOutsideClick: true,\r\n\t},\r\n\tgetStack(options){\r\n\t\tif (!this.stack) {\r\n\t\t\tlet stackOptions = this.stackOptions || options;\r\n\t\t\tthis.stack = new ViewStack(stackOptions);\r\n\t\t}\r\n\t\treturn this.stack;\r\n\t}\r\n};\r\n\r\n","import config from './config.js';\r\n\r\nfunction show(opts = {}, showOptions = {}){\r\n\r\n\tlet { preventRemove, promise } = opts;\r\n\r\n\tlet modal = config.buildView(opts);\r\n\tshowOptions.preventRemove = preventRemove;\r\n\tconfig.render(modal, config.getStack(), showOptions);\r\n\r\n\tif (promise) {\r\n\t\treturn modal.promise;\r\n\t} else {\r\n\t\treturn modal;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport default {\r\n\tconfig,\r\n\tshow\r\n};\r\n","import BaseModel from '../base-object/index.js';\r\nimport getOption from '../../mixins/common/get-option/index.js';\r\n\r\nconst Schema = getOption(BaseModel);\r\nexport default Schema;\r\n","import { betterResult } from '../../utils/index.js';\r\nimport Schema from './schema.js';\r\n\r\n// export default function PropertySchema({ name, property, modelSchema, order = 0 }){\r\n// \tthis.name = name;\r\n// \tthis.schema = _.extend({}, property);\t\r\n// \tthis.modelSchema = modelSchema;\r\n// \tif (this.schema.order != null)\r\n// \t\torder = this.schema.order;\r\n// \tthis.order = order;\r\n// }\r\nexport default Schema.extend({\r\n\tconstructor(options = {}){\r\n\t\tSchema.apply(this, arguments);\r\n\t\tlet { name, property, modelSchema, order = 0 } = options;\r\n\t\tthis.name = name;\r\n\t\tthis.schema = _.extend({}, property);\t\r\n\t\tthis.modelSchema = modelSchema;\r\n\t\tif (this.schema.order != null)\r\n\t\t\torder = this.schema.order;\r\n\t\tthis.order = order;\r\n\t},\r\n\tgetValidation() {\r\n\t\treturn this.schema.validation || {};\r\n\t},\r\n\tgetType() {\r\n\t\treturn this.schema.value || {};\r\n\t},\r\n\tgetDisplay(){\r\n\t\treturn this.schema.display || {};\r\n\t},\r\n\tgetLabel(value, hash){\r\n\t\tlet label = this.getDisplay().label;\r\n\t\treturn betterResult({ label },'label', { args: [value, hash] });\r\n\t},\r\n\tgetEditView(){},\r\n});\r\n","import Schema from './schema.js';\r\nimport PropertySchema from './property-schema.js';\r\nimport isEmptyValue from '../../utils/is-empty-value/index.js';\r\n\r\nexport default Schema.extend({\r\n\tconstructor(properties = {}){\r\n\t\tthis.properties = {};\r\n\t\tSchema.apply(this,arguments);\r\n\t\tthis.setProperties(properties);\r\n\t},\r\n\tpropertySchema: PropertySchema,\r\n\t_createProperty(property){\r\n\t\tlet props = this.getProperties();\r\n\t\tlet order = _.size(props);\r\n\t\tlet Schema = this.getOption('propertySchema');\r\n\t\tlet options = { name: property.name, property, modelSchema: this, order };\r\n\t\treturn this.createProperty(Schema, options);\r\n\t},\r\n\tcreateProperty(Schema, options){\r\n\t\treturn new Schema(options);\r\n\t},\r\n\tsetProperties(properties){\r\n\t\treturn _.map(properties, (property, name) => {\r\n\t\t\tif(!_.isObject(property)) { return; }\r\n\r\n\t\t\tlet propertyName = _.isString(name) ? name : property.name;\r\n\t\t\tif (isEmptyValue(propertyName)) {\r\n\t\t\t\tthrow new Error('property name missing: ' + name);\r\n\t\t\t}\t\t\t\r\n\t\t\treturn this.setProperty(propertyName, property);\r\n\r\n\t\t});\r\n\t},\r\n\tgetProperties(){\r\n\t\treturn this.properties;\r\n\t},\r\n\tgetPropertiesArray(){\r\n\t\tlet props = this.getProperties();\r\n\t\treturn _.toArray(props)\r\n\t\t\t.sort((p1,p2) => p1.order - p2.order);\t\t\r\n\t},\r\n\tgetPropertiesNames(){\r\n\t\tlet props = this.getPropertiesArray();\r\n\t\treturn _.pluck(props, 'name');\r\n\t},\r\n\tgetProperty(name, { create = false } = {}){\r\n\t\tlet properties = this.getProperties() || {};\r\n\t\tlet property = properties[name];\r\n\t\tif(property || !create) {\r\n\t\t\treturn property;\r\n\t\t}\r\n\t\tproperty = this._createProperty(name);\r\n\t\treturn this.setProperty(name, property);\r\n\t},\r\n\t_setProperty(name, property){\r\n\t\tif(!_.isObject(property)){\r\n\t\t\tthrow new Error('property is not an object', property);\r\n\t\t}\r\n\t\tif(isEmptyValue(name)){\r\n\t\t\tthrow new Error('property has no name', property);\r\n\t\t}\r\n\r\n\t\tif (isEmptyValue(property.name)) {\r\n\t\t\tproperty.name = name;\r\n\t\t}\r\n\r\n\t\tif(!(property instanceof PropertySchema)){\r\n\t\t\tproperty = this._createProperty(property);\r\n\t\t}\r\n\r\n\t\tlet properties = this.getProperties();\r\n\t\tproperties[property.name] = property;\r\n\r\n\t\treturn property;\r\n\t},\r\n\tsetProperty(name, property) {\r\n\t\tif(_.isObject(name)){\r\n\t\t\tproperty = name;\r\n\t\t\tname = property.name;\r\n\t\t}\r\n\t\treturn this._setProperty(name, property);\r\n\t},\r\n\tgetValidation(name) {\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getValidation() || {};\r\n\t},\r\n\tgetType(name) {\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getType() || {};\r\n\t},\r\n\tgetLabel(name){\r\n\t\tlet property = this.getProperty(name);\r\n\t\treturn property && property.getLabel() || '';\r\n\t}\r\n});\r\n","import ModelSchema from './model-schema.js';\r\n\r\nconst store = {\r\n\tschemas: {},\r\n\tgetStoreName(arg){\r\n\t\tif(_.isString(arg) && arg !== '') {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tlet store = this.getStoreByCtor(arg);\r\n\t\t\tif (store) {\r\n\t\t\t\treturn store.name;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _.uniqueId('modelSchema');\t\t\r\n\t},\r\n\tgetStoreByCtor(ctor){\r\n\t\treturn _.find(this.schemas, f => f.ctor === ctor);\t\t\r\n\t},\r\n\tisNotInitialized(arg){\r\n\t\treturn !this.getStore(arg);\r\n\t},\r\n\tinitialize(name, schema = {}) {\r\n\t\tif (!this.isNotInitialized(name)) {\r\n\t\t\tthrow new Error('Schema already initialized');\r\n\t\t}\r\n\t\tlet ctor = _.isFunction(name) && name || undefined;\r\n\t\tname = this.getStoreName(name);\r\n\r\n\t\tif(name in this.schemas) { return; }\r\n\r\n\t\tif(!(schema instanceof ModelSchema) && _.isObject(schema)){\r\n\t\t\tschema = new ModelSchema(schema);\r\n\t\t} else {\r\n\t\t\tschema = new ModelSchema({});\r\n\t\t}\r\n\t\tthis.schemas[name] = {\r\n\t\t\tname, ctor, schema\r\n\t\t};\r\n\t\treturn schema;\r\n\t},\r\n\tgetStore(arg){\r\n\t\tif (_.isString(arg)) {\r\n\t\t\treturn this.schemas[arg];\r\n\t\t} else if (_.isFunction(arg)) {\r\n\t\t\treturn this.getStoreByCtor(arg);\r\n\t\t}\r\n\t},\r\n\tget(arg) {\r\n\t\tlet cache = this.getStore(arg);\r\n\t\treturn cache && cache.schema || undefined;\r\n\t}\r\n};\r\n\r\n\r\nexport default store;\r\n","import result from '../../../utils/better-result/index.js';\r\n\r\nfunction get(router, opts = {}, key, update){\r\n\t\r\n\tlet value = result(opts, key, { context: router, args:[ router ] });\r\n\tif(value == null) {\r\n\t\tvalue = router.getOption(key, {args: [ router ]});\r\n\t\tif(update)\r\n\t\t\topts[key] = value;\r\n\t}\r\n\treturn value;\t\t\r\n}\r\n\r\n// converts route method arguments to plain object;\r\n// _normalizeRegisterRouteArguments\r\n// { route, rawRoute, callback, name }\r\nexport default function routeArgumentsToObject(router, route, name, callback, opts = {}){\r\n\r\n\tlet context = {};\r\n\r\n\tif(_.isObject(route)){\r\n\t\tcontext = route;\r\n\t\t//_.extend(context, route);\r\n\t\t//then second argument is probably options;\r\n\t\t_.extend(opts, name);\r\n\r\n\t} else if (_.isFunction(name)) {\r\n\t\t_.extend(context, { route, callback: name, name: _.uniqueId('routerAction') });\r\n\t} else {\r\n\t\t_.extend(context, { route, name, callback });\r\n\t}\r\n\r\n\tlet isRouterHoldsActions = get(router, opts, 'isRouterHoldsActions', true);\r\n\t//let isRouteChaining = get(router, opts, 'isRouteChaining', true);\r\n\r\n\t// !_(opts).has('isRouterHoldsActions') && (opts.isRouterHoldsActions = this.getOption('isRouterHoldsActions'));\r\n\t// !_(opts).has('isRouteChaining') && (opts.isRouteChaining = this.getOption('isRouteChaining'));\r\n\r\n\r\n\t// last chance to get callback from router instance by name\r\n\t// this behavior can be disabled through `isRouterHoldsActions` options\r\n\tif(!_.isFunction(context.callback) && isRouterHoldsActions && _.isFunction(router[context.name])) {\r\n\r\n\t\tcontext.callback = router[context.name];\r\n\r\n\t}\r\n\r\n\t//store original route\r\n\tcontext.rawRoute = context.route;\r\n\r\n\t!context.name && (context.name = _.uniqueId('routerAction'));\r\n\r\n\t//converts route to RegExp pattern\r\n\tif (!_.isRegExp(context.route)) context.route = router._routeToRegExp(context.route);\r\n\r\n\t// by default backbone router wraps every callback with own wrapper\r\n\t// which in turn call actual callback with correct arguments on route\r\n\t// this callback was inlined and can not be overrided, so now its possible\t\r\n\tcontext.callbackWrapper = _.bind(router._processCallback, router, context);\r\n\r\n\treturn context;\r\n}\r\n\r\n\r\n\r\n","export function createActionContext(router, routeContext, fragment, options = {}) {\r\n\r\n\tlet rawArgs = router._extractParameters(routeContext.route, fragment);\r\n\r\n\tlet result = _.extend({}, routeContext, { fragment, rawArgs }, options, { options });\r\n\r\n\tlet args = rawArgs.slice(0);\r\n\tlet queryString = args.pop();\r\n\r\n\t_.extend(result, { qs: prepareActionQueryString(router, queryString) });\r\n\t_.extend(result, { args: prepareActionArguments(routeContext.rawRoute, args) });\r\n\r\n\tif (result.routeType == null) {\r\n\t\tresult.routeType = 'route';\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction prepareActionQueryString(router, queryString){\r\n\tif(_.isString(queryString))\r\n\t\treturn router.queryStringParser(queryString);\r\n\telse\r\n\t\treturn {};\r\n}\r\n\r\nfunction prepareActionArguments(rawRoute, args){\r\n\r\n\tlet params = rawRoute.match(/:([^/|)]+)/g) || [];\r\n\t\r\n\tlet res = {};\r\n\t_(params).each((name, index) => {\r\n\t\tname = name.substring(1);\r\n\t\t\r\n\t\tif(args == null) return;\r\n\r\n\t\tif(name in res && _.isArray(res[name]))\r\n\t\t\tres[name].push(args[index]);\r\n\t\telse if(name in res && !_.isArray(res[name]))\r\n\t\t\tres[name] = [res[name]].concat(args[index]);\r\n\t\telse\r\n\t\t\tres[name] = args[index];\r\n\t});\r\n\treturn res;\r\n}\r\n","\r\nfunction toPromise(arg, resolve = true){\r\n\tif (arg instanceof Promise || (arg && _.isFunction(arg.then)))\r\n\t\treturn arg;\r\n\telse if (arg instanceof Error)\r\n\t\treturn Promise.reject(arg);\r\n\telse\r\n\t\treturn resolve \r\n\t\t\t? Promise.resolve(arg) \r\n\t\t\t: Promise.reject(arg);\r\n}\r\nfunction getCallbackFunction(callback, executeResult)\r\n{\r\n\treturn (...args) => {\r\n\t\ttry {\r\n\t\t\texecuteResult.value = callback && callback(...args);\r\n\t\t} catch(exception) {\r\n\t\t\texecuteResult.value = exception;\r\n\t\t}\r\n\t\texecuteResult.promise = toPromise(executeResult.value);\r\n\t\treturn executeResult.value;\r\n\t};\r\n}\r\n\r\n\r\nexport function processCallback(router, actionContext, routeType){\t\r\n\t\r\n\tlet args = router.getOption('classicMode') \r\n\t\t? actionContext.rawArgs || [] \r\n\t\t: [ actionContext ];\r\n\r\n\tlet asPromise = router.getOption('callbackAsPromises');\r\n\tlet executeResult = {};\r\n\tlet callback = getCallbackFunction(actionContext.callback, executeResult, asPromise);\r\n\r\n\t//console.log('routeType:',routeType);\r\n\r\n\trouter.triggerEvent('before:' + routeType, actionContext);\r\n\r\n\tlet shouldTriggerEvent = router.execute(callback, args);\r\n\tif (shouldTriggerEvent !== false) {\r\n\t\trouter.triggerEvent(routeType, actionContext);\r\n\t\tif(routeType == 'route' || routeType == 'backroute')\r\n\t\t\trouter.lastAttempt = actionContext;\r\n\t}\r\n\r\n\texecuteResult.promise.then(\r\n\t\t(arg) => {\r\n\t\t\trouter.triggerEvent('after:'+routeType, actionContext);\r\n\t\t\treturn arg;\r\n\t\t},\r\n\t\t(error) => {\r\n\t\t\trouter.triggerEvent('error:' + routeType, error, actionContext);\r\n\t\t\trouter.handleError(error, actionContext);\r\n\t\t}\r\n\t);\r\n\r\n\treturn executeResult.value;\r\n}\r\n\r\n\r\n\r\n","\r\nexport default {\r\n\thandlers: {\r\n\t\t'js:error'(error){\r\n\t\t\tthrow error;\r\n\t\t},\r\n\t},\r\n\thandle(error, context, args){\r\n\r\n\t\tlet handlers = this._getHandleContext(error, context, args) || {};\r\n\t\treturn _(handlers).some((options, key) => this.applyHandler(key, options));\r\n\r\n\t},\r\n\tapplyHandler(key, options = {}){\r\n\r\n\t\tlet handler = this.getHandler(key, options);\r\n\t\tif (!handler) return;\r\n\t\tlet { context, args } = options;\r\n\t\treturn handler.apply(context, args);\r\n\r\n\t},\r\n\tgetHandler(key){\r\n\t\tif(_.isFunction(this.handlers[key]))\r\n\t\t\treturn this.handlers[key];\r\n\t},\r\n\tsetHandler(key, handler){\r\n\t\tif(!_.isString(key) || key === '')\r\n\t\t\tthrow new Error('setHandler first argument must be a non empty string');\r\n\r\n\t\tif (!_.isFunction(handler)) {\r\n\t\t\tdelete this.handlers[key];\r\n\t\t} else {\r\n\t\t\tthis.handlers[key] = handler;\r\n\t\t}\r\n\t},\r\n\tsetHandlers(hash){\r\n\t\tlet nullable = hash === null;\r\n\t\tlet items = nullable && this.handlers || hash;\r\n\t\tif(!_.isObject(items)) return;\r\n\t\t_(items).each((handler, key) => this.setHandler(key, nullable || handler));\r\n\t},\r\n\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\t_getHandleContext(error, context, args = []){\r\n\r\n\t\tif (_.isArray(error)) {\r\n\t\t\treturn _(error).reduce((memo, item) => _.extend(memo, this._getHandleContext(item, context, args)), {});\r\n\t\t}\r\n\r\n\t\tif(_.isFunction(this.getHandleContext)) {\r\n\t\t\tlet custom = this.getHandleContext(error, context, args);\r\n\t\t\tif(custom != null) return custom;\r\n\t\t}\r\n\r\n\t\tif (error instanceof Error) {\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'js:error': { context, args } };\r\n\t\t}\r\n\t\telse if(_.isString(error)) {\r\n\t\t\treturn { [error]: { context, args } };\r\n\t\t}\r\n\t\telse if(error instanceof $.Deferred().constructor){\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'jq:xhr': { context, args }};\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// provide your own arguments processor\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\tgetHandleContext: undefined,\r\n\r\n};\r\n","import mix from '../../../utils/mix/index.js';\r\nimport GetOptionMixin from '../../../mixins/common/get-option/index.js';\r\nimport paramStringToObject from '../../../utils/params-to-object/index.js';\r\nimport { Router as BbRouter } from '../../../vendors/backbone.js';\r\n\r\nimport buildRouteContextFromArguments from './build-route-context.js';\r\n\r\nimport  { createActionContext } from './action-context.js';\r\nimport { processCallback } from './process-callback.js';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\n\r\nconst BaseRouter = mix(BbRouter).with(GetOptionMixin);\r\nconst Router = BaseRouter.extend({\r\n\r\n\r\n\t// for migrating from Mn.AppRoute\r\n\t// set to true. it will populate routes from { controller, appRoutes } structure.\r\n\tisMarionetteStyle: false,\r\n\r\n\t// by default Backbone.Router tries to lookup callback in router instance by name `callback = this[name]` if there is no callback provided\r\n\t// its recomend to turn this feature to false\r\n\t// default value is true for Backbone.Router compatability\r\n\tisRouterHoldsActions : true,\r\n\r\n\t// by default Backbone.Router `route` method returns router itself instead of just created routeContext for chaining purposes.\r\n\t// you can change this behavior turning this feature to false\r\n\tisRouteChaining: true,\r\n\r\n\t//in classic mode actions receive argument array\r\n\t//if you need actionContext instead turn this option to false\r\n\tclassicMode: true,\r\n\r\n\tconstructor(options = {}){\r\n\t\t\r\n\t\tthis.options = _.extend({}, _.result(this, 'options'), options);\r\n\r\n\t\tBaseRouter.apply(this, arguments);\r\n\r\n\t\t//this.on('re:route:last', this._onReRouteLast);\r\n\t},\r\n\r\n\r\n\t/*\r\n\r\n\t\tinitialize methods\r\n\t\t\"when a router initialized\"\r\n\r\n\t*/\r\n\r\n\t//by default router expects that routes will result in { route, callback } hash\r\n\t//we are extending this to provide more flexibility\r\n\t// - overrided\r\n\t_bindRoutes: function() {\r\n\t\t\r\n\t\tlet routes = this.getInitRoutes();\r\n\t\tif(!_.size(routes)) return;\r\n\t\tthis.addRoutes(routes);\r\n\r\n\t},\r\n\tgetInitRoutes(){\r\n\t\tlet routes;\r\n\t\tif(this.getOption('isMarionetteStyle')) {\r\n\t\t\tlet controller = this.getOption('controller') || {};\r\n\t\t\tlet approutes = this.getOption('appRoutes') || {};\r\n\t\t\troutes = _(approutes).map((name, route) => ({ \r\n\t\t\t\troute, name, \r\n\t\t\t\tcallback: controller[name] \r\n\t\t\t}));\r\n\t\t}\r\n\t\telse {\r\n\t\t\troutes = this.getOption('routes');\r\n\t\t}\r\n\t\treturn routes;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tmanipulating routes\r\n\t\tadding\r\n\t*/\r\n\r\n\t// refactored original route method\r\n\t// chain:true by default is for supporting default behavior\r\n\t// routerHoldsActions: true - backbone router tries to get callback from router itself if there is no callback provided. \r\n\t// this options allow to support this behavior, but its recomended not to hold action inside router instance\r\n\t// - overrided\r\n\troute(route, name, callback, opts = {}){\r\n\t\t\r\n\t\t//normalizing passed arguments and putting them into a context object\r\n\t\t//refactored from original route\r\n\t\t// let context = this._normalizeRegisterRouteArguments(route, name, callback, opts);\r\n\r\n\t\t// //extends context with result of `mergeWithRegisterRouteContext`\r\n\t\t// this._normalizeRegisterRouteContext(context);\r\n\r\n\t\t// //wrapping provided callback \r\n\t\t// this._normalizeRegisterRouteCallback(context);\r\n\r\n\t\tlet context = this._buildRouteContext(route, name, callback, opts);\r\n\r\n\t\t//refactored for providing possibility to override\r\n\t\t//at this point context should be almost ready\r\n\t\tthis.registerRouteContext(context);\r\n\r\n\t\tthis._storeCreatedContext(context, opts);\r\n\r\n\t\treturn opts.isRouteChaining === true \r\n\t\t\t? this \r\n\t\t\t: context;\r\n\r\n\t},\r\n\r\n\t// provide more semantic alias for route\r\n\taddRoute(route, name, callback, opts = {}){\r\n\t\tif(opts.isRouteChaining == null)\r\n\t\t\topts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tlet context = this.route(route, name, callback, opts);\r\n\t\treturn context;\r\n\t},\r\n\r\n\t//process many routes at once\r\n\t//accepts object { name, routeContext | handler }\r\n\t// or array of routeContexts\r\n\taddRoutes(routes, opts = {}){\r\n\r\n\t\tif(opts.isRouteChaining == null)\r\n\t\t\topts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tlet normalized = _(routes)\r\n\t\t\t.chain()\r\n\t\t\t.map((value, key) => this._normalizeRoutes(value, key))\r\n\t\t\t.filter(f => _.isObject(f))\r\n\t\t\t.value();\r\n\r\n\t\tif(opts.doNotReverse != true)\r\n\t\t\tnormalized.reverse();\r\n\r\n\t\tlet registered = _(normalized).map(\r\n\t\t\troute => route && \r\n\t\t\tthis.addRoute(route, _.extend({ massAdd:true }, opts))\r\n\t\t); \r\n\t\t\r\n\t\tif(opts.doNotReverse != true)\r\n\t\t\tregistered.reverse();\r\n\r\n\t\t_(registered).each((c) => this._storeCreatedContext(c));\r\n\t\t\r\n\t\treturn registered;\r\n\t},\r\n\r\n\t// internal method called by `addRoutes` to normalize provided data\r\n\t_normalizeRoutes(value, key){\r\n\t\t//let route, name, callback;\r\n\t\tlet context;\r\n\t\tif (_.isString(value)) {\r\n\t\t\tcontext = { \r\n\t\t\t\troute: key, \r\n\t\t\t\tname: value, \r\n\t\t\t};\r\n\t\t}\r\n\t\telse if(_.isFunction(value)){\r\n\t\t\tcontext = { route:key, callback:value };\r\n\t\t}else if(_.isObject(value)){\r\n\t\t\tcontext = _.clone(value);\r\n\t\t\tif(!_.has(context, 'route'))\r\n\t\t\t\tcontext.route = key;\r\n\t\t\telse if(_.has(context, 'route') && !_.has(context, 'name'))\r\n\t\t\t\tcontext.name = key;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t_buildRouteContext(route, name, callback, opts) {\r\n\r\n\t\tlet context = buildRouteContextFromArguments(this, route, name, callback, opts);\r\n\r\n\t\treturn this.buildRouteContext(context);\r\n\t},\r\n\r\n\t//override this method if you need more information in route context\r\n\t// should return object wich will be merged with default context\r\n\t// be aware of providing reserved properties: route, name, callback\r\n\t// this will override context defaults\r\n\tbuildRouteContext: context => context,\r\n\r\n\r\n\t//finally, putting handler to the backbone.history.handlers\r\n\tregisterRouteContext(context){\r\n\t\tBackbone.history.route(context.route, context.callbackWrapper, context);\r\n\t},\r\n\r\n\t//store registered context for further use\r\n\t_storeCreatedContext(context, opts = {}){\r\n\t\tthis.routeContexts || (this.routeContexts = {});\r\n\t\tif(!opts.massAdd)\r\n\t\t\tthis.routeContexts[context.name] = context;\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\r\n\t/*\r\n\t\r\n\t\tprocess route methods\t\t\r\n\t\t\"when route happens\"\r\n\r\n\t*/\r\n\r\n\t//inner route handler\r\n\t//preparing actionContext and calls public processCallback\r\n\t_processCallback (routeContext, fragment, options = {}) {\r\n\t\tlet actionContext = createActionContext(this, routeContext, fragment, options);\r\n\t\tactionContext.restart = () => actionContext.callbackWrapper(fragment, options);\r\n\t\tlet result = this.processCallback(actionContext, actionContext.routeType, options);\r\n\t\treturn result;\r\n\t},\r\n\t\r\n\t//by default behave as original router\r\n\t//override this method to process action by your own\r\n\tprocessCallback(actionContext, routeType){\r\n\r\n\t\treturn processCallback(this, actionContext, routeType);\r\n\r\n\t},\r\n\r\n\thandleError(error, action){\t\t\r\n\t\terrorHandler.handle(error, this, [action]);\r\n\t},\r\n\r\n\t//just triggers appropriate events\r\n\t// triggerRouteEvents(context, event, name, ...args) {\r\n\t// \tif (event == 'route') {\r\n\t// \t\tthis.lastActionContext = context;\r\n\t// \t}\r\n\t// \tthis.trigger(`${event}:${name}`, ...args);\r\n\t// \tthis.trigger(event, name, ...args);\r\n\t// \tBackbone.history.trigger(event, this, name, ...args);\r\n\t// },\r\n\r\n\ttriggerEvent(event, context){\r\n\t\tthis.trigger(event, context);\r\n\t\tBackbone.history.trigger(event, context);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t//converts string to object\r\n\t//default implementation, can be overriden by user\r\n\tqueryStringParser: paramStringToObject,\t\r\n\r\n\t// navigate(...args){\r\n\t// \thistoryNavigate(...args);\r\n\t// \treturn this;\r\n\t// },\r\n\r\n\t_routeToRegExp(route) {\r\n\r\n\t\tvar optionalParam = /\\((.*?)\\)/g;\r\n\t\tvar namedParam    = /(\\(\\?)?:\\w+/g;\r\n\t\tvar splatParam    = /\\*\\w+/g;\r\n\t\tvar escapeRegExp  = /[-{}[]+?.,\\\\\\^$|#\\s]/g;\r\n\r\n\t\troute = route.replace(escapeRegExp, '\\\\$&')\r\n\t\t\t.replace(optionalParam, '(?:$1)?')\r\n\t\t\t.replace(namedParam, function(match, optional) {\r\n\t\t\t\treturn optional ? match : '([^/?]+)';\r\n\t\t\t})\r\n\t\t\t.replace(splatParam, '([^?]*?)');\r\n\t\tlet flags = this.getOption('routeCaseInsensitive') ? 'i' : '';\r\n\t\treturn new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$', flags);\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tSome API methods\r\n\t*/\r\n\r\n\tgetContextByFragment(fragment)\t{\r\n\t\tif(!_.isString(fragment)) return;\r\n\t\t//let contexts = this.routeContexts;\r\n\t\t//console.log('Router contexts', contexts);\r\n\t\tlet result = _(this.routeContexts).find((cntx) => cntx.route.test(fragment));\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n});\r\n\r\nexport default Router;\r\n","import Process from '../../process/index.js';\r\nimport BaseRouter from '../router/index.js';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\nexport default BaseRouter.extend({\r\n\t\r\n\tclassicMode:false,\r\n\tisRouterHoldsActions : false,\r\n\tisRouteChaining: false,\t\r\n\tcallbackAsPromises: true,\r\n\trouteCaseInsensitive: true,\r\n\tregisterPageRoutes(page){\r\n\t\tlet contexts = page.getRoutesContexts({ reverse: true });\r\n\t\t_(contexts).each(context => {\r\n\t\t\tlet callback = (...args) => {\r\n\t\t\t\treturn this.startPage(page, ...args);\r\n\t\t\t};\r\n\t\t\tthis.addRoute(context.route, context.name, callback);\r\n\t\t});\r\n\t},\r\n\thandleError(process, action){\r\n\t\tlet args, error;\r\n\r\n\t\tif(process instanceof Process) {\r\n\t\t\targs = [].slice.call(process.errors) ;\r\n\t\t\terror = args.shift();\r\n\t\t\targs.push(action);\r\n\t\t} else {\r\n\t\t\terror = process;\r\n\t\t\targs = [action];\r\n\t\t}\r\n\r\n\t\terrorHandler.handle(error, this, args);\r\n\r\n\t\t//BaseRouter.prototype.handleError(error, action);\r\n\t},\r\n\tstartPage(page, ...args){\r\n\t\treturn this.beforePageStart(page)\r\n\t\t\t.then(() => page.start(...args))\r\n\t\t\t.then(() => this.afterPageStart(page, ...args));\r\n\t},\r\n\tbeforePageStart(){\r\n\t\tif (this.previousPage && this.previousPage.isStarted())\r\n\t\t\treturn this.previousPage.stop();\r\n\t\telse\r\n\t\t\treturn Promise.resolve();\r\n\t},\r\n\tafterPageStart(page){\r\n\t\tthis.previousPage = page;\r\n\t},\r\n\trestartLastAttempt(){\r\n\t\tif(this.lastAttempt)\r\n\t\t\treturn this.lastAttempt.restart();\r\n\t}\r\n});\r\n","import BaseRouter from './router.js';\r\nimport comparator from '../../../utils/comparator/index.js';\r\n\r\nexport default {\r\n\tinitializeRoutes(){\r\n\t\tif (this.initializeRouter()) {\r\n\t\t\tthis._buildRoutesContexts();\r\n\r\n\t\t}\r\n\t},\r\n\tinitializeRouter(){\t\t\r\n\t\tif(this.getOption('shouldCreateRouter') && !this.router) {\r\n\t\t\tthis.router = this._createRouter();\r\n\t\t\tthis._shouldRegisterAllRoutes = true;\r\n\t\t}\r\n\r\n\t\treturn !!this.router;\r\n\t},\r\n\t_createRouter(){\r\n\t\tlet Router = this.getOption('Router') || BaseRouter;\r\n\t\tlet options = _.extend({}, this.getOption('routerOptions'));\r\n\t\treturn new Router(options);\r\n\t},\r\n\tregisterAllRoutes(){\r\n\t\tif(!this._shouldRegisterAllRoutes) return;\r\n\r\n\t\tlet pages = this.getAllChildren({ reverse: true, includeSelf: true, force: true });\r\n\t\t\r\n\t\tlet router = this.router;\r\n\t\t_(pages).each(page => router.registerPageRoutes(page));\r\n\t\t\r\n\t},\r\n\t_buildRoutesContexts(){\r\n\t\tlet routes = this.getOption('routes', {args: [this]});\r\n\t\tif (routes == null) return;\r\n\t\tif(_.isString(routes))\r\n\t\t\troutes = [routes];\r\n\r\n\t\tlet result = [];\r\n\t\tlet config = this.getRoutesConfig();\r\n\t\t_(routes).each((route, index) => {\r\n\t\t\tlet context = this._normalizeRoutesContextRoute(route, index, config);\r\n\t\t\t_.isObject(context) && (result.push(context));\r\n\t\t});\r\n\t\tthis.routesContext = result;\r\n\t\treturn this.routesContext;\r\n\t},\r\n\t_normalizeRoutesContextRoute(arg, index, config = {}){\r\n\t\tif(arguments.length < 2){\r\n\t\t\tconfig = this.getRoutesConfig();\r\n\t\t}\r\n\t\tlet context = { page: this };\r\n\t\tif(arg == null)\r\n\t\t\treturn;\r\n\t\tif (_.isString(arg)) {\r\n\t\t\t_.extend(context, {route: arg, rawRoute: arg });\r\n\t\t} else if(_.isFunction(arg)) {\r\n\t\t\targ = arg.call(this, this, index);\r\n\t\t\treturn this._normalizeRoutesContextRoute(arg, index);\r\n\t\t} else {\r\n\t\t\t_.extend(context, arg);\r\n\t\t}\r\n\t\tlet name = (_.isString(index) && index) || context.name || context.route || _.uniqueId('route');\r\n\t\tcontext.name = name;\r\n\r\n\t\tif(_.isNumber(index) && context.order == null)\r\n\t\t\tcontext.order = index;\r\n\r\n\t\tif (!context.rawRoute)\r\n\t\t\tcontext.rawRoute = context.route;\r\n\t\t\t\t\r\n\t\tif(config.relative && config.parentContext && config.parentContext.route)\r\n\t\t\tcontext.route = config.parentContext.route + '/' + context.route;\r\n\r\n\t\treturn context;\r\n\t},\r\n\tgetRoutesConfig(){\r\n\t\tlet config = _.extend({ \r\n\t\t\trelative: this.getOption('relativeRoutes', {args: [this]}),\r\n\t\t\tparent: this.parent,\r\n\t\t\tparentContext: this.parent && _.isFunction(this.parent.getMainRouteContext) && this.parent.getMainRouteContext()\r\n\t\t}, this.getOption('routesConfig', {args: [this]}));\r\n\t\t\r\n\t\treturn config;\r\n\t},\r\n\tgetRoutesContexts(opts = {}){\r\n\t\tlet { clone, reverse } = opts;\r\n\t\tlet result = this.routesContext || [];\r\n\t\tif (clone || reverse) result = [].slice.call(result);\r\n\t\tif (reverse) result.reverse();\r\n\t\treturn result;\r\n\t},\r\n\r\n\tgetMainRouteContext(){\r\n\r\n\t\tif(this.mainRouteContext) return this.mainRouteContext;\r\n\t\tthis.mainRouteContext = _(this.getRoutesContexts())\r\n\t\t\t.chain()\r\n\t\t\t.sortBy((a,b) => comparator([ [b,a, c => c.main], [a,b, c => c.order] ]))\r\n\t\t\t.take(1)\r\n\t\t\t.value()[0];\r\n\r\n\t\treturn this.mainRouteContext;\r\n\t}\r\n};\r\n","import { MnObject } from '../../../vendors/marionette.js';\r\nimport mix from '../../../utils/mix/index.js';\r\nimport GetOptionMixin from '../../../mixins/common/get-option/index.js';\r\nimport StartableMixin from '../../../mixins/common/startable/index.js';\r\nimport ChildrenableMixin from '../../../mixins/common/childrenable/index.js';\r\n\r\n\r\nimport RoutesMixin from './routes-mixin.js';\r\n\r\n\r\nconst BasePage = mix(MnObject).with(GetOptionMixin, ChildrenableMixin, StartableMixin, RoutesMixin);\r\n\r\nexport default BasePage.extend({\r\n\tconstructor(opts = {}){\r\n\t\tBasePage.apply(this, arguments);\r\n\r\n\t\tthis.mergeOptions(opts, ['root','parent','router','canNotStart','onStart','onBeginStart', 'onBeforeStart', 'onEndStart', 'onStop', 'onBeginStop', 'onBeforeStop', 'onEndStop']);\r\n\t\t\r\n\t\t// resides in routes-mixin\r\n\t\tthis.initializeRoutes();\r\n\r\n\t\t// resides in ChildrenableMixin\r\n\t\tthis.initializeChildren();\r\n\t\t\r\n\t\t// resides in routes-mixin\r\n\t\tthis.registerAllRoutes();\r\n\t},\r\n\r\n\tgetLabel(){\r\n\t\tlet result = this.getOption('label', { args: [this, this.model]});\r\n\t\treturn result;\r\n\t},\r\n\tgetMenuLabel(){\r\n\t\tlet result = this.getOption('menuLabel', { args: [this, this.model], default: this.getLabel()});\r\n\t\treturn result;\r\n\t},\r\n\r\n\tbuildChildOptions(options){\r\n\t\treturn _.extend({\r\n\t\t\troot: this.root,\r\n\t\t\tparent: this.parent,\r\n\t\t\trouter: this.router,\r\n\t\t}, options);\r\n\t},\r\n\r\n\tgetSiblings(opts = {}){\r\n\r\n\t\tlet parent = this.getParent();\r\n\t\tlet options = _.extend({ exclude: [this] }, opts);\r\n\t\treturn parent && parent.getChildren(options) || [];\r\n\r\n\t},\r\n\tgetHashes(){\r\n\t\tlet parent = this.getParent();\r\n\t\tlet root = this.getRoot();\r\n\r\n\t\treturn {\r\n\t\t\tpath: this.getPathHash(),\r\n\t\t\tthis: this.getHash(),\r\n\t\t\troot: root && root.getHash && root.getHash() || undefined,\r\n\t\t\tparent: parent && parent.getHash && parent.getHash() || undefined,\r\n\t\t\tchildren: this.getChildrenHashes(),\r\n\t\t\tsiblings: this.getSiblingsHashes()\r\n\t\t};\r\n\t},\r\n\tgetPathHash(){\r\n\t\tlet self = this.getHash();\r\n\t\tlet path = [self];\r\n\t\tlet parent = this.getParent();\r\n\t\tif (parent && _.isFunction(parent.getPathHash)) {\r\n\t\t\tpath.unshift(...parent.getPathHash());\r\n\t\t}\r\n\t\treturn path;\r\n\t},\r\n\tgetChildrenHashes(){\r\n\t\treturn this.getChildren({ map: i => i.getHash(), visible: true, });\r\n\t},\r\n\tgetSiblingsHashes(){\r\n\t\treturn this.getSiblings({ map: i => i.getHash(), visible: true, });\r\n\t},\r\n\r\n\tgetRoot(){\r\n\t\treturn this.root;\r\n\t},\r\n\tgetAllPages(opts = {}){\r\n\t\t\r\n\t\tlet options = _.extend({}, opts, { includeSelf: true });\r\n\t\tdelete options.map;\r\n\t\tlet pages = this.root.getAllChildren(options);\r\n\r\n\t\tif (_.isFunction(opts.map)) {\r\n\t\t\treturn _(pages).chain().map(opts.map).filter(f => !!f).value();\r\n\t\t} else {\r\n\t\t\treturn pages;\r\n\t\t}\r\n\t},\r\n\r\n\tgetAllHashes(opts = {}){\r\n\t\tlet options = _.extend({ map: i => i.getHash(), visible: true, }, opts);\r\n\t\treturn this.getAllPages(options);\r\n\t},\r\n\r\n\tgetHash(){\r\n\t\tlet context = this.getMainRouteContext();\r\n\r\n\t\tif(!_.isObject(context))\r\n\t\t\treturn;\r\n\r\n\t\tlet parent = this.getParent();\r\n\t\tlet parentCid = parent && parent.cid || undefined;\t\t\r\n\t\treturn {\r\n\t\t\tcid: this.cid,\r\n\t\t\tparentCid,\r\n\t\t\turl: context.route,\r\n\t\t\tlabel: this.getMenuLabel(),\r\n\t\t\torder: this.order,\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t_childFilter(item, index, opts = {}) {\r\n\t\tlet base = BasePage.prototype._childFilter;\r\n\t\tif(base && !base.apply(this, arguments))\r\n\t\t\treturn;\r\n\r\n\t\tlet { visible } = opts;\r\n\r\n\t\tif(visible && (item.visible === false || item.hidden === true))\r\n\t\t\treturn;\r\n\r\n\t\treturn item;\r\n\t},\r\n\r\n});\r\n\r\n","import { history } from '../../../vendors/backbone.js';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\n// supports passing options to the callback\r\n// by using new version of loadUrl\r\nexport function historyNavigate(fragment, opts){\r\n\t\r\n\tlet options = opts === true ? { trigger: true }\r\n\t\t: _.isObject(opts) ? _.clone(opts)\r\n\t\t\t: {};\r\n\r\n\tlet { trigger } = options;\t\r\n\tdelete options.trigger;\r\n\r\n\thistory.navigate(fragment, options);\r\n\r\n\tif (trigger) {\r\n\t\treturn historyLoadUrl(fragment, opts);\r\n\t}\r\n\r\n}\r\n\r\n// original loadUrl does not pass options to the callback\r\n// and this one does\r\nexport function historyLoadUrl(fragment, opts = {}) {\r\n\r\n\t// If the root doesn't match, no routes can match either.\r\n\tif (!history.matchRoot()) return false;\r\n\tfragment = history.fragment = history.getFragment(fragment);\r\n\tlet executed = executeHandler(fragment, opts);\r\n\tif (!executed) {\r\n\t\terrorHandler.handle('not:found', opts.context, [fragment]);\r\n\t\t//history.trigger('handler:not:found', fragment, opts);\r\n\t}\r\n\treturn executed;\r\n}\r\n\r\n//TODO: think about constraints check\r\nfunction testHandler(handler, fragment){\r\n\treturn handler.route.test(fragment);\r\n}\r\n\r\nexport function findHandler(fragment, customTest){\r\n\tlet test = _.isFunction(customTest) ? customTest : testHandler;\r\n\tfragment = history.getFragment(fragment);\r\n\treturn _.filter(history.handlers || [], handler => test(handler, fragment))[0];\r\n}\r\n\r\nexport function executeHandler(fragment, opts = {}, resultContext = {}) {\r\n\tlet handler = findHandler(fragment, opts.testHandler);\r\n\thandler && (resultContext.value = handler.callback(fragment, opts));\r\n\treturn !!handler;\r\n}\r\n\r\nexport function start(options){\r\n\r\n\tif(history.loadUrl !== historyLoadUrl)\r\n\t\thistory.loadUrl = historyLoadUrl;\r\n\r\n\treturn history.start(options);\r\n}\r\n\r\nexport {\r\n\thistory\r\n};\r\n","import { history, historyNavigate }  from '../history/index.js';\r\nimport { Events } from '../../../vendors/backbone.js';\r\n\r\n\r\nexport default _.extend({\r\n\twatch(){\r\n\t\tthis.entries = [];\r\n\t\tthis.listenTo(history, 'route', this.onRoute);\r\n\t\tthis.listenTo(history, 'backroute', this.onBackRoute);\r\n\t},\r\n\tisActionContext: cntx => _.isObject(cntx) && _.isString(cntx.fragment),\r\n\thasElements(){\r\n\t\treturn this.entries.length > 0;\r\n\t},\r\n\tonRoute(actionContext){\r\n\r\n\t\tif(!this.isActionContext(actionContext))\r\n\t\t\treturn;\r\n\r\n\t\tif (this.isActionContext(this.lastElement)) {\r\n\t\t\tthis.entries.push(this.lastElement);\r\n\t\t}\r\n\t\tthis.lastElement = actionContext;\r\n\r\n\t},\r\n\tonBackRoute(actionContext){\r\n\t\tif(!this.isActionContext(actionContext) || !this.isActionContext(actionContext.gobackContext))\r\n\t\t\treturn;\r\n\r\n\t\tlet lookFor = actionContext.gobackContext;\r\n\t\tlet index = this.entries.indexOf(lookFor);\r\n\t\tif (index >= 0) {\r\n\t\t\tthis.entries = this.entries.slice(0, index);\r\n\t\t\tthis.lastElement = lookFor;\r\n\t\t}\r\n\r\n\t},\r\n\tgoBack(){\r\n\t\tlet last = this.hasElements() && _(this.entries).last();\r\n\t\thistoryNavigate(last.fragment, { trigger: true, routeType: 'backroute', gobackContext: last });\r\n\t},\r\n}, Events);\r\n","import { historyNavigate, executeHandler } from '../history/index.js';\r\n\r\nfunction normalizeOptions(type = 'route', opts = {}){\r\n\tif(_.isObject(type)) {\r\n\t\topts = type;\r\n\t\ttype = 'route';\r\n\t} \r\n\treturn _.extend({ routeType: type, trigger: true }, opts);\r\n}\r\n\r\nexport function execute(url, opts){\r\n\treturn go(url, 'execute', opts);\r\n}\r\nexport function navigate(url, opts){\r\n\treturn go(url, 'route', opts);\r\n}\r\nexport function navigateBack(url, opts){\r\n\treturn go(url, 'backroute', opts);\r\n}\r\n\r\nexport function go(url, type, opts)\r\n{\r\n\tlet options = normalizeOptions(type, opts);\r\n\tswitch(options.routeType){\r\n\tdefault:\r\n\tcase 'route':\r\n\tcase 'backroute':\r\n\t\treturn historyNavigate(url, options);\r\n\tcase 'execute':\r\n\t\treturn executeHandler(url, options);\r\n\t}\r\n\r\n}\r\n","const _disallowedKeys = ['setItem', 'key', 'getItem', 'removeItem', 'clear'];\r\nconst allowedKey = key => _disallowedKeys.indexOf(key) < 0;\r\n\r\nconst fake = {\r\n\tsetItem(id, val) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\treturn this[id] = String(val);\r\n\t},\r\n\tgetItem(id) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\treturn this[id];\r\n\t},\r\n\tremoveItem(id) {\r\n\t\tif (!allowedKey(id)) return;\r\n\t\tdelete this[id];\r\n\t},\r\n\tclear() {\r\n\t\tlet keys = _(this).keys();\r\n\t\t_(keys).each(key => this.removeItem(key));\r\n\t}\r\n};\r\n\r\nexport default fake;\r\n","import fake from './fake.js';\r\n\r\nlet session = (typeof sessionStorage === 'undefined') \r\n\t? fake : sessionStorage;\r\n\r\nlet local = (typeof localStorage === 'undefined') \r\n\t? fake : localStorage;\r\n\r\nexport {\r\n\tsession,\r\n\tlocal\r\n};\r\n","import { session, local } from './store.js';\r\n\r\nconst getStore = (opts = {}) => opts.local === true ? local : session;\r\n\r\nconst SECONDS = 1000;\r\nconst MINUTES = SECONDS * 60;\r\nconst HOURS = MINUTES * 60;\r\nconst DAYS = HOURS * 24;\r\n\r\nvar store = {\r\n\r\n\t_normalizeValue(value) {\r\n\t\tvar normValue = value;\r\n\t\tif (_.isObject(value) && _.isFunction(value.toJSON))\r\n\t\t\tnormValue = value.toJSON();\r\n\t\tif (_.isDate(value) && !_.isNaN(value.valueOf()))\r\n\t\t\tnormValue = 'date(' + normValue + ')';\r\n\t\treturn normValue;\r\n\t},\r\n\r\n\t_createItem(value, expireAt) {\r\n\t\treturn { expireAt: expireAt, value: value };\r\n\t},\r\n\r\n\tjsonParse(key, value) {\r\n\t\tvar datePattern = /^date\\((\\d{4,4}-\\d{2,2}-\\d{2,2}([T\\s]\\d{2,2}:\\d{2,2}:\\d{2,2}(\\.\\d*)?Z?)?)\\)$/;\r\n\t\tif (_.isString(value) && datePattern.test(value)) {\r\n\t\t\tvar textDate = value.replace(datePattern, '$1');\r\n\t\t\treturn new Date(textDate);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t_jsonParse(key, value, context) {\r\n\t\tif (!key) return value;\r\n\t\treturn this.jsonParse(key, value, context);\r\n\t},\r\n\t_parse(raw) {\r\n\t\tlet _this = this;\r\n\t\tlet item = JSON.parse(raw, function (key, value) { return _this._jsonParse(key, value, this); });\r\n\t\tif ('expireAt' in item && 'value' in item)\r\n\t\t\treturn item;\r\n\t\telse\r\n\t\t\treturn this._createItem(item, 0);\r\n\t},\r\n\t_get(key, opts) {\r\n\t\tlet raw = getStore(opts).getItem(key);\r\n\t\tif (raw == null) return;\r\n\t\treturn this._parse(raw);\r\n\t},\r\n\tget(key, opts = {}) {\r\n\r\n\t\tlet { checkExpire = true } = opts;\r\n\r\n\t\tlet item = this._get(key, opts);\t\t\r\n\t\tif (item == null) return;\r\n\r\n\t\tlet expired = this._isExpired(item);\r\n\t\tif (!expired || !checkExpire) {\r\n\r\n\t\t\treturn item.value;\r\n\t\t}\r\n\t\telse if (expired) {\r\n\t\t\tthis.remove(key, opts);\r\n\t\t}\r\n\t},\r\n\tset(key, value, opts = {}) {\r\n\r\n\t\tlet expireAt = Date.now() + this.getExpireAt(opts);\r\n\t\tlet normValue = this._normalizeValue(value);\r\n\t\tlet item = this._createItem(normValue, expireAt);\r\n\t\tthis._set(key, item, opts);\r\n\t\t\r\n\t},\r\n\tremove(key, opts) {\r\n\t\tgetStore(opts).removeItem(key);\r\n\t},\r\n\texpire(key, opts) {\r\n\t\tlet item = this._get(key, opts);\r\n\t\tif (!item) return;\r\n\t\titem.expireAt = 0;\r\n\t\tthis._set(key, item, opts);\r\n\t},\r\n\tgetExpireAt ({ expireAt, seconds, minutes, hours, days }) {\r\n\t\tif (expireAt != null)\r\n\t\t\treturn expireAt;\r\n\r\n\t\tlet offset = 0;\r\n\r\n\t\t_.isNumber(seconds) && (offset += seconds * SECONDS);\r\n\t\t_.isNumber(minutes) && (offset += minutes * MINUTES);\r\n\t\t_.isNumber(hours) && (offset += hours * HOURS);\r\n\t\t_.isNumber(days) && (offset += days * DAYS);\r\n\r\n\t\toffset === 0 && (offset += 10 * MINUTES);\r\n\r\n\t\treturn offset;\r\n\t},\r\n\t_set(key, item, opts) {\r\n\t\tlet text = JSON.stringify(item);\r\n\t\tgetStore(opts).setItem(key, text);\r\n\t},\r\n\tisExpired(key, opts) {\r\n\t\tlet item = this._get(key, opts);\r\n\t\tif (item == null) return true;\r\n\t\treturn this._isExpired(item);\r\n\t},\r\n\t_isExpired(item) {\r\n\t\treturn item.expireAt < Date.now();\r\n\t},\r\n};\r\n\r\nexport default store;\r\n","import isEmpty from '../../utils/is-empty-value/index.js';\r\n\r\n\r\n\r\n\r\nconst rules = [\r\n\t{\r\n\t\tname: 'required',\r\n\t\tmessage: 'required',\r\n\t\tvalidate: (value) => {\r\n\t\t\tif (isEmpty(value)) {\r\n\t\t\t\treturn 'required';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname: 'email',\r\n\t\tmessage: 'not a email',\r\n\t\tvalidate: (value) => {\r\n\t\t\t\r\n\t\t\tif(isEmpty(value)) { return; }\r\n\r\n\t\t\tif (!_.isString(value)) {\r\n\t\t\t\treturn 'type:mismatch';\r\n\t\t\t}\r\n\r\n\t\t\tlet chunks = value.split('@');\r\n\t\t\tlet left = chunks[0];\r\n\t\t\tlet right = chunks[1];\r\n\t\t\r\n\t\t\tif(\r\n\t\t\t\tchunks.length != 2\r\n\t\t\t\t|| !/^[a-z0-9\\-_.+]+$/gmi.test(left)\r\n\t\t\t\t|| !/^[a-z0-9\\-_]+\\.[a-z0-9\\-_]+(\\.[a-z0-9\\-_]+)*$/gmi.test(right)\r\n\t\t\t) {\r\n\t\t\t\treturn 'pattern:mismatch';\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'valueIn',\r\n\t\tmessage: 'given value is not one of allowed values',\r\n\t\tvalidate: (value, { valueIn } = {}) => {\r\n\t\t\tif(_.isArray(valueIn) && valueIn.indexOf(value) === -1) {\r\n\t\t\t\treturn 'value:not:in';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'valueNotIn',\r\n\t\tmessage: 'given value is one of forbiden values',\r\n\t\tvalidate: (value, { valueNotIn } = {}) => {\r\n\t\t\tif(_.isArray(valueNotIn) && valueNotIn.indexOf(value) > -1) {\r\n\t\t\t\treturn 'value:in';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'shouldBeEqual',\r\n\t\tmessage: 'given value is not equal',\r\n\t\tvalidate: (value, { shouldBeEqual, allValues } = {}) => {\r\n\t\t\t\r\n\t\t\tlet compare = _.isFunction(shouldBeEqual) \r\n\t\t\t\t? shouldBeEqual(allValues) \r\n\t\t\t\t: shouldBeEqual;\r\n\r\n\t\t\tif (value !== compare) {\r\n\t\t\t\treturn 'value:not:equal';\r\n\t\t\t}\r\n\t\t}\r\n\t},\t\r\n\t{\r\n\t\tname:'shouldNotBeEqual',\r\n\t\tmessage: 'given value is forbiden',\r\n\t\tvalidate: (value, { shouldNotBeEqual, allValues } = {}) => {\r\n\r\n\t\t\tlet compare = _.isFunction(shouldNotBeEqual) \r\n\t\t\t\t? shouldNotBeEqual(allValues) \r\n\t\t\t\t: shouldNotBeEqual;\r\n\r\n\t\t\tif (value !== compare) {\r\n\t\t\t\treturn 'value:equal';\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(_.isFunction(shouldNotBeEqual)) {\r\n\t\t\t\treturn value !== shouldNotBeEqual(allValues);\r\n\t\t\t} else {\r\n\t\t\t\treturn value !== shouldNotBeEqual;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'minLength',\r\n\t\tmessage: ({ ruleValue } = {}) => 'length is less than ' + ruleValue,\r\n\t\tvalidate: (value, { minLength } = {}) => {\r\n\t\t\tif (_.isNumber(minLength) && (value || '').toString().length < minLength) {\r\n\t\t\t\treturn 'min:length';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'maxLength',\r\n\t\tmessage: ({ ruleValue } = {}) => 'length is greater than ' + ruleValue,\r\n\t\tvalidate: (value, { maxLength } = {}) => {\r\n\t\t\tif (_.isNumber(maxLength) && (value || '').toString().length > maxLength) {\r\n\t\t\t\treturn 'max:length';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'minValue',\r\n\t\tmessage: ({ ruleValue } = {}) => 'value is less than ' + ruleValue,\r\n\t\tvalidate: (value, { minValue } = {}) => {\r\n\t\t\tif (_.isNumber(minValue)) {\r\n\t\t\t\tlet numValue = parseFloat(value, 10);\r\n\t\t\t\tif (isEmpty(numValue) || numValue < minValue) {\r\n\t\t\t\t\treturn 'min:value';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'maxValue',\r\n\t\tmessage: ({ ruleValue } = {}) => 'value is greater than ' + ruleValue,\r\n\t\tvalidate: (value, { maxValue } = {}) => {\r\n\t\t\tif (_.isNumber(maxValue)) {\r\n\t\t\t\tlet numValue = parseFloat(value, 10);\r\n\t\t\t\tif (isEmpty(numValue) || numValue > maxValue) {\r\n\t\t\t\t\treturn 'max:value';\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname:'pattern',\r\n\t\tmessage: 'value is not in pattern',\r\n\t\tvalidate: (value, { pattern } = {}) => {\r\n\t\t\tvalue = (value || '').toString();\r\n\r\n\t\t\tif(_.isString(pattern) && !isEmpty(pattern)) {\r\n\t\t\t\tpattern = new RegExp(pattern);\r\n\t\t\t}\r\n\t\t\tif(!_.isRegExp(pattern)) { return; }\r\n\r\n\t\t\tif (!pattern.test(value)) {\r\n\t\t\t\treturn 'pattern';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tname: 'validate',\r\n\t\tvalidate: (value, options = {}) => {\r\n\t\t\tlet { ruleValue } = options;\r\n\t\t\tif(!_.isFunction(ruleValue)) return;\r\n\t\t\treturn ruleValue(value, options);\r\n\t\t},\r\n\t},\t\r\n];\r\n\r\nreIndex(false);\r\n\r\nexport function reIndex(sortBefore = true) {\r\n\tif (sortBefore) {\r\n\t\trules.sort((a,b) => a.index - b.index);\r\n\t}\r\n\t_.each(rules, (rule, index) => {\r\n\t\trule.index = index;\r\n\t});\r\n}\r\n\r\nexport default rules;\r\n","import rules from './rules.js';\r\nimport isEmptyValue from '../../utils/is-empty-value/index.js';\r\n\r\nfunction normalizeValidationContext(context){\r\n\tif (context === 'required') {\r\n\t\treturn { required: true };\r\n\t} else if(_.isFunction(context)) {\r\n\t\treturn { validate: context };\r\n\t} else if(_.isObject(context)) {\r\n\t\treturn context;\r\n\t}\r\n}\r\n\r\nfunction getRuleContexts(rule = {}){\r\n\tlet founded = _.reduce(rule, (taken, ruleValue, name) => {\r\n\t\tlet found = _.findWhere(rules, { name });\r\n\t\tif(!found) return taken;\r\n\r\n\t\tlet message = rule[name + 'Message'];\r\n\t\ttaken.push({\r\n\t\t\trule: found,\r\n\t\t\truleValue,\r\n\t\t\tmessage,\r\n\t\t\tindex: found.index\r\n\t\t});\r\n\r\n\t\treturn taken;\r\n\r\n\t}, []);\r\n\tfounded.sort((a,b) => a.index - b.index);\r\n\treturn founded;\r\n}\r\n\r\nfunction check(value, ruleContext = {}) {\r\n\t\r\n\tlet { rule = {}, ruleValue, allValues } = ruleContext;\r\n\tlet message = ruleContext.message || rule.message;\r\n\tlet buildMessage = _.isFunction(message) ? message : ({ error } = {}) => isEmptyValue(message) ? error : message;\r\n\r\n\tlet validate = rule.validate;\r\n\tlet validateOptions = {\r\n\t\truleName: rule.name,\r\n\t\truleValue,\r\n\t\t[rule.name]: ruleValue,\r\n\t\tallValues,\r\n\t\tmessage: buildMessage({ value, allValues, ruleValue })\r\n\t};\r\n\tif (!_.isFunction(validate)) return Promise.resolve(value);\r\n\r\n\t\r\n\tlet result = validate(value, validateOptions);\r\n\r\n\tif (!result) {\r\n\t\treturn Promise.resolve(value);\r\n\t} else if(result && _.isFunction(result.then)) {\r\n\t\treturn result.then(\r\n\t\t\t() => Promise.resolve(value),\r\n\t\t\t(error) => Promise.reject(buildMessage({ error, value, allValues, ruleValue }))\r\n\t\t);\r\n\t} else {\r\n\t\treturn Promise.reject(buildMessage({ error: result, value, allValues, ruleValue }));\r\n\t}\r\n}\r\n\r\n\r\n\r\nexport default function validate(value, rule, { allValues } = {}){\r\n\trule = normalizeValidationContext(rule);\r\n\tlet contexts = getRuleContexts(rule);\r\n\t\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet errors = [];\r\n\r\n\t\tlet rulesPromise = _.reduce(contexts, (promise, ruleContext) => {\r\n\r\n\t\t\tpromise = promise.then(() => {\r\n\t\t\t\treturn check(value, _.extend({}, ruleContext, { allValues, errors }));\r\n\t\t\t}).catch(error => {\r\n\t\t\t\terrors.push(error);\r\n\t\t\t});\r\n\r\n\t\t\treturn promise;\r\n\r\n\t\t}, Promise.resolve(value));\r\n\r\n\t\trulesPromise.then(() => {\r\n\t\t\tif(errors.length){\r\n\t\t\t\treject(errors);\r\n\t\t\t} else {\r\n\t\t\t\tresolve(value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\n\r\n\r\n","import rules, { reIndex } from './rules.js';\r\n\r\nimport isEmptyValue from '../../utils/is-empty-value/index.js';\r\n\r\nimport validate from './validate.js';\r\n\r\nfunction removeRule(name){\r\n\tlet found = _.findIndex(rules, { name });\r\n\tif (found === -1) return;\r\n\tlet removed = rules.splice(found, 1);\r\n\treIndex();\r\n\treturn removed;\r\n}\r\n\r\nfunction setRule(rule){\r\n\trules.push(rule);\r\n\treIndex();\r\n\treturn rule;\r\n}\r\n\r\nexport default {\r\n\tsetRule(name, rule){\r\n\t\tif(isEmptyValue(rule)) return;\r\n\r\n\t\tif(rule == null){\r\n\t\t\treturn removeRule(name);\r\n\t\t} else if (!_.isObject(rule)) {\r\n\t\t\tthrow new Error('validation rule must be an object');\r\n\t\t} else {\r\n\t\t\trule.name = name;\r\n\t\t\treturn setRule(rule);\r\n\t\t}\r\n\t},\r\n\tremoveRule(name) {\r\n\t\treturn removeRule(name);\r\n\t},\r\n\tgetRule(name){\r\n\t\treturn _.findWhere(rules, { name });\r\n\t},\r\n\tvalidate\r\n};\r\n","import triggerMethod from '../../utils/trigger-method/index.js';\r\nimport mergeOptions from '../../utils/merge-options/index.js';\r\nimport { instanceGetOption } from '../../utils/get-option/index.js';\r\n\r\n\r\nexport default {\r\n\tgetOption: instanceGetOption,\r\n\tmergeOptions: mergeOptions,\r\n\ttriggerMethod: triggerMethod,\r\n};\r\n","export default {\r\n\r\n\t//desc: setups the collection for ViewManager instance\r\n\t//returns: previous collection\r\n\tsetCollection(collection, { init = false} = {}){\r\n\t\t\r\n\t\tif (this.collection == collection) return;\r\n\r\n\t\t//take previous collection for return\r\n\t\tlet previousCollection = this.collection;\r\n\r\n\t\t//take contexts to destroy\r\n\t\tlet destroy = this._removeCollection() || [];\r\n\r\n\t\tthis.collection = collection;\r\n\r\n\t\tif (collection == null && destroy.length){\r\n\t\t\tthis.trigger('change', { destroy });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinit && this.initModels();\r\n\t\tthis._setCollectionListeners();\r\n\r\n\r\n\t\treturn previousCollection;\r\n\t},\r\n\t_clearCollectionStore(){\r\n\t\t\r\n\t\tlet store = this._store;\r\n\t\tstore.filtered.length = 0;\r\n\t\tstore.items.length = 0;\r\n\t\tstore.byModel = {};\r\n\t\tstore.isFiltered = false;\r\n\t\tstore.isSorted = false;\r\n\t},\r\n\t_removeCollection(){\r\n\t\tif (this.collection == null) return;\r\n\r\n\t\tlet previousCollection = this.collection;\r\n\r\n\t\tthis.stopListening(previousCollection);\r\n\r\n\t\tlet destroy = this._removeItems(previousCollection.models);\r\n\r\n\t\tdelete this.collection;\r\n\r\n\t\tthis._clearCollectionStore();\r\n\r\n\t\tdelete this._modelsInitialized;\r\n\r\n\t\treturn destroy;\r\n\r\n\t},\r\n\t_setCollectionListeners(){\r\n\t\tif(!this.collection) return;\r\n\t\tthis.listenTo(this.collection, 'update', this._onCollectionUpdate);\r\n\t\tthis.listenTo(this.collection, 'reset', this._onCollectionReset);\r\n\t\tthis.listenTo(this.collection, 'sort', this._onCollectionSort);\r\n\t\tif (this.collection.length === 0) {\r\n\t\t\tthis.listenToOnce(this.collection, 'sync', this._onCollectionFirstFetch);\r\n\t\t}\r\n\t},\r\n\r\n\t//first run, initialized all collection models\r\n\tinitModels(){\r\n\r\n\t\tif(!this.enableCollection || this._modelsInitialized) return;\r\n\r\n\t\tthis._rebuildModels();\r\n\r\n\t\tthis._modelsInitialized = true;\r\n\r\n\t},\r\n\r\n\t_rebuildModels({ sort = true} = {}){\r\n\r\n\t\tlet items = this._store.items;\r\n\t\tlet filtered = this._store.filtered;\r\n\t\titems.length = 0;\r\n\t\tfiltered.length = 0;\r\n\r\n\t\tlet filter = this.getFilter();\r\n\t\tlet models = this.collection.models;\r\n\r\n\t\tfor(let index = 0, length = models.length; index < length; index++) {\r\n\t\t\tlet model = models[index];\r\n\r\n\t\t\tlet context = this._getModelContext(model, { create: true });\r\n\t\t\tcontext.index = index;\r\n\r\n\t\t\tthis._storeContext(context);\r\n\t\t\titems.push(context);\r\n\r\n\t\t\tif(!filter || filter(context))\r\n\t\t\t\tfiltered.push(context);\r\n\r\n\t\t}\r\n\t\tthis._store.isFiltered = true;\r\n\r\n\t\tsort && this._sortItems(filtered, { comparator: this.getComparator(), force: true },'rebuild');\r\n\t\tthis._store.isSorted = sort;\r\n\r\n\t},\r\n\t_onCollectionUpdate(col, opts = {}){\r\n\r\n\t\tlet { changes = {} } = opts;\r\n\t\tlet { added = [], removed = [], merged = [] } = changes;\r\n\t\tlet destroy;\r\n\t\tif (removed.length) {\r\n\r\n\t\t\tdestroy = this._removeItems(removed);\r\n\t\t\tthis._rebuildModels();\r\n\r\n\t\t} else {\r\n\t\t\tif(added.length) {\t\t\t\t\r\n\t\t\t\tlet data = this._filterItems(added, { force: true });\r\n\t\t\t\tthis._addItems(data.attach, { isSorted: false });\t\t\r\n\t\t\t}\r\n\t\t\tif(merged.length){\r\n\t\t\t\tthis._store.isFiltered = false;\r\n\t\t\t}\r\n\t\t\tif((added.length || merged.length) && !_.isFunction(this.getComparator())){\r\n\t\t\t\tthis._updateIndexes();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.processAndRender({ destroy });\r\n\t},\r\n\r\n\t_addItems(items, {isSorted, isFiltered} = {}){\r\n\r\n\t\tif(!items || !items.length) return;\r\n\r\n\t\tisSorted != null && (this._store.isSorted = isSorted);\r\n\t\tisFiltered != null && (this._store.isFiltered = isFiltered);\r\n\r\n\t\tlet filter = this.getFilter();\r\n\r\n\t\tlet _items = this._store.items;\r\n\t\tlet _filtered = this._store.filtered;\r\n\r\n\t\tfor (let index = 0, length = items.length; index < length; index++) {\r\n\t\t\tlet item = items[index];\r\n\t\t\t_items.push(item);\r\n\t\t\tif(!filter || filter(item))\r\n\t\t\t\t_filtered.push(item);\r\n\t\t}\r\n\t\tthis._store.isFiltered = true;\r\n\r\n\t},\t\r\n\r\n\t_onCollectionFirstFetch(){\r\n\t\tif(this.collection.length) return;\r\n\t\tthis.processAndRender();\r\n\t},\r\n\r\n\t_onCollectionSort(col, { add, merge, remove } = {}){\r\n\r\n\t\tif (_.isFunction(this.getComparator())) return;\r\n\t\tif (add || remove || merge) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._updateIndexes();\r\n\r\n\t\tlet items = this._getItems();\r\n\t\tthis._sortItems(items, { comparator: this._dataComparator, force: true },'collectionsort');\r\n\t\tthis._store.isSorted = true;\r\n\t\tthis.processAndRender();\r\n\r\n\t},\r\n\r\n\t_onCollectionReset(col, { previousModels = []} = {}){\r\n\r\n\t\tlet destroy = this._removeItems(previousModels);\r\n\t\tthis._rebuildModels();\r\n\t\tthis.processAndRender({ destroy });\r\n\r\n\t},\r\n};\r\n","export default {\r\n\t_ensureOptions(){\r\n\t\tif(!this.view)\r\n\t\t\tthrow new Error('view is not set');\r\n\r\n\t\tif(!this.$container){\r\n\t\t\tthis.$container = this.view.$el;\r\n\t\t}\r\n\r\n\t},\r\n\tgetPaginator(){\r\n\t\tlet skip = this.skip || 0;\r\n\t\tlet take = this.take || Infinity;\r\n\t\t!_.isNumber(skip) || skip < 0 && (skip = 0);\r\n\t\t!_.isNumber(take) || take < 0 && (take = Infinity);\r\n\t\tif(skip == 0 && take == Infinity)\r\n\t\t\treturn;\r\n\t\telse\r\n\t\t\treturn {\r\n\t\t\t\tfrom: skip,\r\n\t\t\t\tto: skip + take\r\n\t\t\t};\r\n\t},\r\n\t_dataComparator(a, b){\r\n\t\treturn a.index - b.index;\r\n\t},\t\r\n\tgetComparator(){\r\n\t\treturn this.dataComparator;\r\n\t},\r\n\tsetComparator(comparator, {preventRender} = {}){\r\n\r\n\t\tif(this.dataComparator == comparator) return;\r\n\r\n\t\tthis.dataComparator = comparator;\r\n\t\tthis._store.isSorted = false;\r\n\r\n\t\tif(!preventRender)\r\n\t\t\tthis.processAndRender();\r\n\t},\r\n\tgetFilter(){\r\n\t\treturn this.dataFilter;\r\n\t},\r\n\tsetFilter(filter, {preventRender} = {}){\r\n\t\tif(this.dataFilter == filter) return;\r\n\r\n\t\tthis.dataFilter = filter;\r\n\t\tthis._store.isFiltered = false;\r\n\t\tif(!preventRender)\r\n\t\t\tthis.processAndRender();\r\n\t},\r\n};\r\n","import { isView, isViewClass } from '../../vendors/helpers.js';\r\nimport result from '../../utils/better-result/index.js';\r\n\r\nexport default {\r\n\r\n\tgetCustoms(){\r\n\t\treturn this._store.customs;\r\n\t},\r\n\taddCustomView(arg, index){\t\t\r\n\t\tlet customContext = this._normalizeAddCustomContext(arg, index);\r\n\t\tif (!customContext) { return; }\r\n\t\tthis._store.customs.push(customContext);\r\n\t\tif(isView(customContext.view) && !customContext.view._isDestroyed) {\r\n\t\t\tthis._setupJustCreatedView(customContext.view, customContext);\r\n\t\t}\r\n\t},\r\n\tremoveCustomViews(){\r\n\t\tlet customs = this.getCustoms() || [];\r\n\t\t_.each(customs, custom => {\r\n\t\t\tif(!custom.view) return;\r\n\t\t\t\r\n\t\t\tif(this._checkCustomCondition(custom.view, custom)) { return; }\r\n\r\n\t\t\tif (custom.rebuild)\r\n\t\t\t\tthis._destroyChildView(custom.view);\r\n\t\t\telse\r\n\t\t\t\tthis._detachChildView(custom.view);\r\n\t\t});\r\n\t},\r\n\r\n\t_checkCustomCondition(customView, custom){\r\n\t\t\r\n\t\tif (this.enableFilterForCustomViews) {\r\n\t\t\tlet filter = this.getFilter();\r\n\t\t\treturn !filter || filter(customView);\r\n\t\t}\r\n\r\n\t\tif (_.isFunction(custom.condition)) {\r\n\t\t\treturn custom.condition.call(this.view, customView, this.view);\r\n\t\t} else if(custom.condition != null){\r\n\t\t\treturn custom.condition;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t},\r\n\t//also accepts destroyed as third argument\r\n\t_injectCustoms(items, detached){\r\n\r\n\t\tif (this.collection && !items.length) {\r\n\t\t\titems = [];\r\n\t\t\tthis._injectEmptyView(items);\r\n\t\t}\r\n\r\n\t\tlet customs = this.getCustoms() || [];\r\n\r\n\t\tif(!customs.length)\r\n\t\t\treturn items;\r\n\r\n\t\tlet newitems = items.slice(0);\r\n\t\t_.each(customs, custom => {\r\n\r\n\t\t\tlet view = this._ensureContextHasView(custom);\r\n\t\t\tif(!view) return;\r\n\r\n\t\t\tif(!this._checkCustomCondition(view, custom)){\r\n\r\n\t\t\t\tdetached.push(custom);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(custom.index == null){\r\n\t\t\t\tnewitems.push(custom);\r\n\t\t\t} else {\r\n\t\t\t\tnewitems.splice(custom.index, 0, custom);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn newitems;\r\n\t},\r\n\r\n\t_normalizeAddCustomContext(arg, index){\r\n\t\tif (isView(arg) && !arg._isDestroyed) {\r\n\t\t\treturn {\r\n\t\t\t\tview: arg,\r\n\t\t\t\trebuild: false,\r\n\t\t\t\tindex\r\n\t\t\t};\r\n\t\t} else if (_.isFunction(arg) && isViewClass(arg)){\r\n\t\t\treturn {\r\n\t\t\t\tbuild: () => new arg(),\r\n\t\t\t\tindex,\r\n\t\t\t\trebuild: true,\r\n\t\t\t};\r\n\t\t} else if(_.isFunction(arg)) {\r\n\t\t\treturn {\r\n\t\t\t\tbuild: arg,\r\n\t\t\t\tindex,\r\n\t\t\t\trebuild: true,\r\n\t\t\t};\r\n\t\t} else if (_.isObject(arg) && !isView(arg)) {\r\n\t\t\tif (arg.build == null && arg.view == null) { return; }\r\n\t\t\tif (index != null)\r\n\t\t\t\targ.index = index;\r\n\r\n\t\t\tif (_.isFunction(arg.view)) {\r\n\t\t\t\tlet viewFn = arg.view;\r\n\t\t\t\tdelete arg.view;\r\n\t\t\t\tlet options = arg.options;\r\n\t\t\t\tif(isViewClass(viewFn)){\r\n\t\t\t\t\targ.build = () => new viewFn(result({ options }, 'options', { context: this.view }));\r\n\t\t\t\t} else {\r\n\t\t\t\t\targ.build = () => viewFn.call(this.view, result({ options }, 'options', { context: this.view }));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (arg.rebuild == null) {\r\n\t\t\t\targ.rebuild = !isView(arg.view);\r\n\t\t\t}\r\n\t\t\treturn arg;\r\n\t\t}\r\n\t}\t\r\n};\r\n","export function isInPage(paginator, index){\r\n\treturn !paginator || (index >= paginator.from && index < paginator.to);\r\n}\r\n\r\nexport function viewIsGood(view){\r\n\treturn view && !view._isDestroyed;\r\n}\r\n\r\nexport function renderView(view) {\r\n\tif (view._isRendered) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!view.supportsRenderLifecycle) {\r\n\t\tview.triggerMethod('before:render', view);\r\n\t}\r\n\r\n\tview.render();\r\n\tview._isRendered = true;\r\n\r\n\tif (!view.supportsRenderLifecycle) {\r\n\t\tview.triggerMethod('render', view);\r\n\t}\r\n}\r\n\r\nexport function destroyView(view, disableDetachEvents) {\r\n\tif (view.destroy) {\r\n\t\t// Attach flag for public destroy function internal check\r\n\t\tview._disableDetachEvents = disableDetachEvents;\r\n\t\tview.destroy();\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Destroy for non-Marionette Views\r\n\tif (!view.supportsDestroyLifecycle) {\r\n\t\tview.triggerMethod('before:destroy', view);\r\n\t}\r\n\r\n\tconst shouldTriggerDetach = view._isAttached && !disableDetachEvents;\r\n\r\n\tif (shouldTriggerDetach) {\r\n\t\tview.triggerMethod('before:detach', view);\r\n\t}\r\n\r\n\tview.remove();\r\n\r\n\tif (shouldTriggerDetach) {\r\n\t\tview._isAttached = false;\r\n\t\tview.triggerMethod('detach', view);\r\n\t}\r\n\r\n\tview._isDestroyed = true;\r\n\r\n\tif (!view.supportsDestroyLifecycle) {\r\n\t\tview.triggerMethod('destroy', view);\r\n\t}\r\n}\r\n","import { isInPage } from './utils.js';\r\n\r\n\r\nexport default {\r\n\r\n\r\n\tprocess({ destroy = [], silent, forceSort, forceFilter } = {}){\r\n\r\n\t\tthis._removeEmptyViewInstance({ destroy });\r\n\r\n\t\tlet items = this._getItems({ forceFilter });\r\n\r\n\r\n\r\n\t\tlet totalDetach = [];\r\n\r\n\t\tif (!this._store.isFiltered || forceFilter) {\r\n\t\t\tlet { attach, detach } = this._filterItems(items, { filter: this.getFilter() });\r\n\t\t\tthis._setItems(attach, { isFiltered: true });\r\n\t\t\titems = attach;\r\n\t\t\tif(detach.length) {\r\n\t\t\t\t//resultData.detach = resultData.detach.concat(detach);\r\n\t\t\t\ttotalDetach = totalDetach.concat(detach);\r\n\t\t\t}\r\n\t\t\t//resultDetach = detach;\r\n\t\t}\r\n\t\tthis._sortItems(items, { comparator: this.getComparator(), force: forceSort },'process');\r\n\t\tthis._store.isSorted = true;\r\n\r\n\r\n\r\n\t\tlet data = this._filterItems(items, { paginator: this.getPaginator() });\r\n\t\tif(data.detach.length) {\r\n\t\t\t//resultData.detach = resultData.detach.concat(data.detach);\r\n\t\t\ttotalDetach = totalDetach.concat(data.detach);\r\n\t\t}\r\n\r\n\r\n\t\tlet attach = this._injectCustoms(data.attach, totalDetach, destroy);\r\n\r\n\t\tlet result = {\r\n\t\t\tattach,\r\n\t\t\tdetach: totalDetach,\r\n\t\t\tdestroy,\r\n\t\t\ttotal: data.total,\r\n\t\t\tskiped: data.skiped,\r\n\t\t\ttaked: data.taked\r\n\t\t};\r\n\r\n\t\t\r\n\t\tthis.lastResult = result;\r\n\t\tif(!silent)\r\n\t\t\tsetTimeout(() => this.trigger('change', result), 0);\r\n\r\n\t\t\r\n\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\r\n\t_getItems({ forceFilter } = {}){\r\n\r\n\t\tif (this._store.isFiltered && !forceFilter)\r\n\t\t\treturn this._store.filtered;\r\n\t\telse\r\n\t\t\treturn this._store.items;\r\n\t},\r\n\r\n\t_filterItems(items, { filter, paginator, force } = {}){\r\n\r\n\t\tlet iterator = -1;\r\n\t\tlet detach = [];\r\n\t\tlet attach = [];\r\n\r\n\r\n\t\tif (!filter && !paginator && !force) {\r\n\t\t\t\r\n\t\t\treturn { attach: items, detach:[] };\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tlet shouldUpdateIndex = this.collection && items == this.collection.models;\r\n\t\t\r\n\t\t\r\n\t\tfor(let index = 0, length = items.length; index < length; index++){\r\n\r\n\t\t\tlet model = items[index];\r\n\t\t\tlet item = model;\r\n\t\t\tlet isModel = model instanceof Backbone.Model;\r\n\t\t\tlet isNew = false;\r\n\r\n\t\t\tif (isModel) {\r\n\t\t\t\titem = this._getModelContext(model, { create: true, markNew: true });\r\n\t\t\t\tisNew = item.isNew === true;\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tlet pass = !filter || filter(item);\r\n\t\t\tif (!pass) {\r\n\t\t\t\titem.view && !item.view._isDestroyed && detach.push(item);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(isInPage(paginator, ++iterator)) {\r\n\t\t\t\tattach.push(item);\r\n\r\n\t\t\t\tif(shouldUpdateIndex){\r\n\t\t\t\t\titem.index = index;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNew) {\r\n\t\t\t\t\tthis._storeContext(item);\r\n\t\t\t\t}\r\n\t\t\t} else if (paginator && iterator > paginator.to){\r\n\t\t\t\tbreak;\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n\t\t\r\n\t\tlet res = { attach , detach };\r\n\t\tif(paginator){\r\n\t\t\tres.total = items.length;\r\n\t\t\tres.skiped = paginator.from;\r\n\t\t\tres.taked = iterator - paginator.from - 1;\r\n\t\t}\r\n\r\n\t\t// resultData.attach = attach;\r\n\t\t// resultData.detach = detach;\r\n\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_sortItems(items, { comparator, force } = {}){\r\n\r\n\t\tif(this._store.isSorted && !force) { return; }\r\n\r\n\t\tif(!comparator) {\r\n\t\t\tcomparator = this._dataComparator;\r\n\t\t\tif(!comparator) return;\r\n\t\t}\r\n\r\n\t\tif (this._store.isFiltered && items !== this._store.items) {\r\n\t\t\tsetTimeout(() => this._sortItems(this._store.items, { comparator, force: true },'timeout sort'),0);\r\n\t\t}\r\n\r\n\t\t\r\n\t\tlet iteratee = comparator.length == 1 \r\n\t\t\t? (a,b) => {\r\n\t\t\t\tlet _a = comparator(a); let _b = comparator(b);\r\n\t\t\t\tif(_a < _b) return -1;\r\n\t\t\t\tif(_a > _b) return 1;\r\n\t\t\t\treturn 0;\t\t\t\t\r\n\t\t\t}\r\n\t\t\t: comparator;\r\n\r\n\t\titems.sort(iteratee);\r\n\t\t\r\n\t},\r\n\r\n\r\n\t_setItems(items, { isSorted, isFiltered } = {}){\r\n\r\n\t\tisSorted != null && (this._store.isSorted = isSorted);\r\n\t\tisFiltered != null && (this._store.isFiltered = isFiltered);\r\n\t\tif (isFiltered) {\r\n\t\t\tthis._store.filtered = items;\r\n\t\t} else {\r\n\t\t\tthis._store.items = items;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_removeItems(items = []){\r\n\r\n\t\tlet destroy = [];\r\n\t\tfor (let index = 0, length = items.length; index < length; index++) {\r\n\t\t\tlet item = items[index];\r\n\t\t\tlet view = this._removeItem(item);\r\n\t\t\tview && destroy.push(view);\r\n\t\t}\r\n\t\treturn destroy;\r\n\t},\r\n\r\n\t_removeItem(item){\r\n\t\tlet model = item instanceof Backbone.Model ? item : item.model;\r\n\t\tlet context = this._store.byModel[model.id] || this._store.byModel[model.cid];\r\n\t\tdelete this._store.byModel[model.id];\r\n\t\tdelete this._store.byModel[model.cid];\r\n\t\treturn context.view;\r\n\t},\r\n\r\n\t_getModelView(model){\r\n\t\tlet id = model.id == null ? model.cid : model.id;\r\n\t\tlet context = this._store.byModel[id];\r\n\t\treturn context && context.view;\r\n\t},\r\n\r\n\t_getModelContext(model, { create, markNew } = {}){\r\n\t\tlet id = model.id == null ? model.cid : model.id;\r\n\t\tlet context = this._store.byModel[id];\r\n\t\tif (context) { return context; }\r\n\t\tif (create) {\r\n\t\t\tcontext = { model, isCollection: true };\r\n\t\t\tmarkNew && (context.isNew = true);\r\n\t\t\treturn context;\r\n\t\t}\r\n\t},\r\n\r\n\t_storeContext(context){\r\n\t\tlet id = context.model.id;\r\n\t\tcontext.isNew && (delete context.isNew);\r\n\t\tif(id != null)\r\n\t\t\tthis._store.byModel[id] = context;\r\n\t\tthis._store.byModel[context.model.cid] = context;\r\n\t},\r\n\r\n\t_initView(context){\r\n\t\tif(context.view && !context.view._isDestroyed)\r\n\t\t\treturn;\r\n\t\tcontext.view = this.createView(context.model);\r\n\t},\r\n\r\n\t_updateIndexes(){\r\n\r\n\t\tlet models = this.collection.models;\r\n\t\tfor (let index = 0, length = models.length; index < length; index++) {\r\n\t\t\tlet model = models[index];\r\n\t\t\tlet id = model.id == null ? model.cid : model.id;\r\n\t\t\tlet context = this._store.byModel[id];\r\n\t\t\tcontext && (context.index = index);\r\n\t\t}\r\n\t},\r\n\r\n\r\n};\r\n","import { destroyView, renderView, viewIsGood } from './utils.js';\r\n\r\n\r\n\r\n\r\nexport default {\r\n\r\n\ttriggerViewMethod(){\r\n\t\tthis.view.triggerMethod.apply(this.view, arguments);\r\n\t},\r\n\tgetChildrenContainer(){\r\n\t\tif(_.isString(this.$container))\r\n\t\t\treturn this.view.$(this.$container);\r\n\t\telse if(_.isFunction(this.$container))\r\n\t\t\treturn this.$container();\r\n\t\telse\r\n\t\t\treturn this.$container;\r\n\t},\r\n\tprocessAndRender(opts){\r\n\t\tlet data = this.process(opts);\r\n\t\tthis.render(data);\r\n\t},\r\n\tbeforeRender(){\r\n\t\tif (this.view._isRendered) {\r\n\t\t\tthis.removeCustomViews();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.initModels();\r\n\t\t}\r\n\t},\r\n\trender(data){\t\t\r\n\t\tif(!data) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tthis.triggerViewMethod('before:render:children', data);\r\n\r\n\t\t\t// if(this.view._isRendered)\r\n\t\t\t// \tthis.removeCustomViews();\r\n\r\n\t\t\tthis._destroyChildViews(data.destroy);\r\n\t\t\tthis._detachChildViews(data.detach);\r\n\t\t\tthis._attachChildViews(data.attach);\r\n\r\n\t\t\tthis.triggerViewMethod('render:children', data);\r\n\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_destroyChildViews(views = []){\r\n\t\tif(!views.length) return;\r\n\t\tlet $container = this.getChildrenContainer();\r\n\t\tthis.triggerViewMethod('before:destroy:children', this);\r\n\r\n\t\tif (this.view.monitorViewEvents === false) {\r\n\t\t\tthis.view.Dom.detachContents($container);\r\n\t\t}\r\n\t\r\n\t\tconst shouldDisableEvents = this.view.monitorViewEvents === false;\r\n\t\t_.each(views, view => {\r\n\t\t\tthis._destroyChildView(view, shouldDisableEvents);\r\n\t\t});\r\n\t\r\n\t\r\n\t\tthis.triggerViewMethod('destroy:children', this);\r\n\r\n\t},\r\n\r\n\t_destroyChildView(view, shouldDisableEvents){\r\n\r\n\t\tif(shouldDisableEvents == null)\r\n\t\t\tshouldDisableEvents = this.view.monitorViewEvents === false;\r\n\r\n\t\t//view.off('destroy', this.removeChildView, this);\r\n\t\tif (!view || view._isDestroyed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdestroyView(view, shouldDisableEvents);\t\t\r\n\t\tthis.view.stopListening(view);\r\n\t},\r\n\r\n\t_detachChildViews(contexts = []){\r\n\t\tif(!contexts.length) return;\r\n\t\tlet monitorViewEvents = this.monitorViewEvents !== false;\r\n\t\t_.each(contexts, context => {\r\n\t\t\tthis._detachChildView(context.view, monitorViewEvents);\r\n\t\t});\r\n\t},\r\n\r\n\t_detachChildView(view, monitorViewEvents){\r\n\t\tif(!view) return;\r\n\t\tif(monitorViewEvents == null) {\r\n\t\t\tmonitorViewEvents = this.view.monitorViewEvents !== false;\r\n\t\t}\r\n\t\tconst shouldTriggerDetach = view._isAttached && monitorViewEvents;\r\n\t\tif (shouldTriggerDetach) {\r\n\t\t\tview.triggerMethod('before:detach', view);\r\n\t\t}\r\n\t\t\t\t\r\n\t\tthis.view.Dom.detachEl(view.el, view.$el);\r\n\t\tif (shouldTriggerDetach) {\r\n\t\t\tview._isAttached = false;\r\n\t\t\tview.triggerMethod('detach', view);\r\n\t\t}\t\r\n\t\t//this.view.stopListening(view);\r\n\t},\r\n\r\n\t_attachChildViews(contexts = []){\r\n\t\tif(!contexts.length) return;\r\n\t\t\r\n\t\tconst shouldTriggerAttach = this.view._isAttached && this.view.monitorViewEvents !== false;\r\n\r\n\t\tconst elBuffer = this.view.Dom.createBuffer();\r\n\t\tlet $container = this.getChildrenContainer();\r\n\t\t_.each(contexts, context => {\r\n\t\t\tlet view = this._ensureContextHasView(context);\r\n\r\n\t\t\tif (!view) return;\r\n\r\n\t\t\t!view._isRendered && renderView(view);\r\n\t\t\tthis.view.Dom.appendContents(elBuffer, view.el, {_$contents: view.$el});\r\n\r\n\t\t\tif (shouldTriggerAttach && !view._isAttached) {\t\t\t\t\r\n\t\t\t\tview.triggerMethod('before:attach', view);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.view.Dom.appendContents($container[0], elBuffer, {_$el: $container});\r\n\r\n\t\tif(shouldTriggerAttach){\r\n\t\t\t_.each(contexts, context => {\r\n\t\t\t\tlet view = context.view;\r\n\t\t\t\tif(!view || view._isAttached) return;\r\n\t\t\t\tview._isAttached = true;\r\n\t\t\t\tview.triggerMethod('attach', view);\r\n\t\t\t});\t\t\t\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_ensureContextHasView(context){\r\n\t\tif (viewIsGood(context.view))\r\n\t\t\treturn context.view;\r\n\t\telse if (context.isCollection) {\r\n\t\t\tcontext.view = this._createModelChildView(context.model);\r\n\t\t\treturn context.view;\r\n\t\t} else if(context.rebuild && _.isFunction(context.build)) {\r\n\t\t\tcontext.view = this._createCustomChildView(context);\r\n\t\t\treturn context.view;\r\n\t\t} \r\n\t},\r\n\t_createChildView(context){\r\n\t\tlet created;\r\n\t\tif (context.isCollection) {\r\n\t\t\tcontext.view = this._createModelChildView(context.model);\r\n\t\t\tcreated = !!context.view;\r\n\t\t} else if (_.isFunction(context.build) && (!viewIsGood(context.view) || context.rebuild)) {\r\n\t\t\tcontext.view = this._createCustomChildView(context);\r\n\t\t\tcreated = !!context.view;\r\n\t\t}\r\n\t\tif (!created) return;\r\n\r\n\t\tthis._setupJustCreatedView(context.view, context);\r\n\t},\r\n\t_createCustomChildView(context){\r\n\t\treturn context.build();\r\n\t},\r\n\t_createModelChildView(model){\r\n\t\tlet View = this._getChildViewClass(model);\r\n\t\tif(!View) return;\r\n\t\tlet options = this._getChildViewOptions(model, View);\r\n\t\tlet view = new View(options);\r\n\t\treturn view;\r\n\t},\r\n\t_setupJustCreatedView(view, context){\r\n\t\tif (_.isFunction(context.onBuild)) {\r\n\t\t\tcontext.onBuild.call(this.view, view);\r\n\t\t}\r\n\t\tthis.view._proxyChildViewEvents(view);\t\t\r\n\t},\r\n\t_getChildViewClass(model){\r\n\t\tif(this.modelView === Backbone.View || this.modelView.prototype instanceof Backbone.View)\r\n\t\t\treturn this.modelView;\r\n\t\telse {\r\n\t\t\treturn this.modelView(model);\r\n\t\t}\r\n\t},\r\n\t_getChildViewOptions(model, View){\r\n\t\tlet options = {};\r\n\t\tif(_.isFunction(this.modelViewOptions)){\r\n\t\t\toptions = this.modelViewOptions.call(this, model, View, this) || {};\r\n\t\t} else if(_.isObject(this.modelViewOptions)) {\r\n\t\t\toptions = this.modelViewOptions;\r\n\t\t}\r\n\t\treturn _.extend({}, options, { model });\r\n\t},\r\n\r\n\r\n\r\n\r\n};\r\n","import { isViewClass } from '../../vendors/helpers.js';\r\n\r\nconst EmptyViewMixin = {\r\n\tremoveEmptyViewInstance(opts = {}){\r\n\t\tlet view = this._emptyViewInstance;\r\n\t\tif (!view) return;\r\n\t\tlet { destroy = []} = opts;\r\n\t\tif (view) {\r\n\t\t\tdelete this._emptyViewInstance;\r\n\t\t\tdestroy.push(view);\r\n\t\t\topts.destroy = destroy;\r\n\t\t}\r\n\t},\r\n\t_getEmptyViewClas(){\r\n\t\tif (!this.emptyView) { return; }\r\n\t\telse if(isViewClass(this.emptyView)){\r\n\t\t\treturn this.emptyView;\r\n\t\t} else if(_.isFunction(this.emptyView)) {\r\n\t\t\treturn this.emptyView.call(this.view);\r\n\t\t}\r\n\t},\r\n\t_injectEmptyView(items){\r\n\t\tlet View = this._getEmptyViewClas();\r\n\t\tif (!View) return;\r\n\t\tlet options = _.extend({}, this.emptyViewOptions);\r\n\t\tlet view = new View(options);\r\n\t\tthis._emptyViewInstance = view;\r\n\t\titems.push({ view });\r\n\t},\r\n\t_removeEmptyViewInstance({ destroy = [] } = {}){\r\n\t\tlet view = this._emptyViewInstance;\r\n\t\tif (!view) return;\r\n\r\n\t\tif (view) {\r\n\t\t\tdelete this._emptyViewInstance;\r\n\t\t\tdestroy.push(view);\r\n\t\t}\r\n\t},\t\r\n};\r\nexport default EmptyViewMixin;\r\n","import extend from '../../utils/extend/index.js';\r\nimport borrow from './borrow.js';\r\nimport collection from './collection.js';\r\nimport common from './common.js';\r\nimport customs from './customs.js';\r\nimport models from './models.js';\r\nimport render from './render.js';\r\nimport emptyView from './empty-view.js';\r\n\r\nimport { Events } from '../../vendors/backbone.js';\r\n\r\nconst MergeOptions = [\r\n\t'createView',\r\n\t'dataFilter',\r\n\t'dataComparator',\r\n\t'enableCollection',\r\n\t'$container',\r\n\t'view',\r\n\t'modelView',\r\n\t'modelViewOptions',\r\n\t'emptyView',\r\n\t'emptyViewOptions',\r\n\t'enableFilterForCustomViews'\r\n];\r\n\r\nconst ViewManager = function(options = {}){\r\n\tthis.options = _.omit(options, 'collection');\r\n\tthis.mergeOptions(options, MergeOptions);\r\n\tthis._ensureOptions();\r\n\tthis._store = {\r\n\r\n\t\t//holds current filtered set of model contexts\r\n\t\tfiltered:[],\r\n\r\n\t\t//holds all model contexts\r\n\t\titems: [],\r\n\r\n\t\t//grants fast access to a context through model id or cid\r\n\t\tbyModel: {},\r\n\r\n\t\t//holds all cutoms contexts\r\n\t\tcustoms: [],\r\n\t\r\n\t\t//indicates if comparator should be applied\r\n\t\tisSorted: false,\r\n\r\n\t\t//indicates if filter should be applied\r\n\t\tisFiltered: false,\r\n\r\n\t};\r\n\t\r\n\t//in collection mixin\r\n\tif(this.enableCollection)\r\n\t\tthis.setCollection(this.collection || options.collection);\r\n};\r\n\r\nViewManager.extend = extend;\r\n\r\n_.extend(ViewManager.prototype, Events, borrow, collection, common, customs, models, render, emptyView);\r\n\r\nexport default ViewManager;\r\n","import { isView, isViewClass, getOption } from '../../utils/index.js';\r\nimport { TextView } from '../../components/index.js';\r\n\r\nfunction get(context, key){\r\n\tif(_.isFunction(context.getOption)){\r\n\t\treturn context.getOption(key);\r\n\t}\r\n\telse {\r\n\t\treturn getOption(context.options, key, { context, args: [ context ], checkAlso: context });\r\n\t}\r\n}\r\n\r\nexport default function buildViewByKey(key, { allowTextView = true, options } = {}) {\r\n\t\r\n\tif(!_.isString(key)) { return; }\r\n\r\n\tlet view = get(this, key);\r\n\tlet _options = get(this, key + 'Options');\r\n\r\n\tif (allowTextView && _.isString(view)) {\r\n\t\t_options = _.extend({}, _options, { text: view });\r\n\t\tview = TextView;\r\n\t}\r\n\toptions = _.extend({}, options, _options);\r\n\r\n\tif (isView(view)) {\r\n\t\treturn view;\r\n\t} else if (isViewClass(view)) {\r\n\t\treturn new view(options);\r\n\t}\t\r\n}\r\n","import getFlag from '../get-flag/index.js';\r\nimport hasFlag from '../has-flag/index.js';\r\nimport getByPath from '../get-by-path/index.js';\r\nimport setByPath from '../set-by-path/index.js';\r\nimport isEmptyValue from '../is-empty-value/index.js';\r\nexport const enumsStore = {};\r\n\r\nfunction getEnum(arg){\r\n\tif(isEmptyValue(arg)){\r\n\t\treturn {};\r\n\t} else if(_.isString(arg)){\r\n\t\treturn getByPath(enumsStore, arg) || {};\r\n\t} else if(_.isObject(arg)){\r\n\t\treturn arg;\r\n\t}\r\n}\r\n\r\nexport function get(arg, flag, options){\r\n\tlet _enum = getEnum(arg);\r\n\treturn getFlag(_enum, flag, options);\r\n}\r\n\r\nexport function has(arg, flag, options){\r\n\tlet _enum = getEnum(arg);\r\n\treturn hasFlag(_enum, flag, options);\r\n}\r\n\r\nexport default {\r\n\tget,\r\n\thas,\r\n\tset(name, hash){\r\n\t\tif(_.isString(name)){\r\n\t\t\tsetByPath(enumsStore, name, hash);\r\n\t\t} else if (_.isObject(name)){\r\n\t\t\t_.extend(enumsStore, name);\r\n\t\t}\r\n\t},\r\n};\r\n","export default function skipTake(array, take, skip = 0){\r\n\tif (array == null) { return; }\r\n\tif (!_.isNumber(take) || _.isNumber(skip)) {\r\n\t\tthrow new Error('skipTake skip and take arguments must be a number');\r\n\t}\r\n\tif (!_.isArray(array) && _.isObject(array)) {\r\n\t\tarray = _.toArray(array);\r\n\t}\r\n\tlet length = take + skip;\r\n\tif(array.length < length) { length = array.length; }\r\n\tlet taken = [];\r\n\tfor (let x = skip; x < length; x++) {\r\n\t\ttaken.push(array[x]);\r\n\t}\r\n\treturn taken;\r\n}\r\n","export { default as betterResult } from './better-result/index.js';\r\nexport { default as camelCase } from './camel-case/index.js';\r\nexport { default as takeFirst } from './take-first/index.js';\r\n\r\nexport { default as comparator } from './comparator/index.js';\r\nexport { default as compareAB } from './compare-ab/index.js';\r\nexport { default as convertString } from './convert-string/index.js';\r\nexport { default as extend } from './extend/index.js';\r\n\r\nexport { default as flat } from './flat/index.js';\r\nexport { default as getByPath } from './get-by-path/index.js';\r\nexport { default as getOption } from './get-option/index.js';\r\nexport { default as hasFlag } from './has-flag/index.js';\r\nexport { default as getFlag } from './get-flag/index.js';\r\nexport { default as isKnownCtor } from './is-known-ctor/index.js';\r\n\r\nexport { default as mix } from './mix/index.js';\r\nexport { default as paramsToObject } from './params-to-object/index.js';\r\nexport { default as setByPath } from './set-by-path/index.js';\r\nexport { default as toBool } from './to-bool/index.js';\r\nexport { default as unflat } from './unflat/index.js';\r\n\r\nexport { default as compareObjects } from './compare-objects/index.js';\r\nexport { default as mergeObjects } from './merge-objects/index.js';\r\nexport { default as triggerMethod } from './trigger-method/index.js';\r\nexport { default as triggerMethodOn } from './trigger-method-on/index.js';\r\n\r\nexport { default as mergeOptions } from './merge-options/index.js';\r\n\r\nexport { default as buildViewByKey } from './build-view-by-key/index.js';\r\n\r\nexport { default as enums } from './enums/index.js';\r\n\r\nexport { default as skipTake } from './skip-take/index.js';\r\n\r\n\r\nexport { \r\n\tisModel, isModelClass, isCollection, isCollectionClass, isView, isViewClass\r\n} from '../vendors/helpers.js';\r\n\r\n/*\r\nexport default {\r\n\tbetterResult, camelCase,\r\n\tcomparator, compareAB, convertString, extend,\r\n\tflat, getByPath, getOption, hasFlag, isKnownCtor, \r\n\tmix, paramsToObject, setByPath, toBool, unflat,\r\n\tisModel, isModelClass, isCollection, isCollectionClass, isView, isViewClass,\r\n\ttriggerMethod, triggerMethodOn, mergeOptions,\r\n\tcompareObjects, mergeObjects\r\n};\r\n*/\r\n","\r\nconst defaultSelector = (name, prefix = '') => prefix + 'region-' + name;\r\n\r\nfunction defaultUpdateDom(name, $el)\r\n{\r\n\tlet selector = defaultSelector(name);\r\n\tlet element = $('<div>').addClass(selector);\r\n\t$el.append(element);\r\n\r\n\treturn '.' + selector;\r\n}\r\n\r\nexport default function buildRegionFunc(view, hash, context){\r\n\r\n\tlet { $el } = view;\t\r\n\tlet { autoCreateRegion } = context;\r\n\tlet { updateDom, name, el } = hash;\r\n\tlet regionEl;\r\n\t\r\n\tlet region = view.getRegion(name);\r\n\r\n\r\n\tif (el == null && autoCreateRegion !== false) {\r\n\r\n\t\tlet testEl = region && region.getOption('el',{ deep:false});\r\n\r\n\t\tif (!region || !testEl || !$el.find(testEl).length) {\r\n\r\n\t\t\tregionEl = defaultUpdateDom(name, $el);\r\n\r\n\t\t} \r\n\r\n\t} else if(_.isFunction(updateDom)) {\r\n\t\tupdateDom.call(view, $el, view);\r\n\r\n\t} \r\n\t\r\n\t\r\n\tif (!region) {\r\n\t\tlet definition = _.pick(hash, 'replaceElement', 'regionClass');\r\n\t\tdefinition.el = hash.el || regionEl;\r\n\t\tregion = view.addRegion(name, definition);\r\n\t}\r\n\r\n\r\n\treturn region;\r\n}\r\n","import buildRegion from './build-region.js';\r\n\r\nexport default function normalizeNestedViewContextRegion(context) {\r\n\r\n\tlet { region } = context;\r\n\tlet regionName = (_.isString(region) && region) || context.regionName || context.name;\r\n\r\n\tif (_.isString(region) || region == null) {\r\n\t\tregion = {};\r\n\t} else if (_.isFunction(region)) {\r\n\t\tregion = region.call(this, context, this);\r\n\t}\r\n\r\n\tif (_.isObject(region)) {\r\n\r\n\t\tif(!region.name)\r\n\t\t\tregion.name = regionName;\r\n\t\tlet replaceElement = this.getOption('replaceNestedElement');\r\n\t\tcontext.region = _.extend({ replaceElement }, region);\r\n\t\tcontext.show = _.partial(buildRegion, this, context.region, context);\r\n\t}\r\n\treturn context;\r\n}\r\n","//import result from '../../../utils/better-result';\r\nimport { betterResult as result } from '../../../utils/index.js';\r\nimport normalizeRegion from './normalize-region.js';\r\nimport { isView, isViewClass } from '../../../vendors/helpers.js';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tthis._nestedViews = {};\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.initializeNestedViews();\r\n\t},\r\n\ttemplate: false,\r\n\r\n\tshowAllNestedViewsOnRender: false,\r\n\tshowNestedViewOnAdd: false,\r\n\treplaceNestedElement: true,\r\n\r\n\tinitializeNestedViews(){\r\n\t\tif (this._nestedViewsInitialized) return;\r\n\r\n\t\tif(this.getOption('showAllNestedViewsOnRender')) {\r\n\t\t\tthis.on('render', () => this.showAllNestedViews());\r\n\t\t}\r\n\r\n\t\tlet nesteds = this.getOption('nestedViews', { args:[this.model, this]});\r\n\t\t_(nesteds).each((context, index) => {\r\n\r\n\t\t\tlet name = _.isString(index) ? index : (context.name || _.uniqueId('nested'));\r\n\t\t\tthis.addNestedView(name, context);\r\n\r\n\t\t});\r\n\r\n\t\tthis._nestedViewsInitialized = true;\r\n\t},\r\n\t_normalizeNestedContext(name, context){\r\n\r\n\t\tif (isViewClass(context)) {\r\n\t\t\tlet View = context;\r\n\t\t\tcontext = {\r\n\t\t\t\tname, View\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t//unwrap to plain object\r\n\t\tif (_.isFunction(context)) {\r\n\t\t\tcontext = context.call(this, this.model, this);\r\n\t\t}\r\n\r\n\t\t//fix name if its not provided\r\n\t\tif (context.name == null) {\r\n\t\t\tcontext.name = name || _.uniqueId('nested');\r\n\t\t}\r\n\r\n\t\t//convert region to valid function\r\n\t\tcontext = normalizeRegion.call(this, context);\t\t\r\n\r\n\r\n\t\treturn context;\r\n\t},\r\n\t_createNestedContext(context){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\tcontexts[context.name] = context;\r\n\t},\r\n\r\n\taddNestedView(name, context){\r\n\r\n\t\tif (!_.isString(name) || name === '') {\r\n\t\t\tthrow new Error('addNestedView: first argument should be a string');\r\n\t\t}\r\n\r\n\t\tcontext = this._normalizeNestedContext(name, context);\r\n\t\tthis._createNestedContext(context);\r\n\t\tif(this.getOption('showNestedViewOnAdd') && this.isRendered()){\r\n\t\t\tthis.showNestedView(context);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tshowNestedView(name){\r\n\t\tlet region = this.getNestedViewRegion(name);\r\n\t\tlet view = region && this.buildNestedView(name);\r\n\t\tif (view) {\r\n\t\t\tregion.show(view);\r\n\t\t}\r\n\t},\r\n\tshowAllNestedViews(){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\t_(contexts).each(context => this.showNestedView(context));\r\n\t},\r\n\tgetNestedViewContext(name){\r\n\t\tlet contexts = this._nestedViews;\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn contexts;\r\n\t\telse\r\n\t\t\treturn contexts[name];\r\n\t},\r\n\r\n\r\n\tbuildNestedView(name){\r\n\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\r\n\t\tif(!context) return;\r\n\t\tlet passedView = result(context, 'view', { context: this, args: [this, this.model] });\r\n\t\tif(_.isFunction(context.template))\r\n\t\t\treturn context.template;\r\n\t\telse if ( isView(passedView) ) {\r\n\t\t\treturn passedView;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet View = context.View;\r\n\t\t\tlet options = this.buildNestedViewOptions(result(context, 'options', { context: this, args: [this, this.model], default:{} }));\r\n\t\t\t\r\n\t\t\treturn new View(options);\r\n\t\t}\r\n\t},\r\n\tbuildNestedViewOptions(opts){\r\n\t\treturn opts;\r\n\t},\r\n\tgetNestedViewRegion(name){\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\t\treturn context && _.result(context, 'show');\r\n\t}\r\n\t\r\n});\r\n","import ViewManager from '../../../components/view-manager/index.js';\r\n\r\nexport default BaseView => BaseView.extend({\r\n\t\r\n\tconstructor(options){\r\n\t\tthis.options = options;\r\n\t\tthis.mergeOptions(options,['managedCollection','collection','viewFilter','viewComparator', 'modelView', 'modelViewOptions', 'emptyView', 'emptyViewOptions']);\r\n\t\t\r\n\t\tBaseView.apply(this, arguments);\r\n\t\t\r\n\t\t//tries to initialize viewManager\r\n\t\tthis._initializeViewManager();\r\n\t},\r\n\r\n\ttemplate: _.noop,\r\n\t//if true - initializes ViewManager without collection support\r\n\tenableCustomViews: false,\r\n\t//if true - initializes ViewManager with collection and customviews support\r\n\tenableCollectionViews: false,\r\n\r\n\t_initializeViewManager(){\r\n\t\tlet customs = this.getOption('enableCustomViews');\r\n\t\tlet models = this.getOption('enableCollectionViews');\r\n\t\tif(!(customs || models)) return;\r\n\t\t\r\n\t\tlet enableFilterForCustomViews;\r\n\t\tif (!models && customs && this.getFilter()) {\r\n\t\t\tenableFilterForCustomViews = true;\r\n\t\t}\r\n\r\n\t\tthis._fallbackOptions();\r\n\r\n\t\tthis._viewManager = new ViewManager({\r\n\t\t\tenableCollection: models,\r\n\t\t\tcollection: models && this.managedCollection || this.collection || null,\r\n\t\t\tview: this,\r\n\t\t\t$container: this.getChildrenContainer(),\r\n\t\t\tmodelView: this.modelView,\r\n\t\t\tmodelViewOptions: this.modelViewOptions,\r\n\t\t\tdataFilter: this.getFilter(),\r\n\t\t\tdataComparator: this.getComparator(),\r\n\t\t\temptyView: this.emptyView,\r\n\t\t\temptyViewOptions: this.emptyViewOptions,\r\n\t\t\tenableFilterForCustomViews\r\n\t\t});\r\n\r\n\t\tif (this._customViewsQueue) {\r\n\t\t\t_.each(this._customViewsQueue, args => this._viewManager.addCustomView.apply(this._viewManager, args));\r\n\t\t\tthis._customViewsQueue.length = 0;\r\n\t\t\tdelete this._customViewsQueue;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_fallbackOptions(){\r\n\t\tif(!this.modelView) {\r\n\t\t\tthis.modelView = this.childView || this.options.childView;\r\n\t\t}\r\n\t\tif(!this.modelViewOptions){\r\n\t\t\tthis.modelViewOptions = this.childViewOptions || this.options.childViewOptions;\r\n\t\t}\r\n\t},\t\r\n\r\n\r\n\t/*\r\n\t\trender has two additional calls\r\n\t\t\t- this._viewManager.beforeRender()\r\n\t\t\t- this._viewManager.processAndRender()\r\n\t*/\r\n\trender() {\r\n\t\tconst template = this.getTemplate();\r\n\r\n\t\tif (template === false || this._isDestroyed) { return this; }\r\n\r\n\t\tthis._viewManager && this._viewManager.beforeRender();\r\n\r\n\t\tthis.triggerMethod('before:render', this);\r\n\r\n\r\n\t\t// If this is not the first render call, then we need to\r\n\t\t// re-initialize the `el` for each region\r\n\t\tif (this._isRendered) {\r\n\t\t\tthis._reInitRegions();\r\n\t\t}\r\n\r\n\t\tthis._renderTemplate(template);\r\n\t\tthis.bindUIElements();\r\n\r\n\t\tthis._viewManager && this._viewManager.processAndRender();\r\n\r\n\t\tthis._isRendered = true;\r\n\t\tthis.triggerMethod('render', this);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tgetChildrenContainer(){\r\n\t\treturn this.getOption('childrenContainer', { force: false });\r\n\t},\r\n\r\n\t/*\r\n\t\tmanaging sort and filter\r\n\t*/\r\n\tsetComparator(comparator, opts) {\r\n\t\tthis._viewManager && this._viewManager.setComparator(comparator, opts);\r\n\t\tthis.viewComparator = comparator;\r\n\t\treturn this;\r\n\t},\r\n\tgetComparator(){\r\n\t\treturn this.viewComparator;\r\n\t},\r\n\tsetFilter(filter, opts) {\r\n\t\tthis._viewManager && this._viewManager.setFilter(filter, opts);\r\n\t\tthis.viewFilter = filter;\r\n\t\treturn this;\r\n\t},\r\n\tgetFilter(){\r\n\t\treturn this.viewFilter;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tfallback methods for CollectionView \r\n\t*/\r\n\tsort(){\r\n\t\tthis._viewManager && this._viewManager.processAndRender({ forceSort: true, forceFilter: true });\r\n\t},\r\n\tfilter(){\r\n\t\tthis._viewManager && this._viewManager.processAndRender({ forceFilter: true });\r\n\t},\t\r\n\r\n\taddChildView(...args){\r\n\t\tif (!args || args.length == 0) return;\r\n\t\tif (this._viewManager) {\r\n\t\t\tthis._viewManager.addCustomView.apply(this._viewManager, arguments);\r\n\t\t} else {\r\n\t\t\tthis._customViewsQueue || (this._customViewsQueue = []);\r\n\t\t\tthis._customViewsQueue.push(args);\r\n\t\t}\r\n\t},\r\n\r\n});\r\n","export default Base => Base.extend({\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\r\n\t\tthis._isDestroying = true;\r\n\t\tBase.prototype.destroy.apply(this, arguments);\r\n\t\tdelete this._isDestroying;\r\n\t},\r\n\tisDestroyed(){\r\n\t\treturn this._isDestroyed || this._isDestroying;\r\n\t}\r\n}, { DestroyMixin: true });\r\n","import { buildViewByKey } from '../../../utils/index.js';\r\nexport default Base => Base.extend({\r\n\tbuildViewByKey(...args){\r\n\t\treturn buildViewByKey.call(this, ...args);\r\n\t},\r\n});\r\n","export default Base => Base.extend({\r\n\ttriggerNameEvent: true,\r\n\tstopEvent: true,\r\n\tconstructor(options){\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.mergeOptions(options, ['name']);\r\n\t},\r\n\ttagName:'button',\r\n\ttemplate: _.template('<i></i><span><%= text %></span><i></i>'),\r\n\tevents:{\r\n\t\t'click'(e) {\r\n\t\t\tlet stop = this.getOption('stopEvent');\r\n\t\t\tif (stop) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.beforeClick().then(\r\n\t\t\t\tdata => {\r\n\t\t\t\t\tthis.triggerMethod('click', data, e, this);\r\n\t\t\t\t\tif (this.name) {\r\n\t\t\t\t\t\tthis.triggerMethod('click:'+this.name, data, e, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthis.triggerMethod('click:fail', error, this.name, e, this);\r\n\t\t\t\t\tif (this.name) {\r\n\t\t\t\t\t\tthis.triggerMethod('click:'+this.name+':fail', error, e, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tbeforeClick(){\r\n\t\tlet result = this.triggerMethod('before:click');\r\n\t\tif(result && _.isFunction(result.then) ) {\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve(result);\r\n\t\t}\r\n\t},\r\n\ttemplateContext(){\r\n\t\treturn {\r\n\t\t\ttext: this.getOption('text')\r\n\t\t};\r\n\t},\r\n\tdisable(){\r\n\t\tthis.$el.prop('disabled', true);\r\n\t},\r\n\tenable(){\r\n\t\tthis.$el.prop('disabled', false);\r\n\t},\r\n});\r\n","import flat from '../../../utils/flat/index.js';\r\nimport unflat from '../../../utils/unflat/index.js';\r\nimport setByPath from '../../../utils/set-by-path/index.js';\r\nimport getByPath from '../../../utils/get-by-path/index.js';\r\nimport compareObjects from '../../../utils/compare-objects/index.js';\r\nimport betterResult from '../../../utils/better-result/index.js';\r\nimport takeValue from '../../../utils/take-first/index.js';\r\n\r\nfunction getTriggerMethod(context){\r\n\tif(!context) { return () => {}; }\r\n\treturn _.isFunction(context.triggerMethod) ? context.triggerMethod\r\n\t\t: _.isFunction(context.trigger) ? context.trigger\r\n\t\t\t: () => {};\r\n}\r\n\r\nfunction ensureError(error, value){\r\n\tif(error instanceof Error){\r\n\t\tthrow error;\r\n\t}\r\n\treturn arguments.length > 1 ? value : error;\r\n}\r\n\r\n\r\nexport default Base => Base.extend({\r\n\r\n\tisControl: true,\r\n\tconstructor(options){\t\t\r\n\t\tthis._initControl(options);\r\n\t\tBase.apply(this, arguments);\r\n\t\tif (this.getOption('validateOnReady')) {\r\n\t\t\tthis.once('control:ready', () => {\r\n\t\t\t\tthis.validate().catch(() => {});\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_onControlDestroy(){\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (parent && _.isFunction(parent._removeChildControl)) {\r\n\t\t\tparent._removeChildControl(this);\r\n\t\t}\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tif (children) {\r\n\t\t\t_.each(children, child => child._removeParentControl());\r\n\t\t\tchildren.length = 0;\r\n\t\t}\r\n\t\tdelete this._cntrl;\r\n\t},\r\n\t_removeChildControl(control){\r\n\t\tthis.off(control);\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tif (!children.length) { return; }\r\n\t\tlet index = children.indexOf(control);\r\n\t\tif (index === -1) return;\r\n\t\tchildren.splice(index, 1);\r\n\t},\r\n\t_addChildControl(control){\r\n\t\tlet controlName = control.getControlName();\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tlet found = _.find(children, child => child.getControlName() === controlName);\r\n\t\t!found && children.push(control);\r\n\t\t// this.listenTo(control, 'control:invalid', (error) => {\r\n\t\t// \tthis._onControlValidateFail(error, this.getControlValue({ notValidated: true })).catch(() => {});\r\n\t\t// });\r\n\t},\r\n\t_removeParentControl(){\r\n\t\tdelete this._cntrl.parent;\r\n\t},\r\n\t_initControl(options = {}){\r\n\t\tif (this._controlInitialized) { return; }\r\n\r\n\t\tthis._cntrl = {};\r\n\t\tlet name = takeValue('controlName', options, this) || 'control';\r\n\t\tthis._cntrl.name = name;\r\n\r\n\t\tlet value = takeValue('value', options, this);\r\n\t\tvalue = this._clone(value);\r\n\t\tthis.initControlValue(value);\r\n\t\tthis.initParentControl(options);\r\n\r\n\t\tthis.once('destroy', this._onControlDestroy);\r\n\r\n\t\tthis._controlInitialized = true;\r\n\t},\r\n\tinitParentControl(options){\r\n\t\tlet parent = takeValue('proxyTo', options, this) || takeValue('parentControl', options, this);\r\n\t\tthis.setParentControl(parent);\r\n\t},\r\n\tsetParentControl(parent){\r\n\t\tthis._cntrl.parent = parent;\r\n\t\tif (parent && _.isFunction(parent._addChildControl)) {\r\n\t\t\tparent._addChildControl(this);\r\n\t\t}\r\n\t},\r\n\tinitControlValue(value){\r\n\t\tthis._cntrl.initial = value;\r\n\t\tthis._cntrl.value = value;\r\n\t\t//this.setControlValue(value, { silent: true });\r\n\t},\r\n\tgetControlName(){\r\n\t\treturn this._cntrl.name;\r\n\t},\r\n\r\n\tisSameControlValue(value){\r\n\t\tlet current = this.getControlValue();\r\n\t\treturn this.isValid() && compareObjects(current, value);\r\n\t},\r\n\r\n\tgetControlValue(key, options = {}){\r\n\t\t\r\n\t\tif(_.isObject(key)) {\r\n\t\t\toptions = key;\r\n\t\t\tkey = undefined;\r\n\t\t}\r\n\t\tlet { notValidated, clone } = options;\r\n\t\tlet valueKey = notValidated ? 'notValidated' : 'value';\r\n\t\tlet value = this._cntrl[valueKey];\r\n\t\tif (key != null) {\r\n\t\t\treturn getByPath(value, key);\r\n\t\t} else {\r\n\t\t\treturn clone ? this._clone(value) : value;\r\n\t\t}\r\n\t},\r\n\r\n\tsetControlValue(value, options = {}){\r\n\t\tlet  { key, notValidated } = options;\r\n\t\tvalue = this._prepareValueBeforeSet(value, { key });\r\n\t\tconst resolve = Promise.resolve(value);\r\n\t\tif (this.isSameControlValue(value)) { return resolve; }\r\n\r\n\t\tthis._cntrl.notValidated = value;\r\n\r\n\t\tif (notValidated) { return resolve; }\r\n\t\treturn this._setControlValue(value, options);\r\n\t},\r\n\r\n\t_prepareValueBeforeSet(value, { key } = {}){\r\n\t\tvalue = this.prepareValueBeforeSet(value);\r\n\t\tif (key == null) { return value; }\r\n\r\n\t\tlet current = this.getControlValue({ notValidated: true, clone: true }) || {};\r\n\t\tsetByPath(current, key, value);\r\n\t\treturn current;\r\n\t},\r\n\r\n\t//override this if you need modify value before set\r\n\tprepareValueBeforeSet: value => value,\r\n\r\n\t_setControlValue(value, options = {}) {\r\n\t\tlet { skipValidation } = options;\r\n\t\tif (skipValidation) {\r\n\t\t\treturn this._onSetControlValueValidateSuccess(value, options);\r\n\t\t}\r\n\t\treturn this._validate(value, options)\r\n\t\t\t.then(\r\n\t\t\t\t() => this._onSetControlValueValidateSuccess(value, options), \r\n\t\t\t\terror => this._onSetControlValueValidateFail(error, value, options)\r\n\t\t\t);\r\n\t},\r\n\t_onSetControlValueValidateSuccess(value, options){\r\n\t\tthis._cntrl.previous = this._cntrl.value;\r\n\t\tthis._cntrl.value = value;\r\n\t\tthis._cntrl.isDone = false;\r\n\t\tthis._tryTriggerEvent('change', [value], options);\r\n\t\treturn Promise.resolve(value);\r\n\t},\r\n\t_onSetControlValueValidateFail(error, value, options){\r\n\t\tthis._tryTriggerEvent('change:fail', [value, error], options);\r\n\t\treturn ensureError(error, value);\r\n\t},\r\n\r\n\tisValid(){\r\n\t\treturn this._cntrl.isValid !== false;\r\n\t},\r\n\tvalidate(options = {}){\r\n\r\n\t\tlet notValidated = !this.isValid();\r\n\t\tlet value = this.getControlValue({ notValidated });\r\n\t\tlet promise = this._validate(value, options);\r\n\t\tlet _catch = options.catch;\r\n\r\n\t\tif (_catch === false) {\r\n\t\t\treturn promise;\r\n\t\t} else if(_.isFunction(_catch)) {\r\n\t\t\treturn promise.catch(_catch);\r\n\t\t} else {\r\n\t\t\treturn promise.catch(ensureError);\r\n\t\t}\r\n\t},\r\n\t_validate(value, options){\r\n\r\n\t\t//let validate = this._validateControl(value, options);\r\n\t\tlet validate = this._validateControlPromise(value, options);\r\n\r\n\t\treturn validate.then(\r\n\t\t\t() => this._onControlValidateSuccess(value, options),\r\n\t\t\terror => this._onControlValidateFail(error, value, options)\r\n\t\t);\r\n\t},\r\n\t_validateControl(value, options){\r\n\t\tlet validate = this.getOption('controlValidate', { force: false });\r\n\t\t\t\t\r\n\t\t//if there is no validation defined, resolve\r\n\t\tif (!_.isFunction(validate)) {\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(value);\r\n\t\t}\r\n\r\n\t\tlet values = this.getParentControlValue({ notValidated: true });\r\n\t\tlet validateResult = validate.call(this, value, values, options);\r\n\r\n\t\tlet promise = Promise.resolve(value);\r\n\t\tif (validateResult && validateResult.then) {\r\n\t\t\tpromise = validateResult;\r\n\t\t} else if (validateResult) {\r\n\t\t\tpromise = Promise.reject(validateResult);\r\n\t\t}\r\n\t\treturn promise;\r\n\t},\r\n\r\n\r\n\t_validateChildrenControlsPromise({ isControlWrapper, skipChildValidate} = {}, errors = {}){\r\n\r\n\t\tlet children = this.getChildrenControls();\r\n\t\tlet childrenPromise = Promise.resolve();\r\n\t\tif (!children.length) return childrenPromise;\r\n\r\n\t\treturn _.reduce(children, (finaly, child) => {\r\n\t\t\tlet control = child.getControlName();\r\n\r\n\t\t\tfinaly = finaly.then(() => {\r\n\r\n\t\t\t\tif (!child.validate || (skipChildValidate && control == skipChildValidate)) {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t\tlet validateResult = child.validate({ stopPropagation: true, catch: false });\r\n\r\n\t\t\t\treturn validateResult;\r\n\t\t\t}).catch(error => {\r\n\r\n\t\t\t\tif(isControlWrapper){\r\n\t\t\t\t\terrors.wrapped = error;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrors.children[control] = error;\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t});\r\n\t\t\treturn finaly;\r\n\t\t}, childrenPromise);\t\t\r\n\r\n\t},\r\n\r\n\t_validateControlPromise(value, options){\r\n\t\t\r\n\t\tconst { skipChildValidate } = options;\r\n\t\tconst isControlWrapper = betterResult(this, 'isControlWrapper', { args:[this]});\r\n\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet childrenErrors = {\r\n\t\t\t\tchildren: {}\r\n\t\t\t};\r\n\t\t\tlet childrenPromise = this._validateChildrenControlsPromise({ skipChildValidate, isControlWrapper }, childrenErrors);\r\n\r\n\t\t\tchildrenPromise.then(() => {\r\n\r\n\t\t\t\tif (_.size(childrenErrors.children)) {\r\n\t\t\t\t\treject(childrenErrors.children);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (childrenErrors.wrapped) {\r\n\t\t\t\t\treject(childrenErrors.wrapped);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tlet validate = this.getOption('controlValidate', { force: false });\r\n\t\t\t\t\r\n\t\t\t\t//if there is no validation defined, resolve\r\n\t\t\t\tif (!_.isFunction(validate)) {\r\n\t\t\t\t\tresolve(value);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet values = this.getParentControlValue({ notValidated: true });\r\n\t\t\t\tlet validateResult = validate.call(this, value, values, options);\r\n\r\n\t\t\t\tlet promise = Promise.resolve(value);\r\n\t\t\t\tif (validateResult && validateResult.then) {\r\n\t\t\t\t\tpromise = validateResult;\r\n\t\t\t\t} else if (validateResult) {\r\n\t\t\t\t\tpromise = Promise.reject(validateResult);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpromise.then(\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tresolve(value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t},\r\n\r\n\r\n\r\n\t_onControlValidateSuccess(value, options){\r\n\t\tthis.makeValid(value, options);\r\n\t\treturn Promise.resolve(value);\r\n\t},\r\n\tmakeValid(value, options){\r\n\t\tthis._cntrl.isValid = true;\r\n\t\tif(!this.isSameControlValue(value)){\r\n\t\t\tthis._setControlValue(value, { silent: true, skipValidation: true });\r\n\t\t}\r\n\t\tthis._tryTriggerEvent('valid', [value], options);\r\n\t},\r\n\r\n\t_onControlValidateFail(error, value, options){\r\n\t\tthis.makeInvalid(error, value, options);\r\n\t\treturn Promise.reject(error);\r\n\t},\r\n\tmakeInvalid(error, value, options){\r\n\t\tthis._cntrl.isValid = false;\r\n\t\tthis._tryTriggerEvent('invalid', [value, error], options);\r\n\t},\r\n\r\n\tgetParentControl() {\r\n\t\treturn this._cntrl.parent;\r\n\t},\r\n\tgetParentControlValue(options) {\r\n\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (!parent || !_.isFunction(parent.getControlValue)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (betterResult(parent, 'isControlWrapper', { args:[this]})) {\r\n\t\t\treturn parent.getParentControlValue(options);\r\n\t\t} else {\r\n\t\t\treturn parent.getControlValue(options);\r\n\t\t}\r\n\t},\r\n\tgetChildrenControls(){\r\n\t\tif(!this._cntrl.children) {\r\n\t\t\tthis._cntrl.children = [];\r\n\t\t}\r\n\t\treturn this._cntrl.children;\r\n\t},\r\n\thandleChildControlEvent(event, controlName, ...args) {\r\n\t\tlet childEvent = controlName + ':' + event;\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\t\ttrigger.call(this, childEvent, ...args);\r\n\r\n\t\tlet cce = this.getOption('childControlEvents', { args: [this] }) || {};\r\n\t\tlet def = this.defaultChildControlEvents || {};\r\n\t\tlet handler = cce[childEvent];\r\n\t\tif (_.isFunction(handler)) {\r\n\t\t\thandler.apply(this, args);\r\n\t\t} else {\r\n\t\t\tlet defHandler = def[event];\r\n\t\t\t_.isFunction(defHandler) && defHandler.call(this, controlName, ...args);\r\n\t\t}\r\n\t},\r\n\tdefaultChildControlEvents:{\r\n\t\t'change'(controlName, value){\r\n\t\t\tlet isControlWraper = this.getOption('isControlWrapper');\r\n\t\t\tisControlWraper && (controlName = undefined);\r\n\t\t\tthis.setControlValue(value, { key: controlName, skipChildValidate: controlName });\r\n\t\t},\r\n\t\t'done'(controlName, value){\r\n\t\t\tlet isControlWraper = this.getOption('isControlWrapper');\r\n\t\t\tisControlWraper && (controlName = undefined);\r\n\t\t\tthis.setControlValue(value, { key: controlName, skipChildValidate: controlName });\r\n\t\t\tif(isControlWraper) {\r\n\t\t\t\tthis.controlDone();\r\n\t\t\t}\r\n\t\t},\r\n\t\t'invalid'(controlName, value, error){\r\n\t\t\tif(this.getOption('isControlWrapper')){\r\n\t\t\t\tcontrolName = undefined;\r\n\t\t\t}\r\n\t\t\tthis.setControlValue(value, { key: controlName, silent: true, notValidated: true });\r\n\t\t\tthis.makeInvalid(error, this.getControlValue({ notValidated: true }));\r\n\t\t},\r\n\t},\r\n\r\n\tcontrolDone(){\r\n\t\tif (!this._cntrl.isValid || this._cntrl.isDone) { return; }\r\n\t\tlet value = this.getControlValue();\r\n\t\tthis._cntrl.isDone = true;\r\n\t\tthis._tryTriggerEvent('done', [value]);\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\thelpers\r\n\t*/\r\n\t_clone(value){\r\n\t\tif(_.isArray(value))\r\n\t\t\treturn value.slice(0);\r\n\t\telse if(_.isObject(value)) {\r\n\t\t\treturn unflat(flat(value));\r\n\t\t} else\r\n\t\t\treturn value;\r\n\t},\r\n\t_tryTriggerEvent(name, args = [], { silent, stopPropagation } = {}){\r\n\t\tif (silent) { return; }\r\n\t\tlet controlName = this.getControlName();\r\n\t\tlet event = 'control:' + name;\r\n\t\tlet namedEvent = controlName + ':' + name;\r\n\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\t\t\r\n\t\ttrigger.call(this, event, ...args);\r\n\r\n\t\tlet parent = this.getParentControl();\r\n\t\tif (stopPropagation || !parent) { return; }\r\n\t\tif (_.isFunction(parent.handleChildControlEvent)) {\r\n\t\t\tparent.handleChildControlEvent(name, controlName, ...args);\r\n\t\t} else {\r\n\t\t\tlet parentTrigger = getTriggerMethod(parent);\r\n\t\t\tparentTrigger.call(parent, namedEvent, ...args);\r\n\t\t}\r\n\r\n\t},\r\n\tmakeControlReady(){\r\n\t\tlet trigger = getTriggerMethod(this);\r\n\t\ttrigger.call(this, 'control:ready');\r\n\t},\r\n\r\n}, { ControlMixin: true });\r\n","import { isView, isViewClass } from '../../../vendors/helpers.js';\r\nimport buildViewByKey from '../../../utils/build-view-by-key/index.js';\r\nimport ControlMixin from '../control/index.js';\r\nimport cssClassModifiers from '../../view/css-class-modifiers/index.js';\r\nimport customsMixin from '../../collection-view/customs/index.js';\r\n\r\nexport default Base => {\r\n\tlet Mixed = Base;\r\n\r\n\tif (!Mixed.ControlMixin) {\r\n\t\tMixed = ControlMixin(Mixed);\r\n\t}\r\n\r\n\tif (!Mixed.CssClassModifiersMixin) {\r\n\t\tMixed = cssClassModifiers(Mixed);\r\n\t}\r\n\r\n\tif (!Mixed.CustomsMixin) {\r\n\t\tMixed = customsMixin(Mixed);\r\n\t}\r\n\r\n\r\n\treturn Mixed.extend({\r\n\r\n\t\trenderAllCustoms: true,\r\n\t\tisControlWrapper: true,\r\n\t\tskipFirstValidationError: true,\r\n\t\tshouldShowError: false,\r\n\t\tvalidateOnReady: false,\r\n\t\t\r\n\t\tconstructor(){\r\n\t\t\tMixed.apply(this, arguments);\r\n\t\t\tif(!this.cssClassModifiers) {\r\n\t\t\t\tthis.cssClassModifiers = [];\r\n\t\t\t}\r\n\t\t\tthis.addCssClassModifier('control-wrapper');\r\n\t\t\tthis.on({\r\n\t\t\t\t'control:valid': this._onControlValid,\r\n\t\t\t\t'control:invalid': this._onControlInvalid\r\n\t\t\t});\r\n\t\t\tif(this.getOption('validateOnReady')){\r\n\t\t\t\tthis.once('customs:render', () => this.makeControlReady());\r\n\t\t\t}\t\t\t\r\n\t\t},\t\r\n\r\n\t\tgetCustoms(){\r\n\t\t\tlet customs = [];\r\n\t\t\tif (this.getOption('isControlWrapper')) {\r\n\t\t\t\tcustoms.push(this.getControlView());\r\n\t\t\t} else {\r\n\t\t\t\tcustoms.push(...this._customs);\r\n\t\t\t}\r\n\t\t\tcustoms = this.injectSystemViews(customs);\r\n\t\t\treturn this._prepareCustoms(customs);\r\n\t\t},\r\n\t\t_setupCustom(view){\r\n\t\t\tthis._setupChildControl(view);\r\n\t\t\tthis.setupCustom(view);\r\n\t\t},\r\n\t\t_setupChildControl(view){\r\n\t\t\tif(_.isFunction(view.setParentControl)) {\r\n\t\t\t\tview.setParentControl(this);\r\n\t\t\t}\r\n\t\t\tthis.setupChildControl(view);\r\n\t\t},\r\n\t\tsetupChildControl: _.noop,\r\n\t\tinjectSystemViews(customs = []){\r\n\t\t\tcustoms.unshift(this.getHeaderView());\r\n\t\t\tcustoms.push(\r\n\t\t\t\tthis.getErrorView(),\r\n\t\t\t\tthis.getFooterView()\t\r\n\t\t\t);\r\n\t\t\treturn customs;\r\n\t\t},\r\n\t\tbubildViewByKey(key, { skipTextCheck, options } = {}){\r\n\t\t\tlet view;\r\n\t\t\tlet value;\r\n\r\n\t\t\tif(!skipTextCheck) {\r\n\t\t\t\tvalue = this.getOption(key);\r\n\t\t\t\tif (_.isString(value)) {\r\n\t\t\t\t\tlet tagName = (key == 'header' || key == 'footer') ? key : 'div';\r\n\t\t\t\t\tview = this.buildTextView(value, tagName);\r\n\t\t\t\t\tif(view) { return view; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (value == null) {\r\n\t\t\t\tview = this.getOption(key+'View');\r\n\t\t\t} else {\r\n\t\t\t\tview = value;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(isView(view)) { return view; }\r\n\t\t\tif(isViewClass(view)) {\r\n\t\t\t\tlet _options = _.extend({}, this.getOption(key+'ViewOptions'), options);\r\n\t\t\t\treturn new view(_options);\r\n\t\t\t}\r\n\t\t},\r\n\t\tbuildTextView(text, tagName){\r\n\t\t\tlet View = this.getOption('textView');\r\n\t\t\tif (!View) { return; }\r\n\t\t\treturn new View({ text, tagName });\r\n\t\t},\r\n\r\n\r\n\r\n\t\tgetErrorView(){\r\n\t\t\tif (!this.getOption('shouldShowError')) { return; }\r\n\t\t\tif (this.getOption('showValidateError', {force:false})) { return; }\r\n\t\t\tthis._errorView = this.buildErrorView();\r\n\t\t\treturn this._errorView;\r\n\t\t},\r\n\t\tbuildErrorView(){\r\n\t\t\treturn buildViewByKey.call(this, 'errorView', { allowTextView: false });\r\n\t\t},\r\n\r\n\r\n\r\n\t\tgetHeaderView(){\t\t\t\r\n\t\t\treturn this.buildHeaderView({ tagName: 'header' });\r\n\t\t},\r\n\t\tbuildHeaderView(options){\r\n\t\t\treturn buildViewByKey.call(this, 'header', { allowTextView: true, options });\r\n\t\t},\r\n\r\n\r\n\r\n\t\tgetFooterView(){\r\n\t\t\tif (this.getOption('buttonsInFooter')) {\r\n\t\t\t\treturn this.buildButtonsView();\r\n\t\t\t} else {\r\n\t\t\t\treturn this.buildFooterView();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbuildFooterView(){\r\n\t\t\treturn buildViewByKey.call(this, 'footer', { allowTextView: true, options: { tagName: 'footer' }});\r\n\t\t},\r\n\r\n\t\tbuildButtonsView(){\r\n\t\t\tif (this._buttonsView) {\r\n\t\t\t\tthis.stopListening(this._buttonsView);\r\n\t\t\t}\r\n\r\n\t\t\tlet options = this.buildButtonsOptions();\r\n\t\t\tlet view = buildViewByKey.call(this, 'buttonsView', { allowTextView: false, options });\r\n\t\t\tif (!view) { return; }\r\n\r\n\t\t\tthis._buttonsView = view;\r\n\t\t\tthis.settleButtonsListeners(view);\r\n\r\n\t\t\treturn view;\r\n\t\t},\r\n\t\tbuildButtonsOptions(){\r\n\t\t\tlet btns = this.getOption('buttons');\r\n\t\t\tif(btns) {\r\n\t\t\t\treturn _.reduce(btns, (hash, b) => {\r\n\t\t\t\t\tlet item = this.buildButton(b, this);\r\n\t\t\t\t\thash[item.name] = item;\r\n\t\t\t\t\treturn hash;\r\n\t\t\t\t}, {});\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\tbuildButton(value){\r\n\t\t\tif (_.isString(value)) {\r\n\t\t\t\treturn this.buildButton({ text: value, className: value, name: value });\r\n\t\t\t} else if(_.isFunction(value)) {\r\n\t\t\t\treturn this.buildButton(value.call(this));\r\n\t\t\t} else if(_.isObject(value)) {\r\n\t\t\t\treturn this.fixButton(value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfixButton(button){\r\n\t\t\treturn button;\r\n\t\t},\r\n\t\tsettleButtonsListeners(buttonsView){\r\n\t\t\tthis.listenTo(buttonsView, {\r\n\t\t\t\t'resolve'(){\r\n\t\t\t\t\tthis.triggerMethod('resolve', this.getControlValue());\r\n\t\t\t\t},\r\n\t\t\t\t'reject'(){\r\n\t\t\t\t\tthis.triggerMethod('reject');\r\n\t\t\t\t},\r\n\t\t\t\t'reject:soft'(){\r\n\t\t\t\t\tthis.triggerMethod('reject:soft');\r\n\t\t\t\t},\r\n\t\t\t\t'reject:hard'(){\r\n\t\t\t\t\tthis.triggerMethod('reject:hard');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetControlView(){\r\n\t\t\tthis.control = buildViewByKey.call(this, 'controlView', { allowTextView: false, options: { parentControl: this, value: this.getControlValue() } });\r\n\t\t\treturn this.control;\r\n\t\t},\r\n\r\n\r\n\t\t_onControlInvalid(value, error){\r\n\t\t\tthis.disableButtons();\r\n\t\t\tthis._showValidateError(error);\r\n\t\t},\r\n\t\t_onControlValid(){\r\n\t\t\tthis.enableButtons();\r\n\t\t\tthis._hideValidateError();\r\n\t\t},\r\n\t\t\r\n\t\tdisableButtons(){\r\n\t\t\tif(this._buttonsView && _.isFunction(this._buttonsView.disableButton)) {\r\n\t\t\t\tthis._buttonsView.disableButton('resolve');\r\n\t\t\t}\r\n\t\t},\r\n\t\tenableButtons(){\r\n\t\t\tif(this._buttonsView && _.isFunction(this._buttonsView.enableButton)) {\r\n\t\t\t\tthis._buttonsView.enableButton('resolve');\r\n\t\t\t}\r\n\t\t},\r\n\t\t_showValidateError(error){\r\n\t\t\t\r\n\t\t\tlet shouldShow = this.getOption('shouldShowError');\r\n\t\t\tlet skipFirstValidationError = this.getOption('skipFirstValidationError');\r\n\r\n\t\t\tif (skipFirstValidationError && !this._firstValidationErrorSkipped) {\r\n\t\t\t\tthis._firstValidationErrorSkipped = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!shouldShow) return;\r\n\r\n\t\t\tlet show = this.getOption('showValidateError', { force: false });\r\n\t\t\tif (_.isFunction(show)) {\r\n\t\t\t\tshow.call(this, error);\r\n\t\t\t} else {\r\n\t\t\t\tif (!this._errorView) return;\r\n\t\t\t\tthis._errorView.showError(error);\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\t_hideValidateError(){\r\n\t\t\tlet hide = this.getOption('hideValidateError', { force: false });\r\n\t\t\tif (_.isFunction(hide)) {\r\n\t\t\t\thide.call(this);\r\n\t\t\t} else {\r\n\t\t\t\tif (!this._errorView) return;\r\n\t\t\t\tthis._errorView.hideError();\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t}, { ControlViewMixin: true });\r\n\r\n\r\n};\r\n","//import getOption from '../../../utils/get-option';\r\nimport getOption from '../../../utils/get-option/index.js';\r\nconst _getOption = (context, key, checkAlso) => getOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function getInputType(inputView, opts = {}){\r\n\t\r\n\tlet valueType = _getOption(inputView, 'valueType', opts);\r\n\tif (valueType == null) {\r\n\t\tlet value = inputView.getControlValue();\r\n\t\tif ( value == null) {\r\n\t\t\tvalueType = 'string';\r\n\t\t} else {\r\n\t\t\tif(_.isNumber(value))\r\n\t\t\t\tvalueType = 'number';\r\n\t\t\telse if(_.isDate(value))\r\n\t\t\t\tvalueType = 'datetime';\r\n\t\t\telse\r\n\t\t\t\tvalueType = 'string';\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tif (valueType == 'number') {\r\n\t\tinputView._valueIsNumber = true;\r\n\t}\r\n\r\n\tlet type = _getOption(inputView, 'inputType', opts);\r\n\tif(type == null){\r\n\t\ttype = _getOption(inputView.valueOptions, 'inputType', opts.valueOptions);\r\n\t}\r\n\tif (!type) {\r\n\t\tif (inputView._valueIsNumber) {\r\n\t\t\ttype = _getOption(inputView, 'inputNumberType', opts) || 'number';\r\n\t\t} else if (valueType == 'string') {\r\n\t\t\ttype = 'text';\r\n\t\t} else if (valueType == 'datetime') {\r\n\t\t\ttype = 'datetime';\r\n\t\t} else {\r\n\t\t\ttype = 'text';\r\n\t\t}\r\n\t}\r\n\tinputView.inputType = type;\r\n\tinputView.valueType = valueType;\r\n\treturn type;\r\n}\r\n","import getInputType from './get-input-type.js';\r\n\r\n//import getOption from '../../../utils/get-option';\r\nimport { getOption } from '../../../utils/index.js';\r\n\r\nexport default function setInputAttributes(inputView, opts = {}) {\r\n\r\n\tlet attributes = getOption(inputView, opts, 'attributes');\r\n\r\n\tlet check = _.extend({}, inputView, opts, inputView.valueOptions, opts.valueOptions);\r\n\r\n\tlet restrictionKeys = {\r\n\t\t'maxLength':'maxlength', \r\n\t\t'minLength':'minlength',\r\n\t\t'minValue':'min', \r\n\t\t'maxValue':'max', \r\n\t\t'valuePattern':'pattern',\r\n\t\t'required':'required',\r\n\t\t'value':'value'\r\n\t};\r\n\tlet restrictions = {};\r\n\t_(restrictionKeys).each((key2, key) => {\r\n\t\tlet value = check[key];\r\n\t\t//getOption(inputView, opts, key);\r\n\t\tif (value != null)\r\n\t\t\trestrictions[key2] = value;\r\n\t});\r\n\r\n\tinputView.attributes = _.extend({\r\n\t\tvalue: inputView.value,\r\n\t\ttype: getInputType(inputView, opts),\r\n\t}, restrictions, attributes);\r\n\t\r\n\tif(opts.attributes)\r\n\t\tdelete opts.attributes;\r\n}\r\n","import getOption from '../../../../utils/get-option/index.js';\r\nexport default (context, key, ifNull) => getOption(context, key, { args:[context], default: ifNull });\r\n\r\n","export default function isChar(event){\r\n\treturn event.key && event.key.length == 1 && !event.ctrlKey;\r\n}","import getOption from './_get-option.js';\r\nimport isChar from './_is-char.js';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('keydown', event) === false) { return; }\r\n\r\n\r\n\tlet prevent = false;\r\n\tlet stop = false;\r\n\r\n\tif (isChar(event)) {\r\n\t\tif (!context.isEnteredCharValid(event.key)) {\r\n\t\t\tprevent = true;\r\n\t\t}\r\n\t}\r\n\tif(event.keyCode == 13 && getOption(context, 'doneOnEnter', true)){\r\n\t\tprevent = true;\r\n\t\tstop = true;\r\n\t}\r\n\r\n\tstop && event.stopPropagation();\r\n\tprevent && event.preventDefault();\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('keyup', event) === false) { return; }\r\n\r\n\tif (event.keyCode == 13) {\r\n\t\t\r\n\t\tlet shouldDone = getOption(context, 'doneOnEnter', true);\r\n\t\tif (shouldDone) {\r\n\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t\tcontext.controlDone();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n}\r\n","export default function(eventContext) {\r\n\tlet { context, event } = eventContext;\r\n\r\n\t\r\n\tif (context.triggerMethod('paste', event) === false) { return; }\r\n\r\n\r\n\tlet text = event.originalEvent.clipboardData.getData('text/plain');\r\n\tif (!text) return;\r\n\tif (!context.isValueValid(text)) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t}\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context } = eventContext;\r\n\r\n\tif (context.triggerMethod('blur', event) === false) { return; }\r\n\r\n\r\n\tif (getOption(context, 'doneOnBlur', true)) {\r\n\t\tcontext.controlDone();\r\n\t}\r\n}\r\n","import getOption from './_get-option.js';\r\nexport default function(eventContext) {\r\n\tlet { context, input } = eventContext;\r\n\r\n\tif (context.triggerMethod('focus', event) === false) { return; }\r\n\r\n\tif (getOption(context, 'selectOnFocus', true)) {\r\n\t\tinput.select();\r\n\t}\r\n}\r\n","export default function(eventContext) {\r\n\r\n\tlet { context, input, event } = eventContext;\r\n\r\n\tif (context.triggerMethod('input', event) === false) { return; }\r\n\r\n\r\n\tcontext.setControlValue(event.target.value).then(newvalue => {\r\n\t\tif (event.target.value != (newvalue || '').toString()) {\r\n\t\t\tinput.value = newvalue;\r\n\t\t}\r\n\t});\r\n\t//context.triggerControlChange();\r\n}\r\n","import keydown from './keydown.js';\r\nimport keyup from './keyup.js';\r\nimport paste from './paste.js';\r\nimport blur from './blur.js';\r\nimport focus from './focus.js';\r\nimport input from './input.js';\r\n//import jsChange from './js-change';\r\nexport default {\r\n\tkeydown, \r\n\t//keypress,\r\n\tkeyup,\r\n\tpaste,\r\n\tblur,\r\n\tfocus,\r\n\tinput,\r\n\t//'js:change': jsChange\r\n};\r\n","\r\nimport camelCase from '../../../utils/camel-case/index.js';\r\nimport events from './events/index.js';\r\nexport default function handleInputEvent(control, eventName, event) {\r\n\tlet options = _.extend({\r\n\t\tcontext: control,\r\n\t\tinput: control.el,\r\n\t\trestrictions: control.restrictions,\r\n\t\teventName,\r\n\t\tevent\r\n\t});\r\n\r\n\r\n\tlet method = camelCase(`on:dom:${eventName}`);\r\n\r\n\tif (_.isFunction(events[eventName])) {\r\n\t\tevents[eventName].call(control, options);\r\n\t} \r\n\t\r\n\tif (_.isFunction(control[method])) {\r\n\t\tcontrol[method](event, options);\r\n\t} \r\n}\r\n","import handleEvent from './handle-event.js';\r\nimport eventHandlers from './events/index.js';\r\nimport getOption from '../../../utils/get-option/index.js';\r\n\r\n\r\nconst _getOption = (context, key, checkAlso) => \r\n\tgetOption(context, key, { args:[context], checkAlso });\r\n\r\nexport default function setInputEvents(inputView, opts = {}) {\r\n\r\n\tlet passedEvents = _getOption(inputView, 'events', opts);\t\r\n\r\n\tlet eventsArray = _(eventHandlers).keys();\t\r\n\tlet events = _.reduce(eventsArray, (Memo, eventName) => {\r\n\t\tMemo[eventName] = function(event){ \r\n\t\t\thandleEvent(this, eventName, event); \r\n\t\t};\r\n\t\treturn Memo;\r\n\t}, {});\r\n\tinputView.events = _.extend(events, passedEvents);\r\n}\r\n","import ControlMixin from '../control/index.js';\r\nimport setInputAttributes from './set-attributes.js';\r\nimport setInputEvents from './set-events.js';\r\nimport getOption from '../../../utils/get-option/index.js';\r\nimport convert from '../../../utils/convert-string/index.js';\r\n\r\n//import { convertString as convert, getOption } from '../../../utils/index.js';\r\nexport default Base => {\r\n\r\n\tlet Mixin = Base.ControlMixin ? Base : ControlMixin(Base);\r\n\r\n\treturn Mixin.extend({\r\n\t\tconstructor(opts){\r\n\t\t\t\r\n\t\t\tthis._initControl(opts);\r\n\r\n\t\t\tsetInputAttributes(this, opts);\r\n\t\t\tsetInputEvents(this, opts);\r\n\t\t\tMixin.apply(this, arguments);\r\n\r\n\t\t\tif (!_.isFunction(this.getOption)) {\r\n\t\t\t\tthis.getOption = _.partial(getOption, this, _, { args: [this]});\r\n\t\t\t}\r\n\r\n\t\t\tthis.buildRestrictions();\r\n\t\t\tlet value = this.getOption('value') || '';\t\t\t\r\n\t\t\tthis.el.value = value;\r\n\t\t\t//this.setControlValue(value, { trigger: false, silent: true });\r\n\t\t},\r\n\t\ttagName:'input',\r\n\t\ttemplate: false,\r\n\t\tdoneOnEnter: true,\r\n\t\tdoneOnBlur: true,\r\n\t\tbuildRestrictions(){\r\n\t\t\tlet attrs = _.result(this, 'attributes');\r\n\t\t\tlet pickNumbers = ['maxlength', 'minlength', 'min', 'max'];\r\n\t\t\tlet pickStrings = ['pattern'];\r\n\t\t\tlet pickBools = ['required'];\r\n\t\t\tlet restrictions = {};\r\n\t\t\t_(attrs).each((value, key) => {\r\n\t\t\t\tlet pick = false;\r\n\t\t\t\tkey = key.toLowerCase();\r\n\t\t\t\tif (pickNumbers.indexOf(key) > -1) {\r\n\t\t\t\t\tvalue = convert(value, 'number');\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickStrings.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t} else if (pickBools.indexOf(key) > -1) {\r\n\t\t\t\t\tpick = true;\r\n\t\t\t\t\tvalue = convert(value, 'boolean', { returnNullAndEmptyAs: true, returnOtherAs: true });\r\n\t\t\t\t}\r\n\t\t\t\tpick && (restrictions[key] = value);\r\n\t\t\t});\r\n\t\t\tthis.restrictions = restrictions;\t\t\r\n\t\t},\r\n\t\tprepareValueBeforeSet(value){\r\n\t\t\tif (value == null || value === '') return value;\r\n\t\t\t\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\tif (len > 0) {\r\n\t\t\t\tvalue = value.toString().substring(0, len);\r\n\t\t\t}\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tlet num = convert(value, 'number');\r\n\t\t\t\tif(isNaN(num))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tlet min = this.restrictions.min;\r\n\t\t\t\tlet max = this.restrictions.max;\r\n\t\t\t\t!isNaN(min) && num < min && (num = min);\r\n\t\t\t\t!isNaN(max) && num > max && (num = max);\r\n\t\t\t\treturn num;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tgetValueType(){\r\n\t\t\treturn this.valueType;\r\n\t\t},\r\n\t\tconvertValue(value){\r\n\t\t\treturn convert(value, this.getValueType());\r\n\t\t},\t\t\r\n\t\tgetMaxLength()\r\n\t\t{\r\n\t\t\treturn this.restrictions.maxlength;\r\n\r\n\t\t},\r\n\t\tisLengthValid(){\r\n\t\t\tlet value = this.getControlValue();\r\n\t\t\tlet len = this.getMaxLength();\r\n\t\t\treturn len == null || value.length < len;\r\n\t\t},\r\n\t\tisEnteredCharValid(char) {\r\n\t\t\tlet type = this.getValueType();\r\n\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn ['.','-'].indexOf(char) > -1 || !isNaN(parseInt(char, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisValueValid(value){\r\n\t\t\tlet type = this.getValueType();\r\n\t\t\tif (type == 'number') {\r\n\t\t\t\treturn !isNaN(parseFloat(value, 10));\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcontrolValidate(value){\r\n\t\t\tif (value == null || value === '') {\r\n\t\t\t\tif(this.restrictions.required)\r\n\t\t\t\t\treturn 'required';\r\n\t\t\t\telse if (this.restrictions.minLength > 0) {\r\n\t\t\t\t\treturn 'length:small';\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet strValue = value.toString();\r\n\t\t\tif (_.isNumber(this.restrictions.maxlength) && strValue.length > this.restrictions.maxlength)\r\n\t\t\t\treturn 'length:big';\r\n\t\t\tif (this._valueIsNumber) {\r\n\t\t\t\tif (!_.isNumber(value))\r\n\t\t\t\t\treturn 'not:number';\r\n\t\t\t\tif (_.isNumber(this.restrictions.min) && value < this.restrictions.min)\r\n\t\t\t\t\treturn 'less:than:min';\r\n\t\t\t\tif (_.isNumber(this.restrictions.max) && value > this.restrictions.max)\r\n\t\t\t\t\treturn 'greater:than:max';\r\n\t\t\t}\r\n\t\t\tif (this.restrictions.pattern) {\r\n\t\t\t\tlet pattern = RegExp(this.restrictions.pattern);\r\n\t\t\t\tif (pattern.test(strValue)) {\r\n\t\t\t\t\treturn 'pattern:mismatch';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","\r\nexport default Base => Base.extend({\r\n\tconstructor(options){\r\n\t\tif (!this.cssClassModifiers) {\r\n\t\t\tthis.cssClassModifiers = [];\r\n\t\t}\r\n\t\tthis._buttons = {};\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.addPromiseBarCssClass();\r\n\t\tthis.mergeOptions(options, ['promise', 'reject', 'resolve', 'beforeRejectSoft', 'beforeRejectHard', 'beforeResolve']);\r\n\t},\r\n\tclassName:'promise-bar',\r\n\ttagName: 'footer',\r\n\tresolve:'ok',\r\n\ttriggerNameEvent: true,\r\n\taddPromiseBarCssClass(){\r\n\t\tthis.cssClassModifiers.push('promise-bar');\r\n\t},\r\n\tonRender(){\r\n\t\tthis.addButtons();\r\n\t},\r\n\taddButtons(){\r\n\t\tlet buttons = this.buildButtons() || [];\r\n\t\twhile (buttons.length){\r\n\t\t\tlet button = buttons.pop();\r\n\t\t\tlet preventRender = !!buttons.length;\r\n\t\t\tthis.addChildView(button, { preventRender });\r\n\t\t}\r\n\t},\r\n\tbuildButtons(){\r\n\t\tlet names = ['resolve','rejectSoft','rejectHard'];\r\n\t\treturn _.reduce(names, (buttons, name) => {\r\n\t\t\tlet button = this.buildButton(name);\r\n\t\t\tbutton && buttons.push(button);\r\n\t\t\treturn buttons;\r\n\t\t}, []);\r\n\t},\r\n\tbuildButton(name){\r\n\t\tlet options = this.getButtonOptions(name);\r\n\t\tif (!options) return;\r\n\t\tlet Button = this.getOption('buttonView');\r\n\t\tlet btn = new Button(options);\r\n\t\tthis._buttons[name] = btn;\r\n\t\treturn btn;\r\n\t},\r\n\tgetButtonOptions(name){\r\n\t\tlet options = this.getOption(name);\r\n\t\tif ( !options ) return;\r\n\t\tif( _.isString(options) ) {\r\n\t\t\toptions = { text: options };\r\n\t\t} else if(!_.isObject(options)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet defs = { \r\n\t\t\tclassName: name, \r\n\t\t\tname, \r\n\t\t\ttriggerNameEvent: this.getOption('triggerNameEvent'), \r\n\t\t\tstopEvent: true,\r\n\t\t\ttext: options.text || name,\r\n\t\t};\r\n\t\toptions = _.extend(defs, options);\r\n\t\treturn options;\r\n\t},\r\n\tchildViewEvents:{\r\n\t\t'click:resolve'(data){\r\n\t\t\tthis.triggerMethod('resolve', data);\r\n\t\t},\r\n\t\t'click:rejectSoft'(value){ \r\n\t\t\tthis.triggerMethod('reject', { type: 'soft', value });\r\n\t\t\tthis.triggerMethod('reject:soft', value);\r\n\t\t},\r\n\t\t'click:rejectHard'(value){ \r\n\t\t\tthis.triggerMethod('reject', { type: 'hard', value });\r\n\t\t\tthis.triggerMethod('reject:hard', value);\r\n\t\t},\r\n\t\t'click:fail'(error, name, event, view) {\r\n\t\t\tthis.triggerMethod('click:fail', error, name, event, view);\r\n\t\t\tif (name) {\r\n\t\t\t\tthis.triggerMethod(`click:${name}:fail`, error, event, view);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdisableButton(name){\r\n\t\tlet btn = this._buttons[name];\r\n\t\tbtn && btn.disable();\r\n\t},\r\n\tenableButton(name){\r\n\t\tlet btn = this._buttons[name];\r\n\t\tbtn && btn.enable();\r\n\t},\r\n\r\n});\r\n"],"names":["MnObject","Mn","Object","createMixinFromObject","arg","mixedObj","_","clone","mixedCtor","isFunction","constructor","mx","apply","arguments","Base","extend","normalizeArguments","args","opts","raw","wrap","wrapObjectWithConstructor","merge","mergeObjects","mixins","each","push","isObject","size","unshift","withMethod","options","Mixed","class","length","reduce","Memo","Ctor","mixed","isClass","prototype","isModel","Model","isModelClass","isCollection","Collection","isCollectionClass","isView","View","isViewClass","mix","_ctor","defaultOptions","ctor","b","omit","Error","BaseModel","BbmnBase","ctors","Router","BaseObject","tryGetFromMn","ClassName","isKnownCtor","isFn","result","knownCtors","some","betterResult","obj","key","context","checkAlso","force","defaultValue","default","isString","value","alsoOptions","getOption","also","_opts","deep","instanceGetOption","Mixin","defaultGetArguments","defaults","values","keys","split","option","undefined","camelCase","text","first","isBoolean","pop","filter","chunk","join","toString","replace","splitter","match","prefix","toUpperCase","toLowerCase","triggerMethod","event","methodName","method","trigger","triggerMethodOn","call","Process","name","process","concurrent","concurrencyCheck","run","isPromisable","Promise","then","asArray","isArray","race","promises","valueToPromise","resolve","reject","_initDefaults","_initCancelation","_mergeOptions","cid","uniqueId","errors","cancelPromise","cancel","previous","getProcessFromContext","promise","updateProcessInContext","_createLifeCyclePromise","_notCanceled","_begin","_beforeStart","_canBeStarted","_waitOtherPromises","triggerComplete","catch","triggerError","error","jsError","getJsError","_cancelationRace","_getHookResultAsPromise","contextMethod","invokeOnContext","all","hookName","procMethod","procHook","cntxHook","triggerOnContext","onComplete","triggerEnd","onError","f","getContextProcessKey","eventName","register","defaultStartableOptions","contextState","keyValue","storeState","ensureState","processingName","processedName","restoreState","shouldThrow","other","status","defaultStartOptions","defaultStopOptions","_initializeStartable","startable","start","stop","isNotIddle","isStarted","_initializeChildrenable","mergeOptions","parent","root","_childrenInitialized","children","_children","_initializeChild","child","Child","invoked","buildChildOptions","buildChild","items","exclude","map","item","index","_childFilter","childFilter","indexOf","slice","reverse","_getChildren","includeSelf","getChildren","chain","getAllChildren","flatten","ChildrenableMixin","getNestedResult","schema","nested","getPropertySchema","model","getDisplayConfig","getPropertyDisplayConfig","display","getProperty","get","gettingByPath","getByPathArray","propertyName","pathArray","prop","nextName","shift","getByPath","path","originalGet","transform","alternative","ifEmpty","label","on","_isFetching","_isFetched","defaultCssConfig","cssClassModifiers","_setupCssClassModifiers","className","_getCssClassString","$el","removeAttr","attr","optsModifiers","propsModifiers","modifiers","concat","_getCssClassModifiers","getCssClassModifiers","classes","hash","modifier","cls","builded","_cssClassModifiersInitialized","cfg","getCssClassConfig","events","getCssClassEvents","refreshCssClass","modelChange","listenTo","_getCssClassConfig","refresh","beforeRender","uniq","_getCssClassEvents","CssClassModifiersMixin","takeFirst","getModel","compareAB","a","func","every","getView","comparator","single","toNumber","isNumber","parseFloat","isNaN","trueValues","falseValues","returnValue","valueOrAlternative","nullable","nullValue","alts","alt","convertToBoolean","strict","returnNullAs","returnEmptyAs","returnNullAndEmptyAs","returnAnyAs","returnOtherAs","isTrue","isFalse","convertString","type","toBoolean","traverse","fields","babelHelpers.typeof","attributes","props","getOwnPropertyNames","x","Date","Array","flattenObject","res","transformStringArray","arr","ignoreCase","toCamelCase","hasFlag","flag","has","rawflags","rawvalues","useObjectValues","v","flags","intersection","isEmptyValue","allowWhiteSpace","trim","normalizeStringArray","compare","caseInsensitive","getFlag","returnAs","takeObjectKeys","delimeter","doNotPluck","founded","filtered","check","good","pluck","pstoSetPair","pair","keyvalue","pstoSetKeyValue","decodeURIComponent","paramsToObject","emptyObject","pairs","setProperty","set","silent","ensureSetByPathArguments","setByPathArr","argumentsErrors","ensureArguments","modelContext","models","normalizeSetByPathOptions","ext","triggerModelEventsOnSetByPath","rest","pathChunks","property","setByPath","normalizeOptions","setByPathArray","unFlat","e","compareObjects","objectA","objectB","allvalues","valuesA","_v","valuesB","allkeys","mergeObject","src","dst","flatSrc","flat","flatDst","unflat","Action","action","_action","instance","decline","isNotAllowed","onExecuteNotAllowed","getAction","onActionMissing","hidden","store","BaseAction","getStoreByCtor","find","names","getStore","actions","buildAction","ActionClass","getStoreName","actionsByNames","passed","cache","found","exec","getFromPrototypes","__proto__","_actionableActionsInitialized","ActionStore","isNotInitialized","actionsStoreName","inherited","inheritActions","protoActions","rawactions","initialize","buildStoreAction","_initializeActionableActions","getActions","ActionableMixin","errorProps","normalizeAppErrorOptions","data","message","AppError","newKeywordOmited","url","important","urlRoot","pick","captureStackTrace","nativeAjax","_nativeAjax","tokenizedAjax","headers","getAjaxHeaders","$","Token","ajaxHeaders","flows","initializeFlows","setExpiration","shouldRequestOnInitialize","getReady","ready","hasToken","update","setFlow","endPoint","getToken","tokenAttribute","refreshTokenAttribute","_fetching","json","parsed","parse","xhr","clearOnFail","handleError","clear","fullhash","unset","shouldUnset","setHash","memo","reflectTokenChanges","Backbone","ajax","token","Authorization","Accept","updateAjaxHeaders","replaceBackboneAjax","storeToken","isExpired","getFlow","getRefreshTokenData","fetch","getRefreshToken","expiresAt","date","now","isDate","seconds","minutes","hours","days","setDate","getDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","valueOf","getExpiration","secondsOffset","username","password","grant_type","setNativeAjax","old","config","BaseNodeRegion","Region","destroySelf","destroyNode","destroy","el","remove","normalizeElement","selector","body","document","querySelector","Element","jquery","renderInNode","view","replaceElement","destroySelfOnEmpty","destroyOnEmpty","NodeRegion","createElement","appendChild","region","show","ViewStack","unremovableKey","destroyOnRemove","removeOnEsc","removeOnOutsideClick","stack","Events","removeAll","_setupView","_stackChanged","preventRemove","getUnremovableKey","listenToOnce","_removeView","selfDestroy","removed","_destroyView","last","getLast","isViewUnremovable","_cleanUpView","splice","stopListening","change","_setDocumentListeners","_unsetDocumentListeners","eventElement","viewElement","getViewDomElement","contains","isElementOutsideOfView","getViewIfElementOutside","target","preventDefault","stopPropagation","keyCode","removeLast","_documentListeners","$doc","getDocument","_shouldRemoveOnEsc","_escapePressHandler","bind","escapePressHandler","_shouldRemoveOnOutsideClick","_outsideClickHandler","outsideClickHandler","off","_isDestroyed","_isDestroying","destroyLast","_onKeyUp","_outsideClick","CollectionView","emptyView","_handleEmptyFetch","collection","_renderChildren","rebuildIndexes","findByModel","_index","_isModelView","_addChild","v1","v2","_hasUnrenderedViews","_addedViews","views","_views","_showEmptyView","els","_getBuffer","_attachChildren","_isRendered","preventRender","render","hasIndex","isAddedToEnd","sort","_destroyEmptyView","isEmpty","EmptyView","_getEmptyView","_getEmptyViewOptions","_emptyViewInstance","addChildView","_removeChildView","_removeChild","CollectionViewMixin_4x","_customs","_collection","_initializeCustoms","optionsCustoms","instanceCustoms","shouldMergeCustoms","add","_renderCustoms","_renderedCustoms","customs","getCustoms","addChildViews","renderCustoms","_prepareCustoms","rawcustoms","array","_prepareCustom","buildCustom","childOptions","viewOptions","_setupCustom","setupCustom","noop","awaitingRender","rendered","CustomsMixin","BackboneView","setText","html","isRendered","_isAttached","mixWith","DestroyMixin","nextCollectionView","with","closest","createCloseButton","takeOptionsView","Button","_view","tagName","TextView","modalChildren","_initContentListeners","content","template","ModalView","BaseView","ViewMixin","MnView","CloseButtonView","stackOptions","showOptions","modal","buildView","getStack","Schema","modelSchema","order","validation","getDisplay","properties","setProperties","PropertySchema","getProperties","createProperty","toArray","p1","p2","getPropertiesArray","create","_createProperty","_setProperty","getValidation","getType","getLabel","schemas","ModelSchema","router","routeArgumentsToObject","route","callback","isRouterHoldsActions","rawRoute","isRegExp","_routeToRegExp","callbackWrapper","_processCallback","createActionContext","routeContext","fragment","rawArgs","_extractParameters","queryString","qs","prepareActionQueryString","prepareActionArguments","routeType","queryStringParser","params","substring","toPromise","getCallbackFunction","executeResult","exception","processCallback","actionContext","asPromise","triggerEvent","shouldTriggerEvent","execute","lastAttempt","handlers","_getHandleContext","applyHandler","handler","getHandler","setHandler","getHandleContext","custom","Deferred","BaseRouter","BbRouter","GetOptionMixin","routes","getInitRoutes","addRoutes","controller","approutes","_buildRouteContext","registerRouteContext","_storeCreatedContext","isRouteChaining","normalized","_normalizeRoutes","doNotReverse","registered","addRoute","massAdd","c","buildRouteContextFromArguments","buildRouteContext","history","routeContexts","restart","handle","paramStringToObject","optionalParam","namedParam","splatParam","escapeRegExp","optional","RegExp","cntx","test","page","contexts","getRoutesContexts","startPage","beforePageStart","afterPageStart","previousPage","initializeRouter","_buildRoutesContexts","_createRouter","_shouldRegisterAllRoutes","pages","registerPageRoutes","getRoutesConfig","_normalizeRoutesContextRoute","routesContext","relative","parentContext","getMainRouteContext","mainRouteContext","sortBy","main","take","BasePage","StartableMixin","RoutesMixin","initializeRoutes","initializeChildren","registerAllRoutes","getParent","getRoot","getPathHash","getHash","getChildrenHashes","getSiblingsHashes","self","i","visible","getSiblings","getAllPages","parentCid","getMenuLabel","base","historyNavigate","navigate","historyLoadUrl","matchRoot","getFragment","executed","executeHandler","testHandler","findHandler","customTest","resultContext","loadUrl","entries","onRoute","onBackRoute","isActionContext","lastElement","gobackContext","lookFor","hasElements","go","navigateBack","_disallowedKeys","allowedKey","fake","id","val","String","removeItem","session","sessionStorage","local","localStorage","SECONDS","MINUTES","HOURS","DAYS","normValue","toJSON","expireAt","datePattern","textDate","jsonParse","_this","JSON","_jsonParse","_createItem","getItem","_parse","checkExpire","_get","expired","_isExpired","getExpireAt","_normalizeValue","_set","offset","stringify","setItem","rules","chunks","left","right","valueIn","valueNotIn","shouldBeEqual","allValues","shouldNotBeEqual","ruleValue","minLength","maxLength","minValue","numValue","maxValue","pattern","reIndex","sortBefore","rule","normalizeValidationContext","required","validate","getRuleContexts","taken","findWhere","ruleContext","buildMessage","validateOptions","rulesPromise","removeRule","findIndex","setRule","init","previousCollection","_removeCollection","initModels","_setCollectionListeners","_store","byModel","isFiltered","isSorted","_removeItems","_clearCollectionStore","_modelsInitialized","_onCollectionUpdate","_onCollectionReset","_onCollectionSort","_onCollectionFirstFetch","enableCollection","_rebuildModels","getFilter","_getModelContext","_storeContext","_sortItems","getComparator","col","changes","added","merged","_filterItems","_addItems","attach","_updateIndexes","processAndRender","_items","_filtered","_getItems","_dataComparator","previousModels","$container","skip","Infinity","dataComparator","dataFilter","customContext","_normalizeAddCustomContext","_setupJustCreatedView","_checkCustomCondition","rebuild","_destroyChildView","_detachChildView","customView","enableFilterForCustomViews","condition","detached","_injectEmptyView","newitems","_ensureContextHasView","build","viewFn","isInPage","paginator","from","to","viewIsGood","renderView","supportsRenderLifecycle","destroyView","disableDetachEvents","_disableDetachEvents","supportsDestroyLifecycle","shouldTriggerDetach","forceSort","forceFilter","_removeEmptyViewInstance","totalDetach","detach","_setItems","getPaginator","_injectCustoms","total","skiped","taked","lastResult","setTimeout","iterator","shouldUpdateIndex","isNew","markNew","pass","iteratee","_a","_b","_removeItem","createView","removeCustomViews","triggerViewMethod","_destroyChildViews","_detachChildViews","_attachChildViews","getChildrenContainer","monitorViewEvents","Dom","detachContents","shouldDisableEvents","detachEl","shouldTriggerAttach","elBuffer","createBuffer","appendContents","_$contents","_$el","_createModelChildView","_createCustomChildView","created","_getChildViewClass","_getChildViewOptions","onBuild","_proxyChildViewEvents","modelView","modelViewOptions","EmptyViewMixin","_getEmptyViewClas","emptyViewOptions","MergeOptions","ViewManager","_ensureOptions","setCollection","borrow","common","buildViewByKey","allowTextView","_options","enumsStore","getEnum","_enum","skipTake","defaultSelector","defaultUpdateDom","element","addClass","append","buildRegionFunc","autoCreateRegion","updateDom","regionEl","getRegion","testEl","definition","addRegion","normalizeNestedViewContextRegion","regionName","partial","buildRegion","_nestedViews","initializeNestedViews","_nestedViewsInitialized","showAllNestedViews","nesteds","addNestedView","normalizeRegion","getNestedViewContext","_normalizeNestedContext","_createNestedContext","showNestedView","getNestedViewRegion","buildNestedView","passedView","buildNestedViewOptions","_initializeViewManager","_fallbackOptions","_viewManager","managedCollection","_customViewsQueue","addCustomView","childView","childViewOptions","getTemplate","_reInitRegions","_renderTemplate","bindUIElements","setComparator","viewComparator","setFilter","viewFilter","beforeClick","getTriggerMethod","ensureError","_initControl","once","getParentControl","_removeChildControl","getChildrenControls","_removeParentControl","_cntrl","control","controlName","getControlName","_controlInitialized","takeValue","_clone","initControlValue","initParentControl","_onControlDestroy","setParentControl","_addChildControl","initial","current","getControlValue","isValid","notValidated","valueKey","_prepareValueBeforeSet","isSameControlValue","_setControlValue","prepareValueBeforeSet","skipValidation","_onSetControlValueValidateSuccess","_validate","_onSetControlValueValidateFail","isDone","_tryTriggerEvent","_catch","_validateControlPromise","_onControlValidateSuccess","_onControlValidateFail","getParentControlValue","validateResult","isControlWrapper","skipChildValidate","childrenPromise","finaly","wrapped","childrenErrors","_validateChildrenControlsPromise","makeValid","makeInvalid","childEvent","cce","def","defaultChildControlEvents","defHandler","isControlWraper","setControlValue","controlDone","namedEvent","handleChildControlEvent","parentTrigger","ControlMixin","customsMixin","addCssClassModifier","_onControlValid","_onControlInvalid","makeControlReady","getControlView","injectSystemViews","_setupChildControl","setupChildControl","getHeaderView","getErrorView","getFooterView","skipTextCheck","buildTextView","_errorView","buildErrorView","buildHeaderView","buildButtonsView","buildFooterView","_buttonsView","buildButtonsOptions","settleButtonsListeners","btns","buildButton","fixButton","button","buttonsView","parentControl","disableButtons","_showValidateError","enableButtons","_hideValidateError","disableButton","enableButton","shouldShow","skipFirstValidationError","_firstValidationErrorSkipped","showError","hide","hideError","ControlViewMixin","_getOption","getInputType","inputView","valueType","_valueIsNumber","valueOptions","inputType","setInputAttributes","restrictionKeys","restrictions","key2","ifNull","isChar","ctrlKey","eventContext","prevent","isEnteredCharValid","shouldDone","originalEvent","clipboardData","getData","isValueValid","input","select","newvalue","handleInputEvent","setInputEvents","passedEvents","eventsArray","eventHandlers","buildRestrictions","attrs","pickNumbers","pickStrings","pickBools","convert","len","getMaxLength","num","min","max","getValueType","maxlength","char","parseInt","strValue","_buttons","addPromiseBarCssClass","addButtons","buttons","buildButtons","getButtonOptions","btn","defs","disable","enable"],"mappings":"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"}